


<!DOCTYPE html>
<html class="no-js" lang="fr" prefix="og: http://ogp.me/ns#">
    
<!-- Mirrored from openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/formulaires-l-envoi-de-fichiers by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Apr 2016 09:51:46 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <meta charset="utf-8" /><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var o=e[n][1][t];return r(o||t)},o,o.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){function r(e,t){return function(){o(e,[(new Date).getTime()].concat(a(arguments)),null,t)}}var o=e("handle"),i=e(2),a=e(3);"undefined"==typeof window.newrelic&&(newrelic=NREUM);var u=["setPageViewName","addPageAction","setCustomAttribute","finished","addToTrace","inlineHit"],c=["addPageAction"],f="api-";i(u,function(e,t){newrelic[t]=r(f+t,"api")}),i(c,function(e,t){newrelic[t]=r(f+t)}),t.exports=newrelic,newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),o("err",[e,(new Date).getTime()])}},{}],2:[function(e,t,n){function r(e,t){var n=[],r="",i=0;for(r in e)o.call(e,r)&&(n[i]=t(r,e[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],3:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(0>o?0:o);++r<o;)i[r]=e[t+r];return i}t.exports=r},{}],ee:[function(e,t,n){function r(){}function o(e){function t(e){return e&&e instanceof r?e:e?u(e,a,i):i()}function n(n,r,o){e&&e(n,r,o);for(var i=t(o),a=l(n),u=a.length,c=0;u>c;c++)a[c].apply(i,r);var s=f[g[n]];return s&&s.push([m,n,r,i]),i}function p(e,t){w[e]=l(e).concat(t)}function l(e){return w[e]||[]}function d(e){return s[e]=s[e]||o(n)}function v(e,t){c(e,function(e,n){t=t||"feature",g[n]=t,t in f||(f[t]=[])})}var w={},g={},m={on:p,emit:n,get:d,listeners:l,context:t,buffer:v};return m}function i(){return new r}var a="nr@context",u=e("gos"),c=e(2),f={},s={},p=t.exports=o();p.backlog=f},{}],gos:[function(e,t,n){function r(e,t,n){if(o.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[t]=r,r}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){o.buffer([e],r),o.emit(e,t,n)}var o=e("ee").get("handle");t.exports=r,r.ee=o},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!w++){var e=v.info=NREUM.info,t=s.getElementsByTagName("script")[0];if(e&&e.licenseKey&&e.applicationID&&t){c(l,function(t,n){e[t]||(e[t]=n)});var n="https"===p.split(":")[0]||e.sslForHttp;v.proto=n?"https://":"http://",u("mark",["onload",a()],null,"api");var r=s.createElement("script");r.src=v.proto+e.agent,t.parentNode.insertBefore(r,t)}}}function o(){"complete"===s.readyState&&i()}function i(){u("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var u=e("handle"),c=e(2),f=window,s=f.document;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:f.XMLHttpRequest,REQ:f.Request,EV:f.Event,PR:f.Promise,MO:f.MutationObserver},e(1);var p=""+location,l={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-918.min.js"},d=window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent),v=t.exports={offset:a(),origin:p,features:{},xhrWrappable:d};s.addEventListener?(s.addEventListener("DOMContentLoaded",i,!1),f.addEventListener("load",r,!1)):(s.attachEvent("onreadystatechange",o),f.attachEvent("onload",r)),u("mark",["firstbyte",a()],null,"api");var w=0},{}]},{},["loader"]);</script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <meta name="application-name" content="OpenClassrooms"/>
        <meta name="msapplication-TileColor" content="#e95325"/>
        <meta name="msapplication-TileImage" content="/fav-icon.png?v=1"/>

        <meta name="theme-color" content="#E95325">
        <link rel="icon" sizes="144x144" href="../../fav-icon3860.png?v=1">

        
        
        <link href="../../bundles/common/css/masterd0b3.css?095b5b3" type="text/css" rel="stylesheet" media="all"  />
        

        <link rel="apple-touch-icon" href="../../apple-touch-icon.png" />
        <link rel="apple-touch-icon" href="../../apple-touch-icon-iphone.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="../../apple-touch-icon-ipad.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="../../apple-touch-icon-iphone-retina-display.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="../../apple-touch-icon-ipad-retina-display.png" />

        <link rel="apple-touch-icon-precomposed" href="../../apple-touch-icon-precomposed.png" />

            <link href="../../bundles/course/css/maind0b3.css?095b5b3" type="text/css" rel="stylesheet" media="all"/>

        <script type="text/javascript" src="../../js/modernizrd0b3.js?095b5b3"></script>

        <link rel="shortcut icon" href="https://openclassrooms.com/favicon.ico?095b5b3" />

            
    <meta property="og:locale" content="fr"/>
    <meta property="og:type" content="website"/>

    <meta property="og:title" content="Découvrez le cours &quot;Formulaires : l&#039;envoi de fichiers&quot; sur @OpenClassrooms"/>
    <meta property="og:url" content="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/formulaires-l-envoi-de-fichiers"/>
    <meta property="og:site_name" content="OpenClassrooms"/>
    <meta property="og:image" content="https://static.oc-static.com/prod/courses/illustrations/illu_creez-votre-application-web-avec-java-ee.png"/>
    <meta property="og:description" content="Pour réaliser des sites web en Java, on utilise l&#039;environnement Java EE (anciennement appelé J2EE). Celui-ci impose de développer de façon très structurée, ce qui explique certainement pour quoi on le retrouve dans un très grand nombre d&#039;applications web notamment en entreprise (banques, administrations...)."/>

            
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@OpenClassrooms"/>
    <meta name="twitter:title" content="Découvrez le cours &quot;Formulaires : l&#039;envoi de fichiers&quot; sur @OpenClassrooms"/>
    <meta name="twitter:description" content=""/>

                
        <title>Formulaires : l&#039;envoi de fichiers</title>

        <!-- inlined top javascript block -->


        <script type="text/javascript">
            var App = {
                startTime: (new Date()).getTime(),
                debug: false
            };

            App.user = {
                
                
                
                isPremium: false
            };


            App.preferences = {
                assetVersion: '095b5b3',
                contactMail: 'hello@openclassrooms.com',
                adyenPublicKey: '10001|889EBFD4D434B82683E21DCA26E77C3E20E0EE09A5ECE3830B0ED51F2FA721A2F7E9EC871C6AB9A1E12C4492F4717673047757E02C5256D8E265CD51E413E5EFCCFEAC41B39C662A424ADC13EE187C38C372A7FCCEC1EA5DF841989437D78B252A8EB51008E60BB55B1E55A7A80DE1A9D60D998C128A576BFAE1DDB97D514AF0A073AEDDE84CEE40D1F8F6ECE85D0FFA50C95C06DB274021C1371376C6EB16561FD65C5E2704B570A7504D617D0F3820F176A0609F6162BDF5890533289FDC3DA7DB03B50BB3BD60A613E1FF72060F22987627E8F1A29F0128A94EC4C8FF7CF6B7AB9558D8433BF86D7A388AB927641CD6C02689139CEE3AAC9ACBFFE83806CB',
                algolia: {
                    appId: 'JGRXRFVQM0',
                    apiKey: 'dfbdea500cb0b5f46e449ad334916c44', indexName: 'prod_COURSES_fr'
                },
                routes: {
                    COURSE_EVENT: '/components/courses/:courseId',
                    COURSE_PART_EVENT: '/components/courses/:courseId/parts/:partId',

                    ACCEPT_COOKIE: '/components/user-accept-consent-cookie'
                }

                                            };

            App.preferences.navigationPreference = {
                            };

            App.preferences.modules = {
                'smiley': {
                    basePath: '/bundles/common/images/smiley/'
                }
            };
        </script>
        <!-- inlined top javascript block end -->

        <script>    App.preferences.modules['course/view/internalFolding'] = {
        isBigCourse: true
    };

    App.data = App.data || {};
App.data.currentCourse = {"partId":623527,"courseId":626954};
App.preferences.modules['view/currentCoursePage'] = App.data.currentCourse;

</script>

        
        
    </head>

    <body class="course oc-body ">

        

        
    
    
    <script id="_EVENTS-PAGE" type="application/json">
        {"type":"page"}
    </script>


        <!--[if lt IE 9]>
<div class="disclaimer  disclaimer-error">
    Vous utilisez un navigateur obsolète, veuillez le <a href="http://browsehappy.com/">mettre à jour</a>.
</div>
<![endif]-->

<noscript>
    <div class="disclaimer  disclaimer--error">
        Veuillez utiliser un <a href="http://browsehappy.com/">navigateur internet moderne</a> avec JavaScript activé pour naviguer sur OpenClassrooms.com
    </div>
</noscript>


                    

<header id="oc-header" class="js-tabs-mobile mainHeader ">

        <div class="disclaimer  disclaimer--info hidden  js-cookie-disclaimer">
        <div class="disclaimer__wrapper">
            <span class="disclaimer__content">Bienvenue sur OpenClassrooms ! En poursuivant votre navigation, vous acceptez l'utilisation de cookies. <a href="https://openclassrooms.com/privacy-policy#personal-data-gathering">En savoir plus</a></span>
            <span class="disclaimer__actions">
                <a href="#" class="disclaimer__button  js-close-button">ok</a>
            </span>
        </div>
    </div>

    <div class="mainHeader__wrapper">

        <div class="mainHeader__topLine">
                <a href="https://openclassrooms.com/pole-emploi/partenariat?utm_source=SiteWeb-OC&amp;utm_medium=Lien-PhraseHeader&amp;utm_campaign=relancePE"> Vous êtes demandeur d'emploi ? On vous offre le Premium Solo en 3 clics :) ! </a>

        </div>

        <div class="mainHeader__top">
            <a href="https://openclassrooms.com/" class="mainHeader__logo" title="OpenClassrooms.com">OpenClassrooms.com</a>

            
<nav role="navigation" class="icoTabs  mainHeader__tabSet">
    <span class="mainHeader__mobileNav">

        
        
        <a class="js-tabs-tab  icoTabs__tab  is-disabled" href="#tab-courseMenu">
            <span class="icoTabs__inner--mobileRightSeparator">
                <i class="icon-plus  icoTabs__icon"></i>
            </span>
        </a>

        <a class="js-tabs-tab  icoTabs__tab  is-disabled" href="#tab-courseEditMenu">
            <span class="icoTabs__inner--mobileRightSeparator">
                <i class="icon-plus  icoTabs__icon"></i>
            </span>
        </a>

        <a class="js-tabs-tab  icoTabs__tab  is-disabled" data-tabs-default="true" href="#tab-searchMenu">
            <span class="icoTabs__inner--mobileRightSeparator">
                <i class="icon-search  icoTabs__icon"></i>
            </span>
        </a>

        <a class="js-tabs-tab  icoTabs__tab" href="#tab-main">
            <i class="icon-menu  icoTabs__icon"></i>
        </a>
    </span>

</nav>
        </div>

                <div class="js-tabs-content  mainHeader__content"></div>

        <div class="mainHeader__content">
            <div id="tab-main" class="mainHeader__tabs">
                <nav class="mainTopNav  scrollPanel  js-scrollPanel-mobileMenu">
    <div class="mainTopNav__container  scrollPanel__container  js-scrollPanel-container">
        <ul class="mainHeader__container  mainHeader__container--mainMenu  js-scrollPanel-content">
            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="http://openclassrooms.com/paths/">Parcours</a>
            </li>
            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="https://openclassrooms.com/courses">Cours</a>
            </li>
            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="https://openclassrooms.com/forum/">Forums</a>
            </li>

            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="https://openclassrooms.com/partners">Partenaires</a>
            </li>

            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="https://openclassrooms.com/premium">Premium</a>
            </li>
        </ul>
    </div>
</nav>

                <div class="mainHeader__contentInner">
                    <div class="mainHeader__container  mainHeader__container--search">
                                                                                                                                                                            
                                                                          
 <div class="js-courseSearch  topSearchBox">
     <form tabindex="0" class="js-courseSearch-form  oc-form" action="https://openclassrooms.com/courses" method="get">
         <div class="js-courseSearch-inputGroup oc-form__widget  inputGroup  topSearchBox__inner">
             <input id="algolia-search-input"
                    type="search"
                    class="js-courseSearch-input oc-form__control inputGroup__input  topSearchBox__input"
                    title="Rechercher"
                    autocomplete="off"
                    data-option_source="/components/courses/search?q=<%= term %>"
                    placeholder="Rechercher"
                    name="q" />

             <button class="js-courseSearch-button  oc-btn dark-btn  only-icon  inputGroup__button  topSearchBox__button" type="submit" title="Rechercher un cours">
                 <i class="inputGroup__icon icon-search"></i>
                 <i class="inputGroup__icon inputGroup__icon--load icon-spinner icon-spin"></i>
             </button>
         </div>
     </form>
 </div>
                    </div>

                                            <div class="mainHeader__container  mainHeader__container--separatorLarge  hidden-s"></div>
                    


                    
                                            <div class="mainHeader__container  mainHeader__container--login">
    <a href="https://openclassrooms.com/register" class="oc-btn orange-alt-btn js-popin-activator space-right" data-popin-selector="#popin-sign-in">
    S&#039;inscrire
</a>
<a href="https://openclassrooms.com/login" class="oc-btn dark-btn js-popin-activator" data-popin-selector="#popin-log-in">
    Se connecter
</a>
</div>


<aside  tabindex="-1"
        role="dialog"
                    aria-labelledby="popin-sign-in_popin_title"
                class="popin popin--small  js-popin"
        id="popin-sign-in"
>
    <i class="popin__close-button icon-close js-close-button"></i>

    <div class="popin__inner">
        
        <div class="popin__mainContainer">
                            <h3 id="popin-sign-in_popin_title" class="popin__title  js-popin-title">Inscription</h3>
            
            
            
            <div class="popin__content  js-popin-content">
                <div class="popin__contentWrapper">
                                                <div class="formLogin formLogin--smallSize">
            
<ul class="table table--fullwidth u--noMargin">
    <li class="formLogin__column">
        <a class="facebook-btn oc-btn fullwidth formLogin__facebook" href="https://www.facebook.com/v2.3/dialog/oauth?client_id=277769842283905&amp;redirect_uri=https%3A%2F%2Fopenclassrooms.com%2Flogin_check_facebook&amp;state=89630b1a016948c7ab1a61add4168d74&amp;sdk=php-sdk-4.0.23&amp;scope=public_profile%2Cemail">
            <i class="icon-facebook"></i>S&#039;inscrire avec Facebook
        </a>
        <a class="google-btn oc-btn fullwidth formLogin__google" href="https://accounts.google.com/o/oauth2/auth?response_type=code&amp;redirect_uri=https%3A%2F%2Fopenclassrooms.com%2Flogin_check_google&amp;client_id=132418960718-jdnmpug3g9e6ub2p41ergcci1492qh82.apps.googleusercontent.com&amp;scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fplus.me+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&amp;access_type=online&amp;approval_prompt=auto">
            <i class="icon-google"></i>S&#039;inscrire avec Google
        </a>
    </li>

    <li class="formLogin__column">
        
            
    
    

    <form name="register" method="post" action="https://openclassrooms.com/register" class="js-registerForm oc-form">

        <div class="accessibility-hidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Wonder&nbsp;                        </span><span class="oc-form__widget"><input type="text" id="register_wonder" name="register[wonder]" class="" /></span></label>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Prénom&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="text" id="register_firstName" name="register[firstName]" required="required" autofocus="autofocus" class="" /></span></label>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Nom&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="text" id="register_lastName" name="register[lastName]" required="required" class="" /></span></label>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Adresse email&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="email" id="register_email" name="register[email]" required="required" class="" /></span></label>
            <p>
                <em>
                    Vous recevrez votre mot de passe sur cette adresse email.
                </em>
            </p>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row  oc-form__row--reversed  "><span class="oc-form__widget"><span class="ocCheckbox"><input type="checkbox" id="register_terms" name="register[terms]" required="required" class="" value="1" /><span class="ocCheckbox__check"></span></span></span><span class="oc-form__label-text"><span class="oc-form__label-text ">
                            J'ai lu et j'accepte les <a href="https://openclassrooms.com/terms-conditions/fr">Conditions Générales d'Utilisation</a>.&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span></span></label>
        </div>


        <div class="oc-form__group  center-text">
            
    <button type="submit" id="register_create" name="register[create]" class="oc-btn orange-alt-btn oc-btn"> S'inscrire</button>
        </div>

        <input type="hidden" id="register__target_path" name="register[_target_path]" value="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/formulaires-l-envoi-de-fichiers" /><input type="hidden" id="register__token" name="register[_token]" value="LEhsW-IhokD4hQHYoHva_FZzYy-PP2cG-886IBpx9HY" /></form>
    </li>
</ul>
        </div>
                    </div>
            </div>

            
                        
                    </div>
    </div>
</aside>



<aside  tabindex="-1"
        role="dialog"
                    aria-labelledby="popin-log-in_popin_title"
                class="popin popin--small  js-popin"
        id="popin-log-in"
>
    <i class="popin__close-button icon-close js-close-button"></i>

    <div class="popin__inner">
        
        <div class="popin__mainContainer">
                            <h3 id="popin-log-in_popin_title" class="popin__title  js-popin-title">Connexion</h3>
            
            
            
            <div class="popin__content  js-popin-content">
                <div class="popin__contentWrapper">
                                                <div class="formLogin formLogin--smallSize">
            
<ul class="table table--fullwidth u--noMargin">
    <li class="formLogin__column">
        <a class="facebook-btn oc-btn fullwidth formLogin__facebook" href="https://www.facebook.com/v2.3/dialog/oauth?client_id=277769842283905&amp;redirect_uri=https%3A%2F%2Fopenclassrooms.com%2Flogin_check_facebook&amp;state=89630b1a016948c7ab1a61add4168d74&amp;sdk=php-sdk-4.0.23&amp;scope=public_profile%2Cemail"><i class="icon-facebook"></i> Se connecter avec Facebook</a>
        <a class="google-btn oc-btn fullwidth formLogin__google" href="https://accounts.google.com/o/oauth2/auth?response_type=code&amp;redirect_uri=https%3A%2F%2Fopenclassrooms.com%2Flogin_check_google&amp;client_id=132418960718-jdnmpug3g9e6ub2p41ergcci1492qh82.apps.googleusercontent.com&amp;scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fplus.me+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&amp;access_type=online&amp;approval_prompt=auto"><i class="icon-google"></i> Se connecter avec Google</a>
    </li>

    <li class="formLogin__column">

        
            
    
    

    <form name="" method="post" action="https://openclassrooms.com/login_check" class=" oc-form">

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Adresse email ou nom d'utilisateur&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="text" id="_username" name="_username" required="required" autofocus="autofocus" class="" /></span></label>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Mot de passe&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="password" id="_password" name="_password" required="required" class="" /></span></label>
        </div>

        <div class="oc-form__group">
                <label class="oc-form__row  oc-form__row--reversed  "><span class="oc-form__widget"><span class="ocCheckbox"><input type="checkbox" id="_remember_me" name="_remember_me" class="" value="1" checked="checked" /><span class="ocCheckbox__check"></span></span></span><span class="oc-form__label-text"><span class="oc-form__label-text ">
                            Se souvenir de moi&nbsp;                        </span></span></label>
        </div>

        <div class="oc-form__group right-text">
            <a href="https://openclassrooms.com/set-new-password">Mot de passe oublié</a>
        </div>

        <div class="oc-form__group  center-text">
            <input type="hidden" id="_target_path" name="_target_path" value="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/formulaires-l-envoi-de-fichiers" /><div>
    <button type="submit" id="login" name="login" class="orange-alt-btn oc-btn"> Se connecter</button></div><input type="hidden" id="_csrf_token" name="_csrf_token" value="WFIVlYEKEcL5v9hnQC1z3quXwgYs14KEFOLh1GUmi_I" />
        </div>

        </form>
    </li>
</ul>
<p class="text-center space-top">
    Pas encore membre ? <a href="https://openclassrooms.com/register">Inscrivez-vous gratuitement</a> en 30s.
</p>
        </div>
                    </div>
            </div>

            
                        
                    </div>
    </div>
</aside>
                    
                    <div class="mainHeader__container  mainHeader__container--langSelector">
                        <div class="js-popOut-header  popOut popOut--small  popOut--rightAlign" data-keep-it-mobile="true">
    <span class="js-popOut-button  popOut__button">
                    <a href="javascript:;" class="languageSelector__selected">Français</a>
            </span>
    <ul class="popOutList  popOut__content  popOutList--small">
                    <li class="popOutList__item">
                <a class="popOutList__link" href="https://openclassrooms.com/change-locale/en/wsADDEtTJgeOfRBlmygmpV2y0eneCLAuyYJYnverVSQ">English</a>
            </li>
                    <li class="popOutList__item">
                <a class="popOutList__link" href="https://openclassrooms.com/change-locale/es/wsADDEtTJgeOfRBlmygmpV2y0eneCLAuyYJYnverVSQ">Español</a>
            </li>
            </ul>
</div>

                    </div>
                </div>
            </div>

        </div>
    </div>
</header>

        
        <div id="mainSearch" class="centered search-content">
        </div>

        <div id="mainContentWithHeader">
            <div id="pre-main-part">
                
                                        <section class="inset no-padding">
        <div class="centered">

            <h6 class="accessibility-hidden">Fil d&#039;Ariane</h6>

            <nav class="breadcrumb">
                <ul class="breadcrumbtrail">
                                                                        <li class="home" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                                                                            <a href="https://openclassrooms.com/" itemprop="url">
                                <span itemprop="title">Accueil</span>
                            </a>
                                                                            <div class="arrow-right"></div>
                                                </li>
                                                                        <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                                                                            <a href="https://openclassrooms.com/courses" itemprop="url">
                                <span itemprop="title">Cours</span>
                            </a>
                                                                            <div class="arrow-right"></div>
                                                </li>
                                                                        <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                                                                            <a href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee?status=published" itemprop="url">
                                <span itemprop="title">Créez votre application web avec Java EE</span>
                            </a>
                                                                            <div class="arrow-right"></div>
                                                </li>
                                                                        <li class="current" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                                                                            Formulaires : l&#039;envoi de fichiers
                                                                        </li>
                                    </ul>
            </nav>
        </div>
    </section>

                
                            </div>

            <div class="claire clearfix" >
                    <article itemscope itemtype="http://schema.org/Article">

                        
<header class="course-header" xmlns="http://www.w3.org/1999/html">
    <div class="centered"><div class="course-header__topPart"><div class="course-header__info"><a itemprop="url" href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee"><h1 data-course-title="Créez votre application web avec Java EE">Créez votre application web avec Java EE</h1></a><span class="course-header__updatedTime visible-l">Mis à jour le lundi 13 juillet 2015</span></div></div></div><div class="course-header__details-container"><div class="centered"><div class="row"><div class="col12"><div class="course-header__details  iconBar"><div class="course-header__detailsGroup  course-header__detailsGroup--formats iconBar__group"><ul data-option_popinselector="#popin-formats-availables" class="course-types iconBar__list js-course-formats-bar"><li class="iconBar__item  course-types__item  js-tooltip" title="Ce cours est visible gratuitement en ligne."><a href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee"><i class="icon-desktop  course-types__icon"></i><span class="course-header__format-current"></span></a></li><li class="iconBar__item  course-types__item iconBar__item--dimmed js-tooltip" title="Ce cours n&#039;est pas encore en vidéo."><span><i class="icon-video course-types__icon"></i></span></li><li class="iconBar__item  course-types__item  js-tooltip" title="Ce cours existe en livre papier."><a href="http://www.eyrolles.com/Informatique/Livre/creez-des-applications-web-avec-java-ee-9791090085244?societe=openclassrooms" target="_blank"><i class="icon-book  course-types__icon"></i></a></li><li class="iconBar__item  course-types__item  js-tooltip" title="Ce cours existe en eBook."><a href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee"><i class="icon-ebook  course-types__icon"></i></a></li><li class="iconBar__item  course-types__item iconBar__item--dimmed js-tooltip"
                                                                                            title="Vous ne pouvez pas encore obtenir de certificat de réussite à l&#039;issue de ce cours."
                                                                                ><a
                                                                                        ><i class="icon-badge  course-types__icon"></i></a></li><li class="iconBar__item  course-types__item iconBar__item--dimmed js-tooltip" title="Ce cours n&#039;est pas encore diplômant et ne vous permet pas d&#039;obtenir des crédits universitaires européens (ECTS)."><span><i class="icon-hat  course-types__icon"></i></span></li><li class="iconBar__item  course-types__item  js-tooltip" title="Vous pouvez être accompagné sur ce cours par un mentor dédié en visioconférence."><a  href="https://openclassrooms.com/premium#discover-premium-plus-offer" ><i class="icon-mentor  course-types__icon"></i></a></li></ul></div><div class="course-header__detailsGroup  course-header__detailsGroup--info  iconBar__group"><ul class="iconBar__list"><li class="iconBar__item"><i class="icon-duration iconBar__icon js-tooltip" title="Ce cours demande en moyenne 40 heures de travail pour être réussi."></i><span class="iconBar__label">40 heures</span></li><li class="iconBar__item"><i class="icon-level iconBar__icon"></i><span class="iconBar__label">
                                                                                                    Moyenne
                                                                                            </span></li></ul></div><div class="course-header__detailsGroup course-header__detailsGroup--licences iconBar__group"><a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.0"><span class="iconBar__label">Licence</span><ul class="iconBar__list"><li class="iconBar__item"><i class="icon-cc iconBar__icon" title="CC"></i></li><li class="iconBar__item"><i class="icon-ccby iconBar__icon" title="BY"></i></li><li class="iconBar__item"><i class="icon-ccnc iconBar__icon" title="NC"></i></li><li class="iconBar__item"><i class="icon-ccsa iconBar__icon" title="SA"></i></li></ul></a></div></div></div></div></div></div>
    <div id="popin-formats-availables" class="popin popin--course-formats-availables">
        <i class="popin__close-button icon-close js-close-button"></i>

        <div class="course-types course-types--withSpace">
                            <a class="course-types__item" href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee">
                    <i class="icon-desktop course-types__icon"></i>
                </a>
            
            
                            <a class="course-types__item" href="http://www.eyrolles.com/Informatique/Livre/creez-des-applications-web-avec-java-ee-9791090085244?societe=openclassrooms">
                    <i class="icon-book course-types__icon"></i>
                </a>
            
                            <a class="course-types__item" href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee">
                    <i class="icon-ebook course-types__icon"></i>
                </a>
            
            
                                        <a class="course-types__item" href="https://openclassrooms.com/premium#discover-premium-plus-offer">
                    <i class="icon-mentor course-types__icon"></i>
                </a>
                    </div>

                    <p>Ce cours est visible <a href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee">gratuitement en ligne</a>.</p>
        
        
                    <p>
                Ce cours existe en livre papier.
            </p>
        
                    <p>Ce cours existe <a href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee">en eBook</a>.</p>
        
        
        
                    <p>
                Vous pouvez être <a href="https://openclassrooms.com/premium#discover-premium-plus-offer">accompagné et mentoré par un professeur particulier</a> par visioconférence sur ce cours.
            </p>
        
        <a class="oc-btn orange-alt-btn js-close-button" href="#">J&#039;ai tout compris !</a>
    </div>

    
</header>

    <div class="centered">
                            
        
            <div class="row">
        <div class="col12 col11-s">
                            <nav class="timeline">
        <div class="timeline__inner">

        <span class="timeline__iconContainer">
            <a href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee" title="Retour sur le sommaire du cours" class="roundIcon timeline__roundIcon">
                <i class="icon-home roundIcon__icon"></i>
            </a>
        </span>
            <div class="timeline__steps">
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="introduction-au-java-ee.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Introduction au Java EE
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-java-ee-mis-a-nu.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le Java EE mis à nu !
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="outils-et-environnement-de-developpement.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Outils et environnement de développement
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="la-servlet.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La servlet
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="servlet-avec-vue.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Servlet avec vue…
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="transmission-de-donnees.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Transmission de données
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-javabean.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le JavaBean
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-technologie-jsp-1-2.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La technologie JSP (1/2)
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-technologie-jsp-2-2.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La technologie JSP (2/2)
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="des-problemes-de-vue.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Des problèmes de vue ?
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-1.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 1
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="objectifs-et-configuration.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Objectifs et configuration
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-bibliotheque-core.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La bibliothèque Core
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="jstl-core-exercice-d-application.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    JSTL core : exercice d&#039;application
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-bibliotheque-xml.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La bibliothèque xml
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="jstl-xml-exercice-d-application.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    JSTL xml : exercice d&#039;application
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="faisons-le-point-2.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Faisons le point !
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-2.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 2
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="formulaires-le-b-a-ba.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Formulaires : le b.a.-ba
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="formulaires-a-la-mode-mvc.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Formulaires : à la mode MVC
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-3.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 3
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-session-connectez-vos-clients.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La session : connectez vos clients
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-filtre-creez-un-espace-membre.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le filtre : créez un espace membre
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-cookie-le-navigateur-vous-ouvre-ses-portes.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le cookie : le navigateur vous ouvre ses portes
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-4.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 4
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="formulaires-l-envoi-de-fichiers.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Formulaires : l&#039;envoi de fichiers
                                </span>

                                                                    <span class="timeline__progressMarker"></span>
                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-telechargement-de-fichiers.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le téléchargement de fichiers
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-5.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 5
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="introduction-a-mysql-et-jdbc.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Introduction à MySQL et JDBC
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="communiquez-avec-votre-bdd.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Communiquez avec votre BDD
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-modele-dao.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le modèle DAO
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-6.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 6
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="gerer-un-pool-de-connexions-avec-bonecp.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Gérer un pool de connexions avec BoneCP
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="les-annotations.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Les annotations
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-persistance-des-donnees-avec-jpa.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La persistance des données avec JPA
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-7.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 7
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="introduction-aux-frameworks-mvc.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Introduction aux frameworks MVC
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="premiers-pas-avec-jsf.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Premiers pas avec JSF
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-gestion-d-un-formulaire-avec-jsf.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La gestion d&#039;un formulaire avec JSF
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="l-envoi-de-fichiers-avec-jsf.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    L&#039;envoi de fichiers avec JSF
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="debugger-un-projet.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Débugger un projet
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="empaquetage-et-deploiement-d-un-projet.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Empaquetage et déploiement d&#039;un projet
                                </span>

                                                            </a>
                                            
                
                <span class="timeline__splitChapter"></span>

            </div>

        <span class="timeline__iconContainer">
                            <span title="Ce cours n&#039;est pas encore certifiant." class="roundIcon roundIcon--disabled">
                    <i class="icon-trophy roundIcon__icon"></i>
                </span>
                    </span>

        </div>
    </nav>
        </div>
    </div>
    </div>

        
        <div class="centered">
            <div class="contentWithSidebar  spacer  js-contentWithSidebar" >
                <main class="contentWithSidebar__content" >
                        

        <div class="relative js-sidebar-container">
        <div class="static">
    <h2 itemprop="name" data-part-title="Formulaires : l&#039;envoi de fichiers" class="part-title">Formulaires : l&#039;envoi de fichiers</h2>

    <section class="row space-bottom js-desktop-sticky-container">
        <div class="col9 col11-s col__small-padding--right">

                <div class="tooltipMessage tooltipMessage--noArrow">
        <i class="tooltipMessage__icon  icon-lock"></i>
        <a href="https://openclassrooms.com/login" class="js-popin-activator" data-popin-selector="#popin-log-in" >Connectez-vous</a> ou <a href="https://openclassrooms.com/register" class="js-popin-activator" data-popin-selector="#popin-sign-in" >inscrivez-vous</a> pour bénéficier de toutes les fonctionnalités de ce cours !
    </div>

            <div
                itemprop="articleBody"
                data-page-indentifier="/courses/creez-votre-application-web-avec-java-ee/formulaires-l-envoi-de-fichiers"
                class="js-isRestrictablePage course-content js-course-container js-smilize "

                                    data-video-blocked-wrapper="<a href='https://openclassrooms.com/login#popin-log-in' class='js-popin-activator'>"
                            >

                <p id="r-2135501" data-claire-element-id="2352524">Nous savons gérer toutes sortes de saisies simples - champs de type texte, case à cocher, liste déroulante, bouton radio, etc. - mais il nous reste encore à traiter le cas du champ de formulaire permettant l'envoi d'un fichier. C'est un gros chapitre qui vous attend : il y a beaucoup de choses à découvrir, prenez le temps de bien assimiler toutes les notions présentées !</p><h3 id="r-623232" data-claire-element-id="2837913">Création du formulaire</h3><p id="r-2135502" data-claire-element-id="2352525">Pour permettre au visiteur de naviguer et sélectionner un fichier pour envoi via un champ de formulaire, il faut utiliser la balise HTML <code>&lt;input type=&quot;file&quot;&gt;</code>. Pour rappel, et c'est d'ailleurs explicité dans la <a href="http://www.w3.org/TR/html4/interact/forms.html#submit-format">spécification HTML</a>, pour envoyer un fichier il faut utiliser la méthode POST lors de l'envoi des données du formulaire. En outre, nous y apprenons que l'attribut optionnel <strong>enctype</strong> doit être défini à <code>&quot;multipart/form-data&quot;</code>.</p><p id="r-2135503" data-claire-element-id="2352526">Sans plus tarder, créons sous le répertoire <strong>/WEB-INF</strong> une page <strong>upload.jsp</strong> qui affichera un tel formulaire à l'utilisateur :</p><pre id="r-2135504" data-claire-element-id="2837912"><code data-claire-semantic="jsp">&lt;%@ page pageEncoding=&quot;UTF-8&quot; %&gt;
&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
        &lt;title&gt;Envoi de fichier&lt;/title&gt;
        &lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;&lt;c:url value=&quot;/inc/form.css&quot;/&gt;&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form action=&quot;&lt;c:url value=&quot;/upload&quot; /&gt;&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
            &lt;fieldset&gt;
                &lt;legend&gt;Envoi de fichier&lt;/legend&gt;

                &lt;label for=&quot;description&quot;&gt;Description du fichier&lt;/label&gt;
                &lt;input type=&quot;text&quot; id=&quot;description&quot; name=&quot;description&quot; value=&quot;&quot; /&gt;
                &lt;br /&gt;

                &lt;label for=&quot;fichier&quot;&gt;Emplacement du fichier &lt;span class=&quot;requis&quot;&gt;*&lt;/span&gt;&lt;/label&gt;
                &lt;input type=&quot;file&quot; id=&quot;fichier&quot; name=&quot;fichier&quot; /&gt;
                &lt;br /&gt;
                
                &lt;input type=&quot;submit&quot; value=&quot;Envoyer&quot; class=&quot;sansLabel&quot; /&gt;
                &lt;br /&gt;                
            &lt;/fieldset&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-2135505" data-claire-element-id="2352528">Remarquez bien aux lignes 11 et 20 :</p><ul id="r-2135510" data-claire-element-id="2352533"><li id="r-2135507" data-claire-element-id="2352530"><p id="r-2135506" data-claire-element-id="2352529">l'utilisation de l'attribut optionnel <strong>enctype</strong>, dont nous n'avions pas besoin dans nos formulaires d'inscription et de connexion puisqu'ils contenaient uniquement des champs classiques ;</p></li><li id="r-2135509" data-claire-element-id="2352532"><p id="r-2135508" data-claire-element-id="2352531">la mise en place d'un champ <code>&lt;input type=&quot;file&quot;/&gt;</code> dédié à l'envoi de fichiers.</p></li></ul><p id="r-2135511" data-claire-element-id="2352534">C'est la seule page nécessaire : j'ai réutilisé la même feuille de style CSS que pour nos précédents formulaires.</p><h3 id="r-623362" data-claire-element-id="3312274">Récupération des données</h3><h4 id="r-2135521" data-claire-element-id="3312263">Mise en place</h4><p id="r-2135512" data-claire-element-id="2352536">Vous commencez à être habitués maintenant : l'étape suivante est la mise en place de la servlet associée à cette page.<br /> Il nous faut donc créer une servlet, que nous allons nommer <strong>Upload</strong> et qui est presque vide pour l'instant :</p><pre id="r-2135513" data-claire-element-id="2837914"><code data-claire-semantic="java">package com.sdzee.servlets;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class Upload extends HttpServlet {
	public static final String VUE = &quot;/WEB-INF/upload.jsp&quot;;

	public void doGet( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException{
		/* Affichage de la page d'envoi de fichiers */
		this.getServletContext().getRequestDispatcher( VUE ).forward( request, response );
	}
	
	public void doPost( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException{
		/* Méthode vide, pour l'instant... */
	}
}</code></pre><p id="r-2135514" data-claire-element-id="2352538">Puis l'associer à la requête HTTP émise par le formulaire, en la déclarant dans le <strong>web.xml</strong> de notre application :</p><pre id="r-2135515" data-claire-element-id="2837915"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app&gt;
	...

	&lt;servlet&gt;
		&lt;servlet-name&gt;Upload&lt;/servlet-name&gt;
		&lt;servlet-class&gt;com.sdzee.servlets.Upload&lt;/servlet-class&gt;
	&lt;/servlet&gt;

	...

	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;Upload&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/upload&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
&lt;/web-app&gt;</code></pre><p id="r-2135516" data-claire-element-id="2352540">Avec une telle configuration, nous pouvons accéder au formulaire en nous rendant depuis notre navigateur sur <a href="http://localhost:8080/pro/upload">http://localhost:8080/pro/upload</a> (voir la figure suivante).</p><figure id="r-2135519" data-claire-element-id="3312262"><img id="r-2135517" data-claire-element-id="2352541" src="../../../user.oc-static.com/files/374001_375000/374652.png" alt="Image utilisateur" /></figure><p id="r-2135520" data-claire-element-id="2352544">L'étape suivante consiste bien évidemment à compléter notre servlet pour traiter les données reçues !</p><h4 id="r-2135618" data-claire-element-id="3312273">Traitement des données</h4><p id="r-2135522" data-claire-element-id="2352546">Après avoir soumis un tel formulaire, les données envoyées sont dans un format binaire <code>&quot;multipart&quot;</code>, et sont disponibles dans le corps de la requête POST.</p><p id="r-2135523" data-claire-element-id="2352547">À ce sujet, une subtilité importante mérite d'être portée à votre attention : <strong>ce format de requête n'est pas supporté par les versions de Tomcat antérieures à 7.0.6</strong>. L'explication de ce comportement réside principalement dans :</p><ul id="r-2135528" data-claire-element-id="2352552"><li id="r-2135525" data-claire-element-id="2352549"><p id="r-2135524" data-claire-element-id="2352548">la version de l'API servlet utilisée : ce n'est qu'à partir de Java EE 6 que la version 3.0 du conteneur de servlets a été mise en place. L'API en version 2.x ne supporte pas de telles requêtes, elle ne sait gérer que le <strong>enctype</strong> par défaut ;</p></li><li id="r-2135527" data-claire-element-id="2352551"><p id="r-2135526" data-claire-element-id="2352550">un bug dans les premières éditions de Tomcat 7 : aucun problème en ce qui nous concerne, car les versions récentes ont corrigé ce problème.</p></li></ul><h5 id="r-2135543" data-claire-element-id="2837920">Avec l'API servlet 2.x</h5><p id="r-2135529" data-claire-element-id="2352553">Lorsque des données sont envoyées avec le type <strong>multipart</strong>, les méthodes telles que <code>request.getParameter()</code> retournent toutes <code>null</code>. Il est en théorie possible d'analyser le corps de la requête vous-mêmes en vous basant sur la méthode <code>getInputStream()</code> de l'objet <code>HttpServletRequest</code>, mais c'est un vrai travail d’orfèvre qui requiert une parfaite connaissance de la norme <a href="http://www.faqs.org/rfcs/rfc2388.html">RFC2388</a> !</p><aside id="r-2135531" data-claire-element-id="2352555" data-claire-semantic="information"><p id="r-2135530" data-claire-element-id="2352554">Nous n'allons pas étudier en détail la méthode à mettre en place avec cette ancienne version de l'API, mais je vais tout de même vous donner les éléments principaux pour que vous sachiez par où commencer, si jamais vous devez travailler un jour sur une application qui tourne sur une version de l'API antérieure à la 3.0.</p></aside><p id="r-2135532" data-claire-element-id="2352556">La coutume est plutôt d'utiliser <a href="http://commons.apache.org/fileupload">Apache Commons FileUpload</a> pour parser les données <strong>multipart</strong> du formulaire. Cette bibliothèque est une implémentation très robuste de la RFC2388 qui dispose d'excellents <a href="http://commons.apache.org/fileupload/using.html">guide utilisateur</a> et <a href="http://commons.apache.org/fileupload/faq.html">FAQ</a> (ressources en anglais, mais je vous recommande de parcourir les deux attentivement si vous travaillez avec cette version de l'API servlet). Pour l'utiliser, il est nécessaire de placer les fichiers <strong>commons-fileupload.jar</strong> et <strong>commons-io.jar</strong> dans le répertoire <strong>/WEB-INF/lib</strong> de votre application.</p><p id="r-2135533" data-claire-element-id="2352557">Je vous présente ici succinctement le principe général, mais je ne détaille volontairement pas la démarche et ne vous fais pas mettre en place d'exemple pratique : vous allez le découvrir un peu plus bas, nous allons utiliser dans notre projet la démarche spécifique à l'API servlet 3.0. Voici cependant un exemple montrant ce à quoi devrait ressembler la méthode <code>doPost()</code> de votre servlet d'upload si vous utilisez <strong>Apache Commons FileUpload</strong> :</p><pre id="r-2135534" data-claire-element-id="2837919"><code data-claire-semantic="java">...

import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.FileUploadException;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;

...

public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    try {
        List&lt;FileItem&gt; items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);
        for (FileItem item : items) {
            if (item.isFormField()) {
                /* Traiter les champs classiques ici (input type=&quot;text|radio|checkbox|etc&quot;, select, etc). */
                String nomChamp = item.getFieldName();
                String valeurChamp = item.getString();
                /* ... (traitement à faire) */
            } else {
                /* Traiter les champs de type fichier (input type=&quot;file&quot;). */
                String nomChamp = item.getFieldName();
                String nomFichier = FilenameUtils.getName(item.getName());
                InputStream contenuFichier = item.getInputStream();
                /* ... (traitement à faire) */
            }
        }
    } catch (FileUploadException e) {
        throw new ServletException(&quot;Échec de l'analyse de la requête multipart.&quot;, e);
    }

    // ...
}</code></pre><p id="r-2135535" data-claire-element-id="2352559">Je vous renvoie à la documentation de la bibliothèque si vous souhaitez en apprendre davantage sur son fonctionnement.</p><p id="r-2135536" data-claire-element-id="2352560">En guise d'ouverture pour cette solution, une alternative intéressante à ce système serait d'intégrer tout cela dans un <code>Filter</code> qui analyserait le contenu automatiquement et réinsérerait le tout dans la <code>Map</code> des paramètres de la requête, comme s'il s'agissait d'un champ de formulaire classique, rendant ainsi possible de manière transparente :</p><ul id="r-2135541" data-claire-element-id="2352565"><li id="r-2135538" data-claire-element-id="2352562"><p id="r-2135537" data-claire-element-id="2352561">l'utilisation d'un simple <code>request.getParameter()</code> comme lors de la récupération d'un paramètre quelconque ;</p></li><li id="r-2135540" data-claire-element-id="2352564"><p id="r-2135539" data-claire-element-id="2352563">l'obtention du fichier uploadé via <code>request.getAttribute()</code>.</p></li></ul><p id="r-2135542" data-claire-element-id="2352566">Vous pouvez trouver un tel exemple sur <a href="http://balusc.blogspot.com/2007/11/multipartfilter.html">cet excellent article</a>.</p><h5 id="r-2135617" data-claire-element-id="3312272">Avec l'API servlet 3.0</h5><p id="r-2135544" data-claire-element-id="2352568">En ce qui nous concerne, notre application se base sur l'API servlet 3.0, la solution précédente ne nous est donc pas nécessaire ! Dans cette dernière mouture, une nouvelle méthode <code><a href="http://java.sun.com/javaee/6/docs/api/javax/servlet/http/HttpServletRequest.html#getParts%28%29">getParts()</a></code> est mise à disposition dans l'objet <code>HttpServletRequest</code>, et permet de collecter très simplement les éléments de données de type <strong>multipart</strong> ! Auparavant, il était impossible de parvenir à cela simplement sans bibliothèque externe.</p><aside id="r-2135546" data-claire-element-id="2352570" data-claire-semantic="information"><p id="r-2135545" data-claire-element-id="2352569">Pour la petite histoire, afin de rendre cette fonctionnalité disponible, la plupart des conteneurs implémentant l'API servlet 3.0 utilisent en réalité le code de la bibliothèque <strong>Apache Commons FileUpload</strong> dans les coulisses ! C'est notamment le cas de Tomcat 7 (Apache) et de GlassFish 3 (Oracle).</p></aside><p id="r-2135547" data-claire-element-id="2352571">Pour commencer, nous devons compléter la déclaration de notre servlet dans le fichier <strong>web.xml</strong> avec une section <code>&lt;multipart-config&gt;</code> afin de faire en sorte que la méthode <code>getParts()</code> fonctionne :</p><pre id="r-2135548" data-claire-element-id="2837921"><code data-claire-semantic="xml">&lt;servlet&gt;
	&lt;servlet-name&gt;Upload&lt;/servlet-name&gt;
	&lt;servlet-class&gt;com.sdzee.servlets.Upload&lt;/servlet-class&gt;
	&lt;multipart-config&gt;
		&lt;location&gt;c:/fichiers&lt;/location&gt;
		&lt;max-file-size&gt;10485760&lt;/max-file-size&gt; &lt;!-- 10 Mo --&gt;
		&lt;max-request-size&gt;52428800&lt;/max-request-size&gt; &lt;!-- 5 x 10 Mo --&gt;
		&lt;file-size-threshold&gt;1048576&lt;/file-size-threshold&gt; &lt;!-- 1 Mo --&gt;
	&lt;/multipart-config&gt;
&lt;/servlet&gt;</code></pre><p id="r-2135549" data-claire-element-id="2352573">Vous remarquez que cette section s'ajoute au sein de la balise de déclaration <code>&lt;servlet&gt;</code> de notre servlet d'upload. Voici une rapide description des paramètres optionnels existants :</p><ul id="r-2135558" data-claire-element-id="2352582"><li id="r-2135551" data-claire-element-id="2352575"><p id="r-2135550" data-claire-element-id="2352574"><code>&lt;location&gt;</code> contient une <strong>URL absolue</strong> vers un répertoire du système. Un chemin relatif au contexte de l'application n'est pas supporté dans cette balise, il s'agit bien là d'un chemin absolu vers le système. Cette URL sera utilisée pour stocker temporairement un fichier lors du traitement des fragments d'une requête, lorsque la taille du fichier est plus grande que la taille spécifiée dans <code>&lt;file-size-threshold&gt;</code>. Si vous précisez ici un répertoire qui n'existe pas sur le disque, alors Tomcat enverra une <code>java.io.IOException</code> lorsque vous tenterez d'envoyer un fichier plus gros que cette limite ;</p></li><li id="r-2135553" data-claire-element-id="2352577"><p id="r-2135552" data-claire-element-id="2352576"><code>&lt;file-size-threshold&gt;</code> précise la taille en octets à partir de laquelle un fichier reçu sera temporairement stocké sur le disque ;</p></li><li id="r-2135555" data-claire-element-id="2352579"><p id="r-2135554" data-claire-element-id="2352578"><code>&lt;max-file-size&gt;</code> précise la taille maximum en octets autorisée pour <strong>un fichier</strong> envoyé. Si la taille d'un fichier envoyé dépasse cette limite, le conteneur enverra une exception. En l'occurrence, Tomcat lancera une <code>IllegalStateException</code> ;</p></li><li id="r-2135557" data-claire-element-id="2352581"><p id="r-2135556" data-claire-element-id="2352580"><code>&lt;max-request-size&gt;</code> précise la taille maximum en octets autorisée pour <strong>une requête multipart/form-data</strong>. Si la taille totale des données envoyées dans une seule requête dépasse cette limite, le conteneur enverra une exception.</p></li></ul><p id="r-2135559" data-claire-element-id="2352583">En paramétrant ainsi notre servlet, toutes les données <strong>multipart/form-data</strong> seront disponibles à travers la méthode <code><a href="http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getParts%28%29">request.getParts()</a></code>. Celle-ci retourne une collection d'éléments de type <code><a href="http://docs.oracle.com/javaee/6/api/javax/servlet/http/Part.html">Part</a></code>, et doit être utilisée en lieu et place de l'habituelle méthode <code>request.getParameter()</code> pour récupérer les contenus des champs de formulaire.</p><p id="r-2135560" data-claire-element-id="2352584">À l'utilisation, il s'avère que c'est bien plus pratique que d'utiliser directement du pur <strong>Apache Commons FileUpload</strong>, comme c'était nécessaire avec les versions antérieures de l'API Servlet ! Par contre, je me répète, mais je viens de vous annoncer que les contenus des champs du formulaire allaient maintenant être disponibles en tant que collection d'éléments de type <code>Part</code> et ça, ça va nous poser un petit problème... Car si vous étudiez attentivement l'interface <code><a href="http://docs.oracle.com/javaee/6/api/javax/servlet/http/Part.html">Part</a></code>, vous vous rendez compte qu'elle est plutôt limitée en termes d'abstraction : c'est simple, elle ne propose tout bonnement aucune méthode permettant de déterminer si une donnée reçue renferme un champ classique ou un champ de type fichier !</p><div id="r-2135562" data-claire-element-id="2352586" data-claire-semantic="question"><p id="r-2135561" data-claire-element-id="2352585">Dans ce cas, comment savoir si une requête contient des fichiers ?</p></div><p id="r-2135563" data-claire-element-id="2352587">Heureusement, il va être facile de nous en sortir par nous-mêmes. Afin de déterminer si les données transmises dans une requête HTTP contiennent d'éventuels fichiers ou non, il suffit d'analyser ses en-têtes. Regardez plutôt ces deux extraits d'en-tête HTTP (commentés) :</p><pre id="r-2135564" data-claire-element-id="2837922"><code data-claire-semantic="HTTP">// Pour un champ &lt;input type=&quot;text&quot;&gt; nommé 'description'
Content-Disposition: form-data; name=&quot;description&quot;

// Pour un champ &lt;input type=&quot;file&quot;&gt; nommé 'fichier'
Content-Disposition: form-data; name=&quot;fichier&quot;; filename=&quot;nom_du_fichier.ext&quot;</code></pre><p id="r-2135565" data-claire-element-id="2352589">Comme vous pouvez le constater, la seule différence est la présence d'un attribut nommé <strong>filename</strong>. Il suffit donc de s'assurer qu'un en-tête contient le mot-clé <strong>filename</strong> pour être certain que le fragment traité est un fichier.</p><div id="r-2135567" data-claire-element-id="2352591" data-claire-semantic="question"><p id="r-2135566" data-claire-element-id="2352590">Tout cela est magnifique, mais comment allons-nous récupérer le contenu des en-têtes relatifs à un fragment donné ?</p></div><p id="r-2135568" data-claire-element-id="2352592">Comme d'habitude, il n'y a pas de miracle : tout est dans la documentation ! :) Encore une fois, si vous étudiez attentivement l'interface <code><a href="http://docs.oracle.com/javaee/6/api/javax/servlet/http/Part.html">Part</a></code>, vous constatez qu'elle contient une méthode <code>part.getHeader()</code> qui renvoie l'en-tête correspondant à un élément. Exactement ce qu'il nous faut !</p><p id="r-2135569" data-claire-element-id="2352593">Ainsi, nous allons pouvoir examiner le contenu des en-têtes relatifs à un fragment et y vérifier la présence du mot-clé <strong>filename</strong>, afin de savoir si le champ traité est de type fichier ou non.</p><p id="r-2135570" data-claire-element-id="2352594">Lançons-nous, et implémentons un début de méthode <code>doPost()</code> dans notre servlet d'upload :</p><pre id="r-2135571" data-claire-element-id="2837923"><code data-claire-semantic="java">...

public static final String CHAMP_DESCRIPTION = &quot;description&quot;;
public static final String CHAMP_FICHIER     = &quot;fichier&quot;;

...

public void doPost( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException{
    /* Récupération du contenu du champ de description */
    String description = request.getParameter( CHAMP_DESCRIPTION );
    request.setAttribute( CHAMP_DESCRIPTION, description );

    /*
     * Les données reçues sont multipart, on doit donc utiliser la méthode
     * getPart() pour traiter le champ d'envoi de fichiers.
     */
    Part part = request.getPart( CHAMP_FICHIER );
        
    /*
     * Il faut déterminer s'il s'agit d'un champ classique 
     * ou d'un champ de type fichier : on délègue cette opération 
     * à la méthode utilitaire getNomFichier().
     */
    String nomFichier = getNomFichier( part );

    /*
     * Si la méthode a renvoyé quelque chose, il s'agit donc d'un champ
     * de type fichier (input type=&quot;file&quot;).
     */
    if ( nomFichier != null &amp;&amp; !nomFichier.isEmpty() ) {
        String nomChamp = part.getName();
        request.setAttribute( nomChamp, nomFichier );
    }
	   
    this.getServletContext().getRequestDispatcher( VUE ).forward( request, response );
}
	
/* 
 * Méthode utilitaire qui a pour unique but d'analyser l'en-tête &quot;content-disposition&quot;,
 * et de vérifier si le paramètre &quot;filename&quot;  y est présent. Si oui, alors le champ traité
 * est de type File et la méthode retourne son nom, sinon il s'agit d'un champ de formulaire 
 * classique et la méthode retourne null. 
 */
private static String getNomFichier( Part part ) {
    /* Boucle sur chacun des paramètres de l'en-tête &quot;content-disposition&quot;. */
    for ( String contentDisposition : part.getHeader( &quot;content-disposition&quot; ).split( &quot;;&quot; ) ) {
    	/* Recherche de l'éventuelle présence du paramètre &quot;filename&quot;. */
        if ( contentDisposition.trim().startsWith(&quot;filename&quot;) ) {
            /* Si &quot;filename&quot; est présent, alors renvoi de sa valeur, c'est-à-dire du nom de fichier. */
            return contentDisposition.substring( contentDisposition.indexOf( '=' ) + 1 );
        }
    }
    /* Et pour terminer, si rien n'a été trouvé... */
    return null;
}</code></pre><p id="r-2135572" data-claire-element-id="2352596">Cette ébauche est assez commentée pour que vous puissiez comprendre son fonctionnement sans problème. À la ligne 16 nous accédons au fragment correspondant au champ <strong>fichier</strong> du formulaire, puis nous analysons son en-tête pour déterminer s'il s'agit d'un champ de type fichier ou non.</p><p id="r-2135573" data-claire-element-id="2352597">Je vous donne pour finir des précisions au sujet de la méthode utilitaire <code>getNomFichier()</code>. Je vous l'ai annoncé un peu plus tôt, l'en-tête HTTP lu est de la forme :</p><pre id="r-2135574" data-claire-element-id="2837924"><code data-claire-semantic="HTTP">Content-Disposition: form-data; filename=&quot;nomdufichier.ext&quot;</code></pre><p id="r-2135575" data-claire-element-id="2352599">Afin de sélectionner uniquement la valeur du paramètre <strong>filename</strong>, je réalise dans la méthode utilitaire :</p><ul id="r-2135584" data-claire-element-id="2352608"><li id="r-2135577" data-claire-element-id="2352601"><p id="r-2135576" data-claire-element-id="2352600">un <code>part.getHeader( &quot;content-disposition&quot; )</code>, afin de ne traiter que la ligne de l'en-tête concernant le <strong>content-disposition</strong>. Par ailleurs, vous pouvez remarquer que la méthode ne prête aucune attention à la casse dans l'argument que vous lui passez, c'est-à-dire aux éventuelles majuscules qu'il contient : que vous écriviez &quot;content-disposition&quot;, &quot;Content-disposition&quot; ou encore &quot;Content-Disposition&quot;, c'est toujours le même en-tête HTTP qui sera ciblé ;</p></li><li id="r-2135579" data-claire-element-id="2352603"><p id="r-2135578" data-claire-element-id="2352602">un <code>split( &quot;;&quot; )</code>, afin de distinguer les différents éléments constituant la ligne, séparés comme vous pouvez le constater dans l'exemple d'en-tête ci-dessus par un &quot;;&quot; ;</p></li><li id="r-2135581" data-claire-element-id="2352605"><p id="r-2135580" data-claire-element-id="2352604">un <code>startsWith( &quot;filename&quot; )</code>, afin de ne sélectionner que la chaîne commençant par <strong>filename</strong> ;</p></li><li id="r-2135583" data-claire-element-id="2352607"><p id="r-2135582" data-claire-element-id="2352606">un <code>substring()</code>, afin de ne finalement sélectionner que la valeur associée au paramètre <strong>filename</strong>, contenue après le caractère &quot;=&quot; .</p></li></ul><p id="r-2135585" data-claire-element-id="2352609">Avec tous ces détails, vous devriez comprendre parfaitement comment tout cela s'organise.</p><p id="r-2135586" data-claire-element-id="2352610">Modifions alors notre JSP afin d'afficher les valeurs lues et stockées dans les attributs de requêtes <strong>description</strong> et <strong>fichier</strong>, que j'ai mis en place dans notre servlet :</p><pre id="r-2135587" data-claire-element-id="2837925"><code data-claire-semantic="jsp">&lt;%@ page pageEncoding=&quot;UTF-8&quot; %&gt;
&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
        &lt;title&gt;Envoi de fichier&lt;/title&gt;
        &lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;form.css&quot;&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form action=&quot;upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
            &lt;fieldset&gt;
                &lt;legend&gt;Envoi de fichier&lt;/legend&gt;

                &lt;label for=&quot;description&quot;&gt;Description du fichier&lt;/label&gt;
                &lt;input type=&quot;text&quot; id=&quot;description&quot; name=&quot;description&quot; value=&quot;&quot; /&gt;
                &lt;span class=&quot;succes&quot;&gt;&lt;c:out value=&quot;${description}&quot; /&gt;&lt;/span&gt;
                &lt;br /&gt;
                

                &lt;label for=&quot;fichier&quot;&gt;Emplacement du fichier &lt;span class=&quot;requis&quot;&gt;*&lt;/span&gt;&lt;/label&gt;
                &lt;input type=&quot;file&quot; id=&quot;fichier&quot; name=&quot;fichier&quot; /&gt;
                &lt;span class=&quot;succes&quot;&gt;&lt;c:out value=&quot;${fichier}&quot; /&gt;&lt;/span&gt;
                &lt;br /&gt;
                
                &lt;input type=&quot;submit&quot; value=&quot;Envoyer&quot; class=&quot;sansLabel&quot; /&gt;
                &lt;br /&gt;                 
            &lt;/fieldset&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-2135588" data-claire-element-id="2352612">Je ne fais ici que réafficher le contenu des champs, à savoir le texte de description et le titre du fichier sélectionné par l'utilisateur, aux lignes 17 et 23. Je n'ai volontairement pas ajouté d'étapes de validation sur ces deux champs, afin de ne pas surcharger le code de ce chapitre inutilement. Après tout, vous savez déjà comment procéder : il suffit de suivre exactement le même principe que lorsque nous avions mis en place des validations sur les champs de nos formulaires d'inscription et de connexion dans les chapitres précédents.</p><p id="r-2135589" data-claire-element-id="2352613">Nous pouvons dorénavant tester notre ébauche ! J'ai, pour ma part, précisé ces données dans mon formulaire, comme vous pouvez le constater à la figure suivante (à adapter à votre cas selon le fichier que vous allez choisir).</p><figure id="r-2135592" data-claire-element-id="3312265"><img id="r-2135590" data-claire-element-id="2352614" src="../../../user.oc-static.com/files/374001_375000/374831.png" alt="Exemple de données dans le formulaire" /><figcaption>Exemple de données dans le formulaire</figcaption></figure><p id="r-2135593" data-claire-element-id="2352617">Et j'ai obtenu ce résultat (voir la figure suivante).</p><figure id="r-2135596" data-claire-element-id="3312267"><img id="r-2135594" data-claire-element-id="2352618" src="../../../user.oc-static.com/files/374001_375000/374832.png" alt="Rendu après envoi" /><figcaption>Rendu après envoi</figcaption></figure><p id="r-2135597" data-claire-element-id="2352621">Pour ceux d'entre vous qui utilisent le navigateur Internet Explorer, vous allez obtenir un rendu sensiblement différent, comme vous pouvez le voir sur la figure suivante.</p><figure id="r-2135600" data-claire-element-id="3312269"><img id="r-2135598" data-claire-element-id="2352622" src="../../../user.oc-static.com/files/374001_375000/374834.png" alt="Rendu après envoi sous IE" /><figcaption>Rendu après envoi sous IE</figcaption></figure><p id="r-2135601" data-claire-element-id="2352625">Vous constatez que :</p><ul id="r-2135606" data-claire-element-id="2352630"><li id="r-2135603" data-claire-element-id="2352627"><p id="r-2135602" data-claire-element-id="2352626">le nom du fichier a correctement été extrait, mais est entouré de guillemets ;</p></li><li id="r-2135605" data-claire-element-id="2352629"><p id="r-2135604" data-claire-element-id="2352628">avec Internet Explorer, le nom du fichier contient en réalité le chemin complet du fichier sur la machine du client...</p></li></ul><aside id="r-2135608" data-claire-element-id="2352632" data-claire-semantic="information"><p id="r-2135607" data-claire-element-id="2352631">Nous obtenons ici un bel exemple nous prouvant que la tambouille interne réalisée dans certains navigateurs peut imposer certaines spécificités ! La morale de l'histoire, c'est qu'il est primordial de tester le fonctionnement d'une application web sous différents navigateurs afin d'éviter ce genre de problèmes d'une plate-forme à une autre...</p></aside><p id="r-2135609" data-claire-element-id="2352633">Afin de pallier les différents petits soucis que nous venons de rencontrer, nous devons apporter quelques modifications à notre servlet. <br /> Dans le bloc <code>if</code> traitant le champ <strong>fichier</strong>, pour corriger le bug IE :</p><pre id="r-2135610" data-claire-element-id="2837932"><code data-claire-semantic="java">/*
 * Si la méthode a renvoyé quelque chose, il s'agit donc d'un champ
 * de type fichier (input type=&quot;file&quot;).
 */
if ( nomFichier != null &amp;&amp; !nomFichier.isEmpty() ) {
    String nomChamp = part.getName();

    /*
     * Antibug pour Internet Explorer, qui transmet pour une raison
     * mystique le chemin du fichier local à la machine du client...
     * 
     * Ex : C:/dossier/sous-dossier/fichier.ext
     * 
     * On doit donc faire en sorte de ne sélectionner que le nom et
     * l'extension du fichier, et de se débarrasser du superflu.
     */
    nomFichier = nomFichier.substring( nomFichier.lastIndexOf( '/' ) + 1 )
            .substring( nomFichier.lastIndexOf( '\\' ) + 1 );

    request.setAttribute( nomChamp, nomFichier );
}</code></pre><p id="r-2135611" data-claire-element-id="2352635">Et dans la méthode utilitaire, à la ligne 17 pour retirer les guillemets superflus :</p><pre id="r-2135612" data-claire-element-id="2837933"><code data-claire-semantic="java">/*
 * Méthode utilitaire qui a pour unique but d'analyser l'en-tête
 * &quot;content-disposition&quot;, et de vérifier si le paramètre &quot;filename&quot; y est
 * présent. Si oui, alors le champ traité est de type File et la méthode
 * retourne son nom, sinon il s'agit d'un champ de formulaire classique et
 * la méthode retourne null.
 */
private static String getNomFichier( Part part ) {
    /* Boucle sur chacun des paramètres de l'en-tête &quot;content-disposition&quot;. */
    for ( String contentDisposition : part.getHeader( &quot;content-disposition&quot; ).split( &quot;;&quot; ) ) {
        /* Recherche de l'éventuelle présence du paramètre &quot;filename&quot;. */
        if ( contentDisposition.trim().startsWith( &quot;filename&quot; ) ) {
            /*
             * Si &quot;filename&quot; est présent, alors renvoi de sa valeur,
             * c'est-à-dire du nom de fichier sans guillemets.
             */
            return contentDisposition.substring( contentDisposition.indexOf( '=' ) + 1 ).trim().replace( &quot;\&quot;&quot;, &quot;&quot; );
        }
    }
    /* Et pour terminer, si rien n'a été trouvé... */
    return null;
}</code></pre><p id="r-2135613" data-claire-element-id="2352637">Je vous laisse analyser ces deux petites corrections par vous-mêmes, il s'agit uniquement de bricolages sur les <code>String</code> qui posaient problème ! <br /> Vous pouvez maintenant tester, et vérifier que vous obtenez le résultat indiqué à la figure suivante, peu importe le navigateur utilisé.</p><figure id="r-2135616" data-claire-element-id="3312271"><img id="r-2135614" data-claire-element-id="2352638" src="../../../user.oc-static.com/files/374001_375000/374845.png" alt="Image utilisateur" /></figure><h4 id="r-2135640" data-claire-element-id="2837939">La différence entre la théorie et la pratique</h4><p id="r-2135619" data-claire-element-id="2352643">Dans le code de notre servlet, j'ai utilisé la méthode <code>request.getParameter()</code> pour accéder au contenu du champ <strong>description</strong>, qui est un simple champ de type texte. « Logique ! » vous dites-vous, nous avons toujours fait comme ça auparavant et il n'y a pas de raison pour que cela change ! Eh bien détrompez-vous...</p><p id="r-2135620" data-claire-element-id="2352644">Comme je vous l'annonçais dans le court passage sur les moyens à mettre en place avec l'API servlet en version 2.x, avant la version 3.0 un appel à la méthode <code>request.getParameter()</code> renvoyait <code>null</code> dès lors que le type des données envoyées par un formulaire était <strong>multipart</strong>. Depuis la version 3.0, <a href="http://jcp.org/aboutJava/communityprocess/final/jsr315/index.html">les spécifications</a> ont changé et nous pouvons maintenant y trouver ce passage au sujet de l'envoi de fichiers :</p><p id="r-2135621" data-claire-element-id="2352645"><cite>Citation : Spécifications de l'API servlet 3.0</cite></p><blockquote id="r-2135623" data-claire-element-id="2352647"><p id="r-2135622" data-claire-element-id="2352646">For parts with form-data as the Content-Disposition, but without a filename, the string value of the part will also be available via the getParameter / getParameterValues methods on HttpServletRequest, using the name of the part.</p></blockquote><p id="r-2135624" data-claire-element-id="2352648">Pour les non-anglophones, ce passage explicite noir sur blanc que lors de la réception de données issues d'un formulaire, envoyées avec le type <strong>multipart</strong>, la méthode <code>request.getParameter()</code> doit pouvoir être utilisée pour récupérer le contenu des champs qui ne sont pas des fichiers.</p><div id="r-2135626" data-claire-element-id="2352650" data-claire-semantic="question"><p id="r-2135625" data-claire-element-id="2352649">Et alors, où est le problème ? C'est bien ce que nous avons fait ici, n'est-ce pas ?</p></div><p id="r-2135627" data-claire-element-id="2352651">Le problème est ici relativement sournois. En effet, ce que nous avons fait fonctionne, mais uniquement parce que nous utilisons le serveur d'applications Tomcat 7 ! Alors qu'habituellement, Tomcat souffre de carences en comparaison à ses confrères comme GlassFish ou JBoss, il se distingue cette fois en respectant à la lettre ce passage de la norme.</p><p id="r-2135628" data-claire-element-id="2352652">Par contre, le serveur considéré comme LA référence des serveurs d'applications Java EE - le serveur GlassFish 3 développé par Oracle - ne remplissait toujours pas cette fonctionnalité il y a quelques mois de ça ! En réalité, il se comportait toujours comme avec les anciennes versions de l'API, ainsi un appel à la méthode <code>request.getParameter()</code> retournait <code>null</code>... C'était plutôt étrange, dans la mesure où cette spécification de l'API servlet date tout de même de 2009 ! Heureusement, plus de deux ans après la première sortie de GlassFish en version 3, ce problème qui avait depuis été <a href="http://java.net/jira/browse/GLASSFISH-16740">reporté comme un bug</a>, a finalement été corrigé dans la dernière version 3.1.2 du serveur.</p><p id="r-2135629" data-claire-element-id="2352653">Bref, vous comprenez maintenant mieux le titre de ce paragraphe : en théorie, tout est censé fonctionner correctement, mais dans la pratique ce n'est pas encore le cas partout, et selon le serveur que vous utilisez il vous faudra parfois ruser pour parvenir à vos fins.</p><div id="r-2135631" data-claire-element-id="2352655" data-claire-semantic="question"><p id="r-2135630" data-claire-element-id="2352654">Du coup, comment faire sur un serveur qui ne respecte pas ce passage de la norme ?</p></div><p id="r-2135632" data-claire-element-id="2352656">Eh bien dans un tel cas, il va falloir que nous récupérions nous-mêmes le contenu binaire de l'élément <code>Part</code> correspondant au champ de type texte, et le reconstruire sous forme d'un <code>String</code>. Appétissant n'est-ce pas ? :D</p><aside id="r-2135634" data-claire-element-id="2352658" data-claire-semantic="warning"><p id="r-2135633" data-claire-element-id="2352657">Les explications qui suivent sont uniquement destinées à vous donner un moyen de récupérer les données contenues dans les champs classiques d'un formulaire de type <strong>multipart</strong> dans une application qui tournerait sur un serveur ne respectant pas le point des spécifications que nous venons d'étudier. Si vous n'êtes pas concernés, autrement dit si le serveur que vous utilisez ne présente pas ce bug, vous n'avez pas besoin de mettre en place ces modifications dans votre code, vous pouvez utiliser simplement <code>request.getParameter()</code> comme nous l'avons fait dans l'exemple jusqu'à présent.</p></aside><p id="r-2135635" data-claire-element-id="2352659">Ne vous inquiétez pas, nous avons déjà presque tout mis en place dans notre servlet, les modifications vont être minimes ! Dans notre code, nous disposons déjà d'une méthode utilitaire <code>getNomfichier()</code> qui nous permet de savoir si un élément <code>Part</code> concerne un champ de type fichier ou un champ classique. Le seul vrai travail va être de créer la méthode responsable de la reconstruction dont je viens de vous parler.</p><pre id="r-2135636" data-claire-element-id="2837938"><code data-claire-semantic="java">...

public void doPost( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException {
    ...

    Part part = request.getPart( CHAMP_FICHIER );
    /*
     * Il faut déterminer s'il s'agit d'un champ classique 
     * ou d'un champ de type fichier : on délègue cette opération 
     * à une méthode utilitaire getNomFichier().
     */
    String nomFichier = getNomFichier( part );
    if ( nomFichier == null ) {
        /* La méthode a renvoyé null, il s'agit donc d'un champ classique ici (input type=&quot;text|radio|checkbox|etc&quot;, select, etc). */
        String nomChamp = part.getName();
        /* Récupération du contenu du champ à l'aide de notre nouvelle méthode */
        String valeurChamp = getValeur( part );
        request.setAttribute( nomChamp, valeurChamp );
    } else if ( !nomFichier.isEmpty() ) {
        /* La méthode a renvoyé quelque chose, il s'agit donc d'un champ de type fichier (input type=&quot;file&quot;). */
        ...
    }
    ...
}

/*
 * Méthode utilitaire qui a pour unique but de lire l'InputStream contenu
 * dans l'objet part, et de le convertir en une banale chaîne de caractères.
 */
private String getValeur( Part part ) throws IOException {
    BufferedReader reader = new BufferedReader( new InputStreamReader( part.getInputStream(), &quot;UTF-8&quot; ) );
    StringBuilder valeur = new StringBuilder();
    char[] buffer = new char[1024];
    int longueur = 0;
    while ( ( longueur = reader.read( buffer ) ) &gt; 0 ) {
        valeur.append( buffer, 0, longueur );
    }
    return valeur.toString();
}</code></pre><p id="r-2135637" data-claire-element-id="2352661">La modification importante dans le code de la méthode <code>doPost()</code> est la décomposition de la vérification du retour de la méthode <code>getNomFichier()</code> en un <code>if / else if</code>. Si la méthode retourne <code>null</code>, alors nous savons que nous avons affaire à un champ classique, et nous devons alors récupérer son contenu avec la nouvelle méthode utilitaire <code>getValeur()</code> que nous venons de mettre en place.</p><p id="r-2135638" data-claire-element-id="2352662">En ce qui concerne la méthode utilitaire en elle-même, encore une fois c'est du bricolage de flux et de <code>String</code>, rien de bien passionnant... du pur Java comme on l'aime chez nous !</p><p id="r-2135639" data-claire-element-id="2352663">Cette nouvelle solution n'apporte aucune nouvelle fonctionnalité, mais offre l'avantage d'être multiplateforme, alors que le code de notre exemple précédent ne fonctionnait que sous certains serveurs. Au final, vous voyez que ce n'est pas si tordu, mais c'est quand même bien moins intuitif et agréable qu'en utilisant directement la méthode <code>request.getParameter()</code> : il est ici nécessaire de faire appel à la méthode <code>getValeur()</code> sur chaque champ de type texte dont les données sont envoyées à travers un formulaire de type <strong>multipart</strong>. Espérons que les quelques serveurs d’applications qui sont encore à la traîne comblent ce manque rapidement, afin que les développeurs comme vous et moi puissent se passer de cette tambouille peu ragoûtante. :o</p><h3 id="r-623396" data-claire-element-id="3312280">Enregistrement du fichier</h3><p id="r-2135641" data-claire-element-id="2352666">Maintenant que nous sommes capables de récupérer les données envoyées depuis notre formulaire, nous pouvons nous attaquer à la gestion du fichier en elle-même : la lecture du fichier envoyé et son écriture sur le disque !</p><h4 id="r-2135646" data-claire-element-id="2837942">Définition du chemin physique</h4><p id="r-2135642" data-claire-element-id="2352667">Commençons par définir un nom de répertoire physique dans lequel nous allons écrire nos fichiers sur le disque. Rappelez-vous : le chemin que nous avons précisé dans le champ <code>&lt;location&gt;</code> de la section <code>&lt;multipart-config&gt;</code> est uniquement utilisé par l'API servlet pour stocker les fichiers de manière temporaire. Ce chemin ne sera pas récupérable ailleurs, et donc pas réutilisable.</p><p id="r-2135643" data-claire-element-id="2352668">Il y a plusieurs solutions possibles ici : nous pouvons nous contenter d'écrire en dur le chemin dans une constante directement au sein de notre servlet, ou encore mettre en place un fichier <code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html">Properties</a></code> dans lequel nous préciserons le chemin. Dans notre exemple, nous allons utiliser un autre moyen : nous allons passer le chemin à notre servlet via un paramètre d’initialisation. Si vous vous souvenez d'un de nos tout premiers chapitres, celui où nous avons découvert la servlet, vous devez également vous souvenir des options de déclaration d'une servlet dans le fichier <strong>web.xml</strong>, notamment d'un bloc nommé <code>&lt;init-param&gt;</code>. C'est celui-ci que nous allons mettre en place dans la déclaration de notre servlet d'upload :</p><pre id="r-2135644" data-claire-element-id="2837941"><code data-claire-semantic="xml">&lt;servlet&gt;
	&lt;servlet-name&gt;Upload&lt;/servlet-name&gt;
	&lt;servlet-class&gt;com.sdzee.servlets.Upload&lt;/servlet-class&gt;
	&lt;init-param&gt;
		&lt;param-name&gt;chemin&lt;/param-name&gt; 
		&lt;param-value&gt;/fichiers/&lt;/param-value&gt; 
	&lt;/init-param&gt;
	&lt;multipart-config&gt;
		&lt;location&gt;c:/fichiers&lt;/location&gt;
		&lt;max-file-size&gt;10485760&lt;/max-file-size&gt; &lt;!-- 10 Mo --&gt;
		&lt;max-request-size&gt;52428800&lt;/max-request-size&gt; &lt;!-- 5 x 10 Mo --&gt;
		&lt;file-size-threshold&gt;1048576&lt;/file-size-threshold&gt; &lt;!-- 1 Mo --&gt;
	&lt;/multipart-config&gt;
&lt;/servlet&gt;</code></pre><p id="r-2135645" data-claire-element-id="2352670">En procédant ainsi, notre servlet va pouvoir accéder à un paramètre nommé <strong>chemin</strong>, disponible à travers la méthode <code><a href="http://docs.oracle.com/javaee/6/api/javax/servlet/ServletConfig.html#getInitParameter%28java.lang.String%29">getInitParameter()</a></code> de l'objet <code>ServletConfig</code> !</p><h4 id="r-2135662" data-claire-element-id="2837945">Écriture du fichier sur le disque</h4><p id="r-2135647" data-claire-element-id="2352672">Reprenons maintenant notre servlet pour y récupérer ce fameux <strong>chemin</strong>, et mettre en place proprement l'ouverture des flux dans une méthode dédiée à l'écriture du fichier :</p><pre id="r-2135648" data-claire-element-id="2837943"><code data-claire-semantic="java">...

public static final String CHEMIN        = &quot;chemin&quot;;
public static final int TAILLE_TAMPON = 10240; // 10 ko

...

public void doPost( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException {
    /*
     * Lecture du paramètre 'chemin' passé à la servlet via la déclaration
     * dans le web.xml
     */
    String chemin = this.getServletConfig().getInitParameter( CHEMIN );

    /* Récupération du contenu du champ de description */
    String description = request.getParameter( CHAMP_DESCRIPTION );
    request.setAttribute( CHAMP_DESCRIPTION, description );

    /*
     * Les données reçues sont multipart, on doit donc utiliser la méthode
     * getPart() pour traiter le champ d'envoi de fichiers.
     */
    Part part = request.getPart( CHAMP_FICHIER );
        
    /*
     * Il faut déterminer s'il s'agit d'un champ classique 
     * ou d'un champ de type fichier : on délègue cette opération 
     * à la méthode utilitaire getNomFichier().
     */
    String nomFichier = getNomFichier( part );

    /*
     * Si la méthode a renvoyé quelque chose, il s'agit donc d'un champ
     * de type fichier (input type=&quot;file&quot;).
     */
    if ( nomFichier != null &amp;&amp; !nomFichier.isEmpty() ) {
        String nomChamp = part.getName();
        /*
         * Antibug pour Internet Explorer, qui transmet pour une raison
         * mystique le chemin du fichier local à la machine du client...
         * 
         * Ex : C:/dossier/sous-dossier/fichier.ext
         * 
         * On doit donc faire en sorte de ne sélectionner que le nom et
         * l'extension du fichier, et de se débarrasser du superflu.
         */
         nomFichier = nomFichier.substring( nomFichier.lastIndexOf( '/' ) + 1 )
                .substring( nomFichier.lastIndexOf( '\\' ) + 1 );

        /* Écriture du fichier sur le disque */
        ecrireFichier( part, nomFichier, chemin );

        request.setAttribute( nomChamp, nomFichier );
    }

    this.getServletContext().getRequestDispatcher( VUE ).forward( request, response );
}

...

/*
 * Méthode utilitaire qui a pour but d'écrire le fichier passé en paramètre
 * sur le disque, dans le répertoire donné et avec le nom donné.
 */
private void ecrireFichier( Part part, String nomFichier, String chemin ) throws IOException {
    /* Prépare les flux. */
    BufferedInputStream entree = null;
    BufferedOutputStream sortie = null;
    try {
        /* Ouvre les flux. */
        entree = new BufferedInputStream( part.getInputStream(), TAILLE_TAMPON );
        sortie = new BufferedOutputStream( new FileOutputStream( new File( chemin + nomFichier ) ),
                TAILLE_TAMPON );
 
        /* ... */
    } finally {
        try {
            sortie.close();
        } catch ( IOException ignore ) {
        }
        try {
            entree.close();
        } catch ( IOException ignore ) {
        }
    }
}</code></pre><p id="r-2135649" data-claire-element-id="2352674">Ici, nous pourrions très bien utiliser directement les flux de type <code>InputStream</code> et <code>FileOutputStream</code>, mais les objets <code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/BufferedInputStream.html">BufferedInputStream</a></code> et <code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/BufferedOutputStream.html">BufferedOutputStream</a></code> permettent, via l'utilisation d'une mémoire tampon, une gestion plus souple de la mémoire disponible sur le serveur :</p><ul id="r-2135654" data-claire-element-id="2352679"><li id="r-2135651" data-claire-element-id="2352676"><p id="r-2135650" data-claire-element-id="2352675">dans le flux <strong>entree</strong>, il nous suffit de récupérer le flux directement depuis la méthode <code><a href="http://docs.oracle.com/javaee/6/api/javax/servlet/http/Part.html#getInputStream%28%29">getInputStream()</a></code> de l'objet <code>Part</code>. Nous décorons ensuite ce flux avec un <code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/BufferedInputStream.html">BufferedInputStream</a></code>, avec ici dans l'exemple un tampon de 10 ko ;</p></li><li id="r-2135653" data-claire-element-id="2352678"><p id="r-2135652" data-claire-element-id="2352677">dans le flux <strong>sortie</strong>, nous devons mettre en place un fichier sur le disque, en vue d'y écrire ensuite le contenu de l'entrée. Nous décorons ensuite ce flux avec un <code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/BufferedOutputStream.html">BufferedOutputStream</a></code>, avec ici dans l'exemple un tampon de 10 ko.</p></li></ul><aside id="r-2135656" data-claire-element-id="2352681" data-claire-semantic="information"><p id="r-2135655" data-claire-element-id="2352680">Si j'ai pris la peine de vous détailler l'ouverture des flux, c'est pour que vous remarquiez ici la bonne pratique mise en place, que je vous recommande de suivre dès lors que vous manipulez des flux : <strong>toujours ouvrir les flux dans un bloc <code>try</code>, et les fermer dans le bloc <code>finally</code> associé</strong>. Ainsi, nous nous assurons, quoi qu'il arrive, que la fermeture de nos flux sera bien effectuée !</p></aside><aside id="r-2135658" data-claire-element-id="2352683" data-claire-semantic="warning"><p id="r-2135657" data-claire-element-id="2352682">Note à propos du <strong>chemin</strong> utilisé : il représente le répertoire du disque local sur lequel les fichiers vont être écrits. Par exemple, si votre serveur tourne sur le disque <strong>C:\</strong> d'une machine sous Windows, alors le chemin <strong>/fichiers/</strong> fera référence au répertoire <strong>C:\fichiers\</strong>. Ainsi, contrairement au champ <code>&lt;location&gt;</code> abordé un peu plus tôt dans lequel vous deviez écrire un chemin complet, vous pouvez ici spécifier un chemin relatif au système. Même remarque toutefois, vous devez vous assurer que ce répertoire existe, sinon Tomcat enverra une <code>java.io.IOException</code> lors de la tentative d'écriture sur le disque.</p></aside><p id="r-2135659" data-claire-element-id="2352684">Ceci fait, il ne nous reste plus qu'à mettre en place le tampon et à écrire notre fichier sur le disque. Voici la méthode complétée :</p><pre id="r-2135660" data-claire-element-id="2837944"><code data-claire-semantic="java">/*
 * Méthode utilitaire qui a pour but d'écrire le fichier passé en paramètre
 * sur le disque, dans le répertoire donné et avec le nom donné.
 */
private void ecrireFichier( Part part, String nomFichier, String chemin ) throws IOException {
    /* Prépare les flux. */
    BufferedInputStream entree = null;
    BufferedOutputStream sortie = null;
    try {
        /* Ouvre les flux. */
        entree = new BufferedInputStream( part.getInputStream(), TAILLE_TAMPON );
        sortie = new BufferedOutputStream( new FileOutputStream( new File( chemin + nomFichier ) ),
                TAILLE_TAMPON );

        /*
         * Lit le fichier reçu et écrit son contenu dans un fichier sur le
         * disque.
         */
        byte[] tampon = new byte[TAILLE_TAMPON];
        int longueur;
        while ( ( longueur = entree.read( tampon ) ) &gt; 0 ) {
            sortie.write( tampon, 0, longueur );
        }
    } finally {
        try {
            sortie.close();
        } catch ( IOException ignore ) {
        }
        try {
            entree.close();
        } catch ( IOException ignore ) {
        }
    }
}</code></pre><p id="r-2135661" data-claire-element-id="2352686">À l'aide d'un tableau d'octets jouant le rôle de tampon, la boucle ici mise en place parcourt le contenu du fichier reçu et l'écrit morceau par morceau dans le fichier créé sur le disque. Si vous n'êtes pas familiers avec la manipulation de fichiers en Java, ou si vous avez oublié comment cela fonctionne, vous pouvez jeter un œil à <a href="http://www.siteduzero.com/tutoriel-3-65524-les-flux-d-entrees-sorties-1-2.html">ce chapitre du cours de Java</a>.</p><h4 id="r-2135673" data-claire-element-id="3312279">Test du formulaire d'upload</h4><p id="r-2135663" data-claire-element-id="2352688">Il ne nous reste maintenant plus qu'à vérifier que tout se déroule correctement.</p><p id="r-2135664" data-claire-element-id="2352689">Avec la configuration mise en place sur mon poste, fonctionnant sous Windows et Tomcat tournant sur le disque C:\, si je reprends les mêmes données que dans les exemples précédents, j'obtiens ce résultat (voir la figure suivante).</p><figure id="r-2135667" data-claire-element-id="3312276"><img id="r-2135665" data-claire-element-id="2352690" src="../../../user.oc-static.com/files/374001_375000/374831.png" alt="Image utilisateur" /></figure><p id="r-2135668" data-claire-element-id="2352693">Alors après validation, le répertoire <strong>C:\fichiers</strong> de mon disque contient bien une copie du fichier <strong>eclipse.ini</strong>, comme l'indique la figure suivante.</p><figure id="r-2135671" data-claire-element-id="3312278"><img id="r-2135669" data-claire-element-id="2352694" src="../../../user.oc-static.com/files/387001_388000/387279.png" alt="Image utilisateur" /></figure><p id="r-2135672" data-claire-element-id="2352697">Ça y est, vous êtes maintenant capables de récupérer des fichiers envoyés par vos utilisateurs ! :)</p><h3 id="r-623455" data-claire-element-id="2352758">Problèmes et limites</h3><p id="r-2135674" data-claire-element-id="2352700">Tout cela semble bien joli, mais nous allons un peu vite en besogne. En effet, plusieurs problématiques importantes se posent avec la solution mise en place :</p><ol id="r-2135681" data-claire-element-id="2352707"><li id="r-2135676" data-claire-element-id="2352702"><p id="r-2135675" data-claire-element-id="2352701">nous ne gérons pas les fichiers de mêmes noms ;</p></li><li id="r-2135678" data-claire-element-id="2352704"><p id="r-2135677" data-claire-element-id="2352703">nous ne savons pas éviter les doublons ;</p></li><li id="r-2135680" data-claire-element-id="2352706"><p id="r-2135679" data-claire-element-id="2352705">nous n'avons pas réfléchi à l'endroit choisi pour le stockage.</p></li></ol><h4 id="r-2135695" data-claire-element-id="2352721">Comment gérer les fichiers de mêmes noms ?</h4><p id="r-2135682" data-claire-element-id="2352708">Le plus simple, c'est de toujours renommer les fichiers reçus avant de les enregistrer sur le disque. Tout un tas de solutions, que vous pouvez combiner, s'offrent alors à vous :</p><ul id="r-2135693" data-claire-element-id="2352719"><li id="r-2135684" data-claire-element-id="2352710"><p id="r-2135683" data-claire-element-id="2352709">ajouter un suffixe à votre fichier si un fichier du même nom existe déjà sur le disque ;</p></li><li id="r-2135686" data-claire-element-id="2352712"><p id="r-2135685" data-claire-element-id="2352711">placer vos fichiers dans des répertoires différents selon leur type ou leur extension ;</p></li><li id="r-2135688" data-claire-element-id="2352714"><p id="r-2135687" data-claire-element-id="2352713">renommer, préfixer ou suffixer vos fichiers par un <a href="http://fr.wikipedia.org/wiki/Horodatage">timestamp</a> ;</p></li><li id="r-2135690" data-claire-element-id="2352716"><p id="r-2135689" data-claire-element-id="2352715">vous baser sur un hashCode du contenu binaire du fichier pour générer une arborescence et un nom unique ;</p></li><li id="r-2135692" data-claire-element-id="2352718"><p id="r-2135691" data-claire-element-id="2352717">etc.</p></li></ul><p id="r-2135694" data-claire-element-id="2352720">À vous de définir quelle(s) solution(s) convien(nen)t le mieux aux contraintes de votre projet.</p><h4 id="r-2135713" data-claire-element-id="2352739">Comment éviter les doublons ?</h4><p id="r-2135696" data-claire-element-id="2352722">Là, il s'agit plus d'une optimisation que d'un réel problème. Mais effectivement, si votre application est vouée à être massivement utilisée, vous pourriez éventuellement juger intéressant d'économiser un peu d'espace disque sur votre serveur en ne réenregistrant pas un fichier qui existe déjà sur le disque. Autrement dit, faire en sorte que si un utilisateur envoie un fichier qu'un autre utilisateur a déjà envoyé par le passé, votre application sache le reconnaître rapidement et agir en conséquence.</p><p id="r-2135697" data-claire-element-id="2352723">Comme vous devez vous en douter, c'est un travail un peu plus ardu que la simple gestion des fichiers de mêmes noms que nous venons d'aborder. Toutefois, une des solutions précédentes peut convenir : en vous basant sur un hashCode du contenu binaire du fichier pour générer une arborescence et un nom unique, vous pouvez ainsi à la fois vous affranchir du nom que l'utilisateur a donné à son fichier, et vous assurer qu'un contenu identique ne sera pas dupliqué à deux endroits différents sur votre disque.</p><p id="r-2135698" data-claire-element-id="2352724">Exemple :</p><ol id="r-2135711" data-claire-element-id="2352737"><li id="r-2135700" data-claire-element-id="2352726"><p id="r-2135699" data-claire-element-id="2352725">un utilisateur envoie un fichier nommé <strong>pastèque.jpg</strong> ;</p></li><li id="r-2135702" data-claire-element-id="2352728"><p id="r-2135701" data-claire-element-id="2352727">votre application le reçoit, et génère un hashCode basé sur son contenu, par exemple <strong>a8cb45e3d6f1dd5e</strong> ;</p></li><li id="r-2135704" data-claire-element-id="2352730"><p id="r-2135703" data-claire-element-id="2352729">elle stocke alors le fichier dans l'arborescence <strong>/a8cb/45e3/d6f1/dd5e.jpg</strong>, construite à partir du hashCode ;</p></li><li id="r-2135706" data-claire-element-id="2352732"><p id="r-2135705" data-claire-element-id="2352731">un autre utilisateur envoie plus tard un fichier nommé <strong>watermelon.jpg</strong>, dont le contenu est exactement identique au précédent fichier ;</p></li><li id="r-2135708" data-claire-element-id="2352734"><p id="r-2135707" data-claire-element-id="2352733">votre application le reçoit, et génère alors le même hashCode que précédemment, puisque le contenu est identique ;</p></li><li id="r-2135710" data-claire-element-id="2352736"><p id="r-2135709" data-claire-element-id="2352735">elle se rend alors compte que l'arborescence <strong>/a8cb/45e3/d6f1/dd5e.jpg</strong> existe déjà, et saute l'étape d'écriture sur le disque.</p></li></ol><p id="r-2135712" data-claire-element-id="2352738">Bien évidemment cela demande un peu de réflexion et d'ajustements. Il faudrait en effet générer un hashCode qui soit absolument unique : si deux contenus différents peuvent conduire au même hashCode, alors ce système ne fonctionne plus ! Mais c'est une piste sérieuse qui peut, si elle est bien développée, remplir la mission sans accrocs. ;)</p><h4 id="r-2135728" data-claire-element-id="2352754">Où stocker les fichiers reçus ?</h4><p id="r-2135714" data-claire-element-id="2352740">C'est en effet une bonne question, qui mérite qu'on s'y attarde un instant. A priori, deux possibilités s'offrent à nous :</p><ul id="r-2135719" data-claire-element-id="2352745"><li id="r-2135716" data-claire-element-id="2352742"><p id="r-2135715" data-claire-element-id="2352741">stocker les fichiers au sein de l'application web, dans un sous-répertoire du dossier <strong>WebContent</strong> d'Eclipse par exemple ;</p></li><li id="r-2135718" data-claire-element-id="2352744"><p id="r-2135717" data-claire-element-id="2352743">stocker les fichiers en dehors de l'application, dans un répertoire du disque local.</p></li></ul><p id="r-2135720" data-claire-element-id="2352746">Vous avez ici aveuglément suivi mes consignes, et ainsi implémenté la seconde option. En effet, dans l'exemple j'ai bien enregistré le fichier dans un répertoire placé à la racine de mon disque local. Mais vous devez vous rendre compte que cette solution peut poser un problème important : tous les fichiers placés en dehors de l'application, un peu à la manière des fichiers placés sous son répertoire <strong>/WEB-INF</strong>, sont invisibles au contexte web, c'est-à-dire qu'ils ne sont pas accessibles directement via une URL. Autrement dit, vous ne pourrez pas proposer aux utilisateurs de télécharger ces fichiers !</p><div id="r-2135722" data-claire-element-id="2352748" data-claire-semantic="question"><p id="r-2135721" data-claire-element-id="2352747">Dans ce cas, pourquoi ne pas avoir opté pour la première solution ? o_O</p></div><p id="r-2135723" data-claire-element-id="2352749">Eh bien tout simplement parce que si elle a l'avantage de pouvoir rendre disponibles les fichiers directement aux utilisateurs, puisque tout fichier placé sous la racine d'une application est accessible directement via une URL, elle présente un autre inconvénient : en stockant les fichiers directement dans le conteneur de votre application, vous les rendez vulnérables à un écrasement lors d'un prochain redémarrage serveur ou d'un prochain redéploiement de l'application.</p><p id="r-2135724" data-claire-element-id="2352750">Vous en apprendrez plus à ce sujet dans les annexes du cours, contentez-vous pour le moment de retenir la pratique qui découle de ces contraintes : il est déconseillé de stocker les fichiers uploadés par les utilisateurs dans le conteneur.</p><div id="r-2135726" data-claire-element-id="2352752" data-claire-semantic="question"><p id="r-2135725" data-claire-element-id="2352751">Mais alors, comment faire pour rendre nos fichiers externes disponibles au téléchargement ?</p></div><p id="r-2135727" data-claire-element-id="2352753">La réponse à cette question nécessite un peu de code et d'explications, et vous attend dans le chapitre suivant !</p><h4 id="r-2135731" data-claire-element-id="2352757">Rendre le tout entièrement automatique</h4><p id="r-2135729" data-claire-element-id="2352755">Dans le cas d'un petit formulaire comme celui de notre exemple, tout va bien. Nous sommes là pour apprendre, nous avons le temps de perdre notre temps ( :D ) à développer des méthodes utilitaires et à réfléchir à des solutions adaptées. Mais dans une vraie application, des formulaires qui contiennent des champs de type fichier, vous risquez d'en rencontrer plus d'un ! Et vous allez vite déchanter quand vous aurez à créer toutes les servlets responsables des traitements...</p><p id="r-2135730" data-claire-element-id="2352756">L'idéal, ça serait de pouvoir continuer à utiliser les méthodes <code>request.getParameter()</code> comme si de rien n'était ! Eh bien pour cela, pas de miracle, il faut mettre en place un filtre qui va se charger d'effectuer les vérifications et conversions nécessaires, et qui va rendre disponible le contenu des fichiers simplement. C'est un travail conséquent et plutôt difficile. Plutôt que de vous faire coder le tout à partir de zéro, je vais vous laisser admirer la superbe classe présentée dans <a href="http://balusc.blogspot.com/2009/12/uploading-files-in-servlet-30.html">cet excellent article</a>. C'est en anglais, mais le code est extrêmement clair et professionnel, essayez d'y jeter un œil et de le comprendre.</p><h3 id="r-623526" data-claire-element-id="3312288">Intégration dans MVC</h3><p id="r-2135732" data-claire-element-id="2352759">Nous avons déjà fourni beaucoup d'efforts, mais il nous reste encore une étape importante à franchir : nous devons encore intégrer ce que nous venons de mettre en place dans notre architecture MVC. Nous l'avons déjà fait avec le formulaire d’inscription et de connexion, vous devez commencer à être habitués ! Il va nous falloir :</p><ul id="r-2135743" data-claire-element-id="2352770"><li id="r-2135734" data-claire-element-id="2352761"><p id="r-2135733" data-claire-element-id="2352760">créer un bean représentant les données manipulées, en l'occurrence il s'agit d'un fichier et de sa description ;</p></li><li id="r-2135736" data-claire-element-id="2352763"><p id="r-2135735" data-claire-element-id="2352762">créer un objet métier qui regroupe les traitements jusqu'à présent réalisés dans la servlet ;</p></li><li id="r-2135738" data-claire-element-id="2352765"><p id="r-2135737" data-claire-element-id="2352764">en profiter pour y ajouter des méthodes de validation de la description et du fichier, et ainsi permettre une gestion fine des erreurs et exceptions ;</p></li><li id="r-2135740" data-claire-element-id="2352767"><p id="r-2135739" data-claire-element-id="2352766">reprendre la servlet pour l'adapter aux objets du modèle fraîchement créés ;</p></li><li id="r-2135742" data-claire-element-id="2352769"><p id="r-2135741" data-claire-element-id="2352768">modifier la page JSP pour qu'elle récupère les nouvelles informations qui lui seront transmises.</p></li></ul><p id="r-2135744" data-claire-element-id="2352771">Le plus gros du travail va se situer dans l'objet métier responsable des traitements et validations. C'est là que nous allons devoir réfléchir un petit peu, afin de trouver un moyen efficace pour gérer toutes les exceptions possibles lors de la réception de données issues de notre formulaire. Sans plus attendre, voici les codes commentés et expliqués...</p><h4 id="r-2135748" data-claire-element-id="2837953">Création du bean représentant un fichier</h4><p id="r-2135745" data-claire-element-id="2352772">Commençons par le plus simple. Un fichier étant représenté par son nom et sa description, nous avons uniquement besoin d'un bean que nous allons nommer <strong>Fichier</strong>, qui contiendra deux propriétés et que nous allons placer comme ses confrères dans le package <code>com.sdzee.beans</code> :</p><pre id="r-2135746" data-claire-element-id="2837952"><code data-claire-semantic="java">package com.sdzee.beans;

public class Fichier {

    private String description;
    private String nom;

    public String getDescription() {
        return description;
    }

    public void setDescription( String description ) {
        this.description = description;
    }

    public String getNom() {
        return nom;
    }

    public void setNom( String nom ) {
        this.nom = nom;
    }
}</code></pre><p id="r-2135747" data-claire-element-id="2352774">Jusque-là, ça va...</p><h4 id="r-2135767" data-claire-element-id="2837955">Création de l'objet métier en charge du traitement du formulaire</h4><p id="r-2135749" data-claire-element-id="2352776">Arrivés là, les choses se compliquent un peu pour nous :</p><ul id="r-2135754" data-claire-element-id="2352781"><li id="r-2135751" data-claire-element-id="2352778"><p id="r-2135750" data-claire-element-id="2352777">pour assurer la validation des champs, nous allons simplement vérifier que le champ <strong>description</strong> est renseigné et qu'il contient au moins 15 caractères, et nous allons vérifier que le champ <strong>fichier</strong> existe bien et contient bien des données ;</p></li><li id="r-2135753" data-claire-element-id="2352780"><p id="r-2135752" data-claire-element-id="2352779">pour assurer la gestion des erreurs, nous allons, comme pour nos systèmes d'inscription et de connexion, initialiser une <code>Map</code> d'erreurs et une chaîne contenant le résultat final du processus.</p></li></ul><p id="r-2135755" data-claire-element-id="2352782">La difficulté va ici trouver sa source dans la gestion des éventuelles erreurs qui peuvent survenir. À la différence de simples champs texte, la manipulation d'un fichier fait intervenir beaucoup de composants différents, chacun pouvant causer des exceptions bien particulières. Je vous donne le code pour commencer, celui de l'objet métier <strong>UploadForm</strong> placé dans le package <code>com.sdzee.forms</code>, et nous en reparlons ensuite. Ne paniquez pas s'il vous semble massif, plus de la moitié des lignes sont des commentaires destinés à vous en faciliter la compréhension ! ;)</p><pre id="r-2135756" data-claire-element-id="2837954"><code data-claire-semantic="java">package com.sdzee.forms;

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.HashMap;
import java.util.Map;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.Part;

import com.sdzee.beans.Fichier;

public final class UploadForm {
    private static final String CHAMP_DESCRIPTION = &quot;description&quot;;
    private static final String CHAMP_FICHIER     = &quot;fichier&quot;;
    private static final int    TAILLE_TAMPON     = 10240;                        // 10 ko

    private String              resultat;
    private Map&lt;String, String&gt; erreurs           = new HashMap&lt;String, String&gt;();

    public String getResultat() {
        return resultat;
    }

    public Map&lt;String, String&gt; getErreurs() {
        return erreurs;
    }

    public Fichier enregistrerFichier( HttpServletRequest request, String chemin ) {
        /* Initialisation du bean représentant un fichier */
        Fichier fichier = new Fichier();

        /* Récupération du champ de description du formulaire */
        String description = getValeurChamp( request, CHAMP_DESCRIPTION );

        /*
         * Récupération du contenu du champ fichier du formulaire. Il faut ici
         * utiliser la méthode getPart(), comme nous l'avions fait dans notre
         * servlet auparavant.
         */
        String nomFichier = null;
        InputStream contenuFichier = null;
        try {
            Part part = request.getPart( CHAMP_FICHIER );
            /*
             * Il faut déterminer s'il s'agit bien d'un champ de type fichier :
             * on délègue cette opération à la méthode utilitaire
             * getNomFichier().
             */
            nomFichier = getNomFichier( part );

            /*
             * Si la méthode a renvoyé quelque chose, il s'agit donc d'un
             * champ de type fichier (input type=&quot;file&quot;).
             */
            if ( nomFichier != null &amp;&amp; !nomFichier.isEmpty() ) {
                /*
                 * Antibug pour Internet Explorer, qui transmet pour une
                 * raison mystique le chemin du fichier local à la machine
                 * du client...
                 * 
                 * Ex : C:/dossier/sous-dossier/fichier.ext
                 * 
                 * On doit donc faire en sorte de ne sélectionner que le nom
                 * et l'extension du fichier, et de se débarrasser du
                 * superflu.
                 */
                nomFichier = nomFichier.substring( nomFichier.lastIndexOf( '/' ) + 1 )
                        .substring( nomFichier.lastIndexOf( '\\' ) + 1 );

                /* Récupération du contenu du fichier */
                contenuFichier = part.getInputStream();

            }
        } catch ( IllegalStateException e ) {
            /*
             * Exception retournée si la taille des données dépasse les limites
             * définies dans la section &lt;multipart-config&gt; de la déclaration de
             * notre servlet d'upload dans le fichier web.xml
             */
            e.printStackTrace();
            setErreur( CHAMP_FICHIER, &quot;Les données envoyées sont trop volumineuses.&quot; );
        } catch ( IOException e ) {
            /*
             * Exception retournée si une erreur au niveau des répertoires de
             * stockage survient (répertoire inexistant, droits d'accès
             * insuffisants, etc.)
             */
            e.printStackTrace();
            setErreur( CHAMP_FICHIER, &quot;Erreur de configuration du serveur.&quot; );
        } catch ( ServletException e ) {
            /*
             * Exception retournée si la requête n'est pas de type
             * multipart/form-data. Cela ne peut arriver que si l'utilisateur
             * essaie de contacter la servlet d'upload par un formulaire
             * différent de celui qu'on lui propose... pirate ! :|
             */
            e.printStackTrace();
            setErreur( CHAMP_FICHIER,
                    &quot;Ce type de requête n'est pas supporté, merci d'utiliser le formulaire prévu pour envoyer votre fichier.&quot; );
        }

        /* Si aucune erreur n'est survenue jusqu'à présent */
        if ( erreurs.isEmpty() ) {
            /* Validation du champ de description. */
            try {
                validationDescription( description );
            } catch ( Exception e ) {
                setErreur( CHAMP_DESCRIPTION, e.getMessage() );
            }
            fichier.setDescription( description );

            /* Validation du champ fichier. */
            try {
                validationFichier( nomFichier, contenuFichier );
            } catch ( Exception e ) {
                setErreur( CHAMP_FICHIER, e.getMessage() );
            }
            fichier.setNom( nomFichier );
        }

        /* Si aucune erreur n'est survenue jusqu'à présent */
        if ( erreurs.isEmpty() ) {
            /* Écriture du fichier sur le disque */
            try {
                ecrireFichier( contenuFichier, nomFichier, chemin );
            } catch ( Exception e ) {
                setErreur( CHAMP_FICHIER, &quot;Erreur lors de l'écriture du fichier sur le disque.&quot; );
            }
        }

        /* Initialisation du résultat global de la validation. */
        if ( erreurs.isEmpty() ) {
            resultat = &quot;Succès de l'envoi du fichier.&quot;;
        } else {
            resultat = &quot;Échec de l'envoi du fichier.&quot;;
        }

        return fichier;
    }

    /*
     * Valide la description saisie.
     */
    private void validationDescription( String description ) throws Exception {
        if ( description != null ) {
            if ( description.length() &lt; 15 ) {
                throw new Exception( &quot;La phrase de description du fichier doit contenir au moins 15 caractères.&quot; );
            }
        } else {
            throw new Exception( &quot;Merci d'entrer une phrase de description du fichier.&quot; );
        }
    }

    /*
     * Valide le fichier envoyé.
     */
    private void validationFichier( String nomFichier, InputStream contenuFichier ) throws Exception {
        if ( nomFichier == null || contenuFichier == null ) {
            throw new Exception( &quot;Merci de sélectionner un fichier à envoyer.&quot; );
        }
    }

    /*
     * Ajoute un message correspondant au champ spécifié à la map des erreurs.
     */
    private void setErreur( String champ, String message ) {
        erreurs.put( champ, message );
    }

    /*
     * Méthode utilitaire qui retourne null si un champ est vide, et son contenu
     * sinon.
     */
    private static String getValeurChamp( HttpServletRequest request, String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
        if ( valeur == null || valeur.trim().length() == 0 ) {
            return null;
        } else {
            return valeur;
        }
    }

    /*
     * Méthode utilitaire qui a pour unique but d'analyser l'en-tête
     * &quot;content-disposition&quot;, et de vérifier si le paramètre &quot;filename&quot; y est
     * présent. Si oui, alors le champ traité est de type File et la méthode
     * retourne son nom, sinon il s'agit d'un champ de formulaire classique et
     * la méthode retourne null.
     */
    private static String getNomFichier( Part part ) {
        /* Boucle sur chacun des paramètres de l'en-tête &quot;content-disposition&quot;. */
        for ( String contentDisposition : part.getHeader( &quot;content-disposition&quot; ).split( &quot;;&quot; ) ) {
            /* Recherche de l'éventuelle présence du paramètre &quot;filename&quot;. */
            if ( contentDisposition.trim().startsWith( &quot;filename&quot; ) ) {
                /*
                 * Si &quot;filename&quot; est présent, alors renvoi de sa valeur,
                 * c'est-à-dire du nom de fichier sans guillemets.
                 */
                return contentDisposition.substring( contentDisposition.indexOf( '=' ) + 1 ).trim().replace( &quot;\&quot;&quot;, &quot;&quot; );
            }
        }
        /* Et pour terminer, si rien n'a été trouvé... */
        return null;
    }

    /*
     * Méthode utilitaire qui a pour but d'écrire le fichier passé en paramètre
     * sur le disque, dans le répertoire donné et avec le nom donné.
     */
    private void ecrireFichier( InputStream contenu, String nomFichier, String chemin ) throws Exception {
        /* Prépare les flux. */
        BufferedInputStream entree = null;
        BufferedOutputStream sortie = null;
        try {
            /* Ouvre les flux. */
            entree = new BufferedInputStream( contenu, TAILLE_TAMPON );
            sortie = new BufferedOutputStream( new FileOutputStream( new File( chemin + nomFichier ) ),
                    TAILLE_TAMPON );

            /*
             * Lit le fichier reçu et écrit son contenu dans un fichier sur le
             * disque.
             */
            byte[] tampon = new byte[TAILLE_TAMPON];
            int longueur = 0;
            while ( ( longueur = entree.read( tampon ) ) &gt; 0 ) {
                sortie.write( tampon, 0, longueur );
            }
        } finally {
            try {
                sortie.close();
            } catch ( IOException ignore ) {
            }
            try {
                entree.close();
            } catch ( IOException ignore ) {
            }
        }
    }
}</code></pre><p id="r-2135757" data-claire-element-id="2352784">Sans surprise, dans ce code vous retrouvez bien :</p><ul id="r-2135764" data-claire-element-id="2352791"><li id="r-2135759" data-claire-element-id="2352786"><p id="r-2135758" data-claire-element-id="2352785">les méthodes utilitaires <code>ecrireFichier()</code> et <code>getNomFichier()</code>, que nous avions développées dans notre servlet ;</p></li><li id="r-2135761" data-claire-element-id="2352788"><p id="r-2135760" data-claire-element-id="2352787">l'analyse des éléments de type <code>Part</code> que nous avions mis en place là encore dans notre servlet, pour retrouver le champ contenant le fichier ;</p></li><li id="r-2135763" data-claire-element-id="2352790"><p id="r-2135762" data-claire-element-id="2352789">l'architecture que nous avions mise en place dans nos anciens objets métiers dans les systèmes d'inscription et de connexion. Notamment la <code>Map</code><strong>erreurs</strong>, la chaîne <strong>resultat</strong>, les méthodes <code>getValeurChamp()</code> et <code>setErreur()</code>, ainsi que la grosse méthode centrale ici nommée <code>enregistrerFichier()</code>, qui correspond à la méthode appelée depuis la servlet pour effectuer les traitements.</p></li></ul><p id="r-2135765" data-claire-element-id="2352792">Comme vous pouvez le constater, la seule différence notoire est le nombre de blocs <code>try / catch</code> qui interviennent, et le nombre de vérifications de la présence d'erreurs. À propos, je ne me suis pas amusé à vérifier trois fois de suite - aux lignes 109, 128 et 138 - si des erreurs avaient eu lieu au cours du processus ou non. C'est simplement afin d'éviter de continuer inutilement le processus de validation si des problèmes surviennent lors des traitements précédents, et également afin de pouvoir renvoyer un message d'erreur précis à l'utilisateur.</p><p id="r-2135766" data-claire-element-id="2352793">Enfin, vous remarquerez pour finir que j'ai modifié légèrement la méthode utilitaire <code>ecrireFichier()</code>, et que je lui passe désormais le contenu de type <code>InputStream</code> renvoyé par la méthode <code>part.getInputStream()</code>, et non plus directement l'élément <code>Part</code>. En procédant ainsi je peux m'assurer, en amont de la demande d'écriture sur le disque, si le contenu existe et est bien manipulable par notre méthode utilitaire.</p><h4 id="r-2135771" data-claire-element-id="2837957">Reprise de la servlet</h4><p id="r-2135768" data-claire-element-id="2352795">C'est ici un petit travail de simplification, nous devons nettoyer le code de notre servlet pour qu'elle remplisse uniquement un rôle d'aiguilleur :</p><pre id="r-2135769" data-claire-element-id="2837956"><code data-claire-semantic="java">package com.sdzee.servlets;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.sdzee.beans.Fichier;
import com.sdzee.forms.UploadForm;

public class Upload extends HttpServlet {
    public static final String CHEMIN      = &quot;chemin&quot;;

    public static final String ATT_FICHIER = &quot;fichier&quot;;
    public static final String ATT_FORM    = &quot;form&quot;;

    public static final String VUE         = &quot;/WEB-INF/upload.jsp&quot;;

    public void doGet( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException {
        /* Affichage de la page d'upload */
        this.getServletContext().getRequestDispatcher( VUE ).forward( request, response );
    }

    public void doPost( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException {
        /*
         * Lecture du paramètre 'chemin' passé à la servlet via la déclaration
         * dans le web.xml
         */
        String chemin = this.getServletConfig().getInitParameter( CHEMIN );

        /* Préparation de l'objet formulaire */
        UploadForm form = new UploadForm();

        /* Traitement de la requête et récupération du bean en résultant */
        Fichier fichier = form.enregistrerFichier( request, chemin );

        /* Stockage du formulaire et du bean dans l'objet request */
        request.setAttribute( ATT_FORM, form );
        request.setAttribute( ATT_FICHIER, fichier );

        this.getServletContext().getRequestDispatcher( VUE ).forward( request, response );
    }

}</code></pre><p id="r-2135770" data-claire-element-id="2352797">L'unique différence avec les anciennes servlets d'inscription et de connexion se situe dans l'appel à la méthode centrale de l'objet métier. Cette fois, nous devons lui passer un argument supplémentaire en plus de l'objet <strong>request</strong> : le <strong>chemin</strong> physique de stockage des fichiers sur le disque local, que nous récupérons - souvenez-vous - via le paramètre d’initialisation défini dans le bloc <code>&lt;init-param&gt;</code> de la déclaration de la servlet.</p><h4 id="r-2135774" data-claire-element-id="2837959">Adaptation de la page JSP aux nouvelles informations transmises</h4><p id="r-2135772" data-claire-element-id="2352799">Pour terminer, il faut modifier légèrement le formulaire pour qu'il affiche les erreurs que nous gérons dorénavant grâce à notre objet métier. Vous connaissez le principe, cela reprend là encore les mêmes concepts que ceux que nous avions mis en place dans nos systèmes d'inscription et de connexion :</p><pre id="r-2135773" data-claire-element-id="2837958"><code data-claire-semantic="jsp">&lt;%@ page pageEncoding=&quot;UTF-8&quot; %&gt;
&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
        &lt;title&gt;Envoi de fichier&lt;/title&gt;
        &lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;&lt;c:url value=&quot;/inc/form.css&quot;/&gt;&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form action=&quot;&lt;c:url value=&quot;/upload&quot; /&gt;&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
            &lt;fieldset&gt;
                &lt;legend&gt;Envoi de fichier&lt;/legend&gt;

                &lt;label for=&quot;description&quot;&gt;Description du fichier&lt;/label&gt;
                &lt;input type=&quot;text&quot; id=&quot;description&quot; name=&quot;description&quot; value=&quot;&lt;c:out value=&quot;${fichier.description}&quot;/&gt;&quot; /&gt;
                &lt;span class=&quot;erreur&quot;&gt;${form.erreurs['description']}&lt;/span&gt;
                &lt;br /&gt;
                

                &lt;label for=&quot;fichier&quot;&gt;Emplacement du fichier &lt;span class=&quot;requis&quot;&gt;*&lt;/span&gt;&lt;/label&gt;
                &lt;input type=&quot;file&quot; id=&quot;fichier&quot; name=&quot;fichier&quot; value=&quot;&lt;c:out value=&quot;${fichier.nom}&quot;/&gt;&quot; /&gt;
                &lt;span class=&quot;erreur&quot;&gt;${form.erreurs['fichier']}&lt;/span&gt;
                &lt;br /&gt;
                
                &lt;input type=&quot;submit&quot; value=&quot;Envoyer&quot; class=&quot;sansLabel&quot; /&gt;
                &lt;br /&gt;
                
                &lt;p class=&quot;${empty form.erreurs ? 'succes' : 'erreur'}&quot;&gt;${form.resultat}&lt;/p&gt;        
            &lt;/fieldset&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre><h4 id="r-2135801" data-claire-element-id="3312287">Comportement de la solution finale</h4><p id="r-2135775" data-claire-element-id="2352802">Vous pouvez maintenant tester votre formulaire sous toutes ses coutures : envoyez des champs vides ou mal renseignés, n'envoyez qu'un champ sur deux, envoyez un fichier trop gros, configurez votre servlet pour qu'elle enregistre les fichiers dans un dossier qui n'existe pas sur votre disque, etc.</p><p id="r-2135776" data-claire-element-id="2352803">Dans le désordre, voici aux figures suivantes un aperçu de quelques rendus que vous devriez obtenir dans différents cas d'échecs.</p><figure id="r-2135779" data-claire-element-id="3312282"><img id="r-2135777" data-claire-element-id="2352804" src="../../../user.oc-static.com/files/387001_388000/387658.png" alt="Envoi sans description ni fichier" /><figcaption>Envoi sans description ni fichier</figcaption></figure><figure id="r-2135782" data-claire-element-id="3312284"><img id="r-2135780" data-claire-element-id="2352807" src="../../../user.oc-static.com/files/387001_388000/387657.png" alt="Envoi d'un fichier trop lourd" /><figcaption>Envoi d'un fichier trop lourd</figcaption></figure><figure id="r-2135785" data-claire-element-id="3312286"><img id="r-2135783" data-claire-element-id="2352810" src="../../../user.oc-static.com/files/387001_388000/387656.png" alt="Envoi avec une description trop courte et pas de fichier" /><figcaption>Envoi avec une description trop courte et pas de fichier</figcaption></figure><aside id="r-2135787" data-claire-element-id="2352814" data-claire-semantic="information"><p id="r-2135786" data-claire-element-id="2352813">Ne prenez pas cette dernière étape à la légère : prenez le temps de bien analyser tout ce qui est géré par notre objet métier, et de bien tester le bon fonctionnement de la gestion du formulaire. Cela vous aidera à bien assimiler tout ce qui intervient dans l'application, ainsi que les relations entre ses différents composants.</p></aside><ul id="r-2135800" data-claire-element-id="2352827"><li id="r-2135789" data-claire-element-id="2352816"><p id="r-2135788" data-claire-element-id="2352815">Pour envoyer un fichier depuis un formulaire, il faut utiliser une requête de type <strong>multipart</strong> via <code>&lt;form ... enctype=&quot;multipart/form-data&quot;&gt;</code>.</p></li><li id="r-2135791" data-claire-element-id="2352818"><p id="r-2135790" data-claire-element-id="2352817">Pour récupérer les données d'une telle requête depuis le serveur, l'API Servlet 3.0 fournit la méthode <code>request.getParts()</code>.</p></li><li id="r-2135793" data-claire-element-id="2352820"><p id="r-2135792" data-claire-element-id="2352819">Pour rendre disponible cette méthode dans une servlet, il faut compléter sa déclaration dans le fichier web.xml avec une section <code>&lt;multipart-config&gt;</code>.</p></li><li id="r-2135795" data-claire-element-id="2352822"><p id="r-2135794" data-claire-element-id="2352821">Pour vérifier si une <strong>Part</strong> contient un fichier, il faut vérifier son type en analysant son en-tête <strong>Content-Disposition</strong>.</p></li><li id="r-2135797" data-claire-element-id="2352824"><p id="r-2135796" data-claire-element-id="2352823">Pour écrire le contenu d'un tel fichier sur le serveur, il suffit ensuite de récupérer le flux via la méthode <code>part.getInputStream()</code> et de le manipuler comme on manipulerait un fichier local.</p></li><li id="r-2135799" data-claire-element-id="2352826"><p id="r-2135798" data-claire-element-id="2352825">Lors de la sauvegarde de fichiers sur un serveur, il faut penser aux contraintes imposées par le web : noms de fichiers identiques, contenus de fichiers identiques, faux fichiers, etc.</p></li></ul>

                <div class="js-courseSelementActions sideActions">
    <ul class="sideActions__container">
        <li>
            <a class="sideActions__item  js-courseElementActions-copyUrl  js-tooltip"
               href="#" data-tooltip="Copier le lien"
               data-tooltip-done="Lien copié !">
            #
            </a>
        </li>
    </ul>
</div>
            </div>

            
            <nav class="course-pagination    clearfix">

            <a href="tp-fil-rouge-etape-4.html" class="oc-btn dark-btn course-pagination__btn course-pagination__btn--previous">
            <i class="icon-previous"></i>
            <span>TP Fil rouge - Étape 4</span>
        </a>
    
    <span class="course-pagination__separator"></span>

            <a href="le-telechargement-de-fichiers.html" class="oc-btn dark-btn course-pagination__btn course-pagination__btn--next">
            <span>Le téléchargement de fichiers</span>
            <i class="icon-next"></i>
        </a>
    
</nav>

            
<aside  tabindex="-1"
        role="dialog"
                    aria-labelledby="popin-view-restriction_popin_title"
                class="popin popin--illustrated  js-popin"
        id="popin-view-restriction"
>
    <i class="popin__close-button icon-close js-close-button"></i>

    <div class="popin__inner">
                    <div class="popin__illustrationWrapper">
                <div class="popin__illustration illustration--balloon"></div>
            </div>
        
        <div class="popin__mainContainer">
                            <h3 id="popin-view-restriction_popin_title" class="popin__title  js-popin-title">Waouh !</h3>
            
            
            
            <div class="popin__content  js-popin-content">
                <div class="popin__contentWrapper">
                                                <p>
            Très heureux de voir que nos cours vous plaisent, déjà 3 pages lues aujourd&#039;hui ! Vous pouvez continuer la lecture de nos cours en devenant un Roomie, un membre de la communauté d&#039;OpenClassrooms. C&#039;est gratuit !
        </p>
        <p>
            Vous pourrez aussi suivre votre avancement dans le cours, faire les exercices et discuter avec les autres Roomies.
        </p>
                    </div>
            </div>

                            <div class="popin__actions  js-popin-actions">
                                                                        <a class="oc-btn orange-alt-btn "  href="https://openclassrooms.com/register">S'inscrire</a>
                                                    <a class="oc-btn dark-btn "  href="https://openclassrooms.com/login">Se connecter</a>
                                                            </div>
            
                        
                    </div>
    </div>
</aside>

        </div>


    </section>
</div>
    </div>

    
    <div id="popin-not-certifying-yet"
     class="popin"
     data-popin-title="Vous ne pouvez pas encore obtenir de certificat de réussite à l&#039;issue de ce cours.
                            <a href='https://openclassrooms.com/premium'><i class='icon-star'></i> Devenez Premium</a>
                    ">
    <img alt="Exemple de certificat de réussite" src="../../../static.oc-static.com/prod/images/courses/certif.jpg"/>
</div>


                </main>

                <aside class="contentWithSidebar__sidebar  js-contentWithSidebar-slidingElement" >
                        <nav class="col-nav">
    <div id="tab-courseMenu" class="col-nav__inner js-sidebar-inner">
        <div class="col-nav__block  col-nav__block--summary">

            <div class="side-paginate">
                                    <a href="tp-fil-rouge-etape-4.html" class="side-paginate__previous">
                        <i class="icon-previous"></i>
                    </a>

                    <span class="side-paginate__separator"></span>
                
                <h6 class="side-paginate__title">
                    Une application interactive !
                </h6>

                                    <span class="side-paginate__separator"></span>

                    <a href="le-telechargement-de-fichiers.html" class="side-paginate__next">
                        <i class="icon-next"></i>
                    </a>
                            </div>

                            <div class="col-nav__block--summary-list">
                    <ol class="col-nav__chapters">
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="formulaires-le-b-a-ba.html">Formulaires : le b.a.-ba</a>
                                                            </li>
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="formulaires-a-la-mode-mvc.html">Formulaires : à la mode MVC</a>
                                                            </li>
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="tp-fil-rouge-etape-3.html">TP Fil rouge - Étape 3</a>
                                                            </li>
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="la-session-connectez-vos-clients.html">La session : connectez vos clients</a>
                                                            </li>
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="le-filtre-creez-un-espace-membre.html">Le filtre : créez un espace membre</a>
                                                            </li>
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="le-cookie-le-navigateur-vous-ouvre-ses-portes.html">Le cookie : le navigateur vous ouvre ses portes</a>
                                                            </li>
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="tp-fil-rouge-etape-4.html">TP Fil rouge - Étape 4</a>
                                                            </li>
                                                    <li class="selected">
                                                                                                    <span class="col-nav__chapterTitle">Formulaires : l&#039;envoi de fichiers</span>
                                                            </li>
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="le-telechargement-de-fichiers.html">Le téléchargement de fichiers</a>
                                                            </li>
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="tp-fil-rouge-etape-5.html">TP Fil rouge - Étape 5</a>
                                                            </li>
                                            </ol>

                                    </div>
                    </div>

        
        
            <div class="col-nav__block  col-nav__block--subscribe">
            <a href="https://openclassrooms.com/login" class="oc-btn orange-alt-btn js-popin-activator" data-popin-selector="#popin-log-in">
                <i class="icon-lock"></i>
                Suivre ce cours
            </a>

            <a href="https://openclassrooms.com/how-does-it-work">
                <small>Comment ça marche ?</small>
            </a>
        </div>
    


        
                    <div class="col-nav__block col-nav__block--institution">
    <h2>Créé par</h2>
            <a  href="https://openclassrooms.com/partners/openclassrooms" target="_blank">
            <img src="../../../sdz-upload.s3.amazonaws.com/prod/partners/img/logo_logo-oc.png" alt="logo OpenClassrooms" class="col-nav__institutionLogo"/>
            <p class="col-nav__block--institutionDescription">
                OpenClassrooms, 1ère plateforme  <span class='nowrap'>e-Education<span> en Europe
            </p>
        </a>
    </div>
        
        
        
    
                        
            
    <div class="socialNetwork col-nav__block">
        <ul class="socialButtons  js-socialButtons"
    data-options="
                title: 'Découvrez le cours &quot;Formulaires : l&#039;envoi de fichiers&quot; sur @OpenClassrooms',
        mailTitle: 'Cours &quot;Formulaires : l&#039;envoi de fichiers&quot; sur OpenClassrooms',
        mailContent: 'Découvrez le cours &quot;Formulaires : l&#039;envoi de fichiers&quot; sur OpenClassrooms.'">

    <li>
        <a class="roundIcon  roundIcon--twitter addthis_button_twitter  js-socialButtons-btn" data-tooltip="Partagez sur Twitter" >
            <i class="roundIcon__icon  icon-twitter"></i>
        </a>
    </li>

    <li>
        <a class="roundIcon  roundIcon--facebook  addthis_button_facebook  js-socialButtons-btn" data-tooltip="Partagez sur Facebook">
            <i class="roundIcon__icon  icon-facebook"></i>
        </a>
    </li>

    <li>
        <a class="roundIcon  roundIcon--googlePlus  addthis_button_google_plusone_share  js-socialButtons-btn" data-tooltip="Partagez sur Google+" >
            <i class="roundIcon__icon  icon-google"></i>
        </a>
    </li>

    <li>
        <a class="roundIcon  addthis_button_email  js-socialButtons-btn  js-socialButtons-email" data-tooltip="Partagez par e-mail">
            <i class="roundIcon__icon  icon-letter"></i>
        </a>
    </li>

</ul>

    </div>
    </div>
</nav>
                </aside>
            </div>
        </div>

                    <footer class="alt-section">
    <div class="centered">

        <div class="row">
                            <div class="col4 course-bottom__category">
                    <h2 class="highlighted">
                        L&#039;auteur
                    </h2>
                    <div>
                                                    <a itemprop="author" itemscope itemtype="http://schema.org/Person" href="https://openclassrooms.com/membres/coyote-92394" class="no-underlined">
                                <div class="course-bottom__text-illustrated">
                                    <span data-author="Médéric Munier" style="background-image: url(../../../www.gravatar.com/avatar/15c349ac5313535fba91e5dbfa8803ec/indexd6dc.html?s=256&amp;r=g&amp;d=https%3A%2F%2Fopenclassrooms.com%2Fbundles%2Fcommon%2Fimages%2Favatar_defaut.png);"></span>
                                    <h4 itemprop="name">Médéric Munier</h4>
                                                                            <p itemprop="description">
                                            Auteur du livre sur le Java EE.
                                        </p>
                                                                    </div>
                            </a>
                                            </div>
                </div>
            
                            <div class="col8 course-bottom__category">
                    <h2 class="highlighted">Découvrez aussi ce cours en...</h2>

                    <ul class="course-bottom__format">
                                                    <li>
                                <a
                                                                                    href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee" class="text-decoration-none"
                                                                        >
                                    <div class="circle circle--x-small">
                                        <span class="circle__content"></span>
                                        <i class="icon-ebook"></i>
                                                                                    <div class="ribbon ribbon--orange">
                                                <div class="ribbon__content">
                                                    <span>Premium</span>
                                                </div>
                                            </div>
                                                                            </div>
                                    <div class="course-bottom__format-entitled">eBook</div>
                                </a>
                            </li>
                                                    <li>
                                <a
                                                                                    href="http://www.eyrolles.com/Informatique/Livre/creez-des-applications-web-avec-java-ee-9791090085244?societe=openclassrooms" target="_blank" class="text-decoration-none"
                                                                        >
                                    <div class="circle circle--x-small">
                                        <span class="circle__content"></span>
                                        <i class="icon-book"></i>
                                                                            </div>
                                    <div class="course-bottom__format-entitled">Livre papier</div>
                                </a>
                            </li>
                                                    <li>
                                <a
                                                                                    href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee" class="text-decoration-none"
                                                                        >
                                    <div class="circle circle--x-small">
                                        <span class="circle__content"></span>
                                        <i class="icon-ebook pdf"></i>
                                                                                    <div class="ribbon ribbon--orange">
                                                <div class="ribbon__content">
                                                    <span>Premium</span>
                                                </div>
                                            </div>
                                                                            </div>
                                    <div class="course-bottom__format-entitled">PDF</div>
                                </a>
                            </li>
                                            </ul>
                </div>
                    </div>

    </div>
</footer>


    </article>
            </div>
        </div>

                    <footer class="footer">
    <div class="centered">
        <div class="row">

            <div class="col3 col6-s  footer__item  linksList  foldable  js-foldable" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: 'closed'">
                <h2 class="linksList__title  foldable__button  js-foldable-button">
                    OpenClassrooms
                    <i class="icon-next  foldable__icon"></i>
                </h2>

                <ul class="linksList__content foldable__content">
                    <li>
                        <a href="https://openclassrooms.com/about-us" class="footer__link">Qui sommes-nous ?</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/how-does-it-work" class="footer__link">Fonctionnement de nos cours</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/jobs" class="footer__link">Recrutement</a>
                    </li>
                    <li>
                        <a href="#" class="js-zendesk-show footer__link">Nous contacter</a>
                    </li>
                </ul>
            </div>

            <div class="col3 col6-s  footer__item  linksList  foldable  js-foldable" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: 'closed'">
                <h2 class="linksList__title  foldable__button  js-foldable-button">
                    Professionnels
                    <i class="icon-next  foldable__icon"></i>
                </h2>

                <ul class="linksList__content foldable__content">
                    <li>
                        <a href="https://openclassrooms.com/affiliation" class="footer__link">
                            Affiliation
                        </a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/business" class="footer__link">Entreprises</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/universities" class="footer__link">Universités et écoles</a>
                    </li>
                </ul>
            </div>

            <div class="col3 col6-s  footer__item  linksList  foldable  js-foldable" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: 'closed'">
                <h2 class="linksList__title  foldable__button  js-foldable-button">
                    Participez
                    <i class="icon-next  foldable__icon"></i>
                </h2>

                <ul class="linksList__content foldable__content">
                    <li>
                        <a href="https://openclassrooms.com/new-teachers" class="footer__link">Créer un cours</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/courses/courselab" class="footer__link">CourseLab</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/terms-conditions/fr" class="footer__link">
                            <strong>Conditions Générales d&#039;Utilisation</strong>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="col3 col6-s  footer__item  linksList  foldable  js-foldable" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: 'closed'">
                <h2 class="linksList__title  foldable__button  js-foldable-button">
                    Suivez-nous
                    <i class="icon-next  foldable__icon"></i>
                </h2>
                                                                    <ul class="linksList__content foldable__content">
                    <li>
                        <a href="http://blog.openclassrooms.com/" class="footer__link">Le blog OpenClassrooms</a>
                    </li>
                    <li>
                        <ul class="footer__socialNetwork">
                            <li>
                                <a href="https://www.facebook.com/openclassrooms" target="_blank" class="roundIcon roundIcon--facebook footer__socialButtons">
                                    <i class="icon-facebook roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://twitter.com/openclassrooms" target="_blank" class="roundIcon roundIcon--twitter footer__socialButtons">
                                    <i class="icon-twitter roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://plus.google.com/+OpenClassrooms/posts" target="_blank" class="roundIcon roundIcon--youtube footer__socialButtons">
                                    <i class="icon-google roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="http://instagram.com/openclassrooms" target="_blank" class="roundIcon roundIcon--instagram footer__socialButtons">
                                    <i class="icon-instagram roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://www.youtube.com/user/TheOpenClassrooms" target="_blank" class="roundIcon roundIcon--googlePlus footer__socialButtons">
                                    <i class="icon-youtube roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://www.linkedin.com/company/openclassrooms" target="_blank" class="roundIcon roundIcon--linkedin footer__socialButtons">
                                    <i class="icon-linkedin roundIcon__icon"></i>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>

            </div>
        </div>
    </div>
</footer>
        
        <!-- loaded javascript block -->

            
            <script type="text/javascript" src="../../js/maind0b3.js?095b5b3"></script>

        

    <script type="text/javascript" src="../../js/oc/courseViewd0b3.js?095b5b3"></script>


        <!-- loaded javascript block -->

        <script type="text/javascript">
    window.analytics=window.analytics||[],window.analytics.methods=["identify","group","track","page","pageview","alias","ready","on","once","off","trackLink","trackForm","trackClick","trackSubmit"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var key=window.analytics.methods[i];window.analytics[key]=window.analytics.factory(key)}window.analytics.load=function(t){if(!document.getElementById("analytics-js")){var a=document.createElement("script");a.type="text/javascript",a.id="analytics-js",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.io/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)}},window.analytics.SNIPPET_VERSION="2.0.9",
    window.analytics.load('mou95e6tdn');
</script>

                            
        <!-- inlined javascript block -->

        <script type="text/javascript">
            
            if (App.modules) {
                App.modules.startAll();
            }
        </script>

                        
    <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"90dc06697a","applicationID":"20302107","transactionName":"NANaYkJXC0ICAhdYVw1Je0NDQgpcTA4AblsPB1FEVWkGXhYTEFRnEwdKQm9GBEMXPhVYXRQ=","queueTime":0,"applicationTime":425,"atts":"GERZFApNGEw=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>

<!-- Mirrored from openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/formulaires-l-envoi-de-fichiers by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Apr 2016 09:51:49 GMT -->
</html>
