


<!DOCTYPE html>
<html class="no-js" lang="fr" prefix="og: http://ogp.me/ns#">
    
<!-- Mirrored from openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/communiquez-avec-votre-bdd by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Apr 2016 09:51:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <meta charset="utf-8" /><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var o=e[n][1][t];return r(o||t)},o,o.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){function r(e,t){return function(){o(e,[(new Date).getTime()].concat(a(arguments)),null,t)}}var o=e("handle"),i=e(2),a=e(3);"undefined"==typeof window.newrelic&&(newrelic=NREUM);var u=["setPageViewName","addPageAction","setCustomAttribute","finished","addToTrace","inlineHit"],c=["addPageAction"],f="api-";i(u,function(e,t){newrelic[t]=r(f+t,"api")}),i(c,function(e,t){newrelic[t]=r(f+t)}),t.exports=newrelic,newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),o("err",[e,(new Date).getTime()])}},{}],2:[function(e,t,n){function r(e,t){var n=[],r="",i=0;for(r in e)o.call(e,r)&&(n[i]=t(r,e[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],3:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(0>o?0:o);++r<o;)i[r]=e[t+r];return i}t.exports=r},{}],ee:[function(e,t,n){function r(){}function o(e){function t(e){return e&&e instanceof r?e:e?u(e,a,i):i()}function n(n,r,o){e&&e(n,r,o);for(var i=t(o),a=l(n),u=a.length,c=0;u>c;c++)a[c].apply(i,r);var s=f[g[n]];return s&&s.push([m,n,r,i]),i}function p(e,t){w[e]=l(e).concat(t)}function l(e){return w[e]||[]}function d(e){return s[e]=s[e]||o(n)}function v(e,t){c(e,function(e,n){t=t||"feature",g[n]=t,t in f||(f[t]=[])})}var w={},g={},m={on:p,emit:n,get:d,listeners:l,context:t,buffer:v};return m}function i(){return new r}var a="nr@context",u=e("gos"),c=e(2),f={},s={},p=t.exports=o();p.backlog=f},{}],gos:[function(e,t,n){function r(e,t,n){if(o.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[t]=r,r}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){o.buffer([e],r),o.emit(e,t,n)}var o=e("ee").get("handle");t.exports=r,r.ee=o},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!w++){var e=v.info=NREUM.info,t=s.getElementsByTagName("script")[0];if(e&&e.licenseKey&&e.applicationID&&t){c(l,function(t,n){e[t]||(e[t]=n)});var n="https"===p.split(":")[0]||e.sslForHttp;v.proto=n?"https://":"http://",u("mark",["onload",a()],null,"api");var r=s.createElement("script");r.src=v.proto+e.agent,t.parentNode.insertBefore(r,t)}}}function o(){"complete"===s.readyState&&i()}function i(){u("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var u=e("handle"),c=e(2),f=window,s=f.document;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:f.XMLHttpRequest,REQ:f.Request,EV:f.Event,PR:f.Promise,MO:f.MutationObserver},e(1);var p=""+location,l={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-918.min.js"},d=window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent),v=t.exports={offset:a(),origin:p,features:{},xhrWrappable:d};s.addEventListener?(s.addEventListener("DOMContentLoaded",i,!1),f.addEventListener("load",r,!1)):(s.attachEvent("onreadystatechange",o),f.attachEvent("onload",r)),u("mark",["firstbyte",a()],null,"api");var w=0},{}]},{},["loader"]);</script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <meta name="application-name" content="OpenClassrooms"/>
        <meta name="msapplication-TileColor" content="#e95325"/>
        <meta name="msapplication-TileImage" content="/fav-icon.png?v=1"/>

        <meta name="theme-color" content="#E95325">
        <link rel="icon" sizes="144x144" href="../../fav-icon3860.png?v=1">

        
        
        <link href="../../bundles/common/css/masterd0b3.css?095b5b3" type="text/css" rel="stylesheet" media="all"  />
        

        <link rel="apple-touch-icon" href="../../apple-touch-icon.png" />
        <link rel="apple-touch-icon" href="../../apple-touch-icon-iphone.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="../../apple-touch-icon-ipad.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="../../apple-touch-icon-iphone-retina-display.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="../../apple-touch-icon-ipad-retina-display.png" />

        <link rel="apple-touch-icon-precomposed" href="../../apple-touch-icon-precomposed.png" />

            <link href="../../bundles/course/css/maind0b3.css?095b5b3" type="text/css" rel="stylesheet" media="all"/>

        <script type="text/javascript" src="../../js/modernizrd0b3.js?095b5b3"></script>

        <link rel="shortcut icon" href="https://openclassrooms.com/favicon.ico?095b5b3" />

            
    <meta property="og:locale" content="fr"/>
    <meta property="og:type" content="website"/>

    <meta property="og:title" content="Découvrez le cours &quot;Communiquez avec votre BDD&quot; sur @OpenClassrooms"/>
    <meta property="og:url" content="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/communiquez-avec-votre-bdd"/>
    <meta property="og:site_name" content="OpenClassrooms"/>
    <meta property="og:image" content="https://static.oc-static.com/prod/courses/illustrations/illu_creez-votre-application-web-avec-java-ee.png"/>
    <meta property="og:description" content="Pour réaliser des sites web en Java, on utilise l&#039;environnement Java EE (anciennement appelé J2EE). Celui-ci impose de développer de façon très structurée, ce qui explique certainement pour quoi on le retrouve dans un très grand nombre d&#039;applications web notamment en entreprise (banques, administrations...)."/>

            
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@OpenClassrooms"/>
    <meta name="twitter:title" content="Découvrez le cours &quot;Communiquez avec votre BDD&quot; sur @OpenClassrooms"/>
    <meta name="twitter:description" content=""/>

                
        <title>Communiquez avec votre BDD</title>

        <!-- inlined top javascript block -->


        <script type="text/javascript">
            var App = {
                startTime: (new Date()).getTime(),
                debug: false
            };

            App.user = {
                
                
                
                isPremium: false
            };


            App.preferences = {
                assetVersion: '095b5b3',
                contactMail: 'hello@openclassrooms.com',
                adyenPublicKey: '10001|889EBFD4D434B82683E21DCA26E77C3E20E0EE09A5ECE3830B0ED51F2FA721A2F7E9EC871C6AB9A1E12C4492F4717673047757E02C5256D8E265CD51E413E5EFCCFEAC41B39C662A424ADC13EE187C38C372A7FCCEC1EA5DF841989437D78B252A8EB51008E60BB55B1E55A7A80DE1A9D60D998C128A576BFAE1DDB97D514AF0A073AEDDE84CEE40D1F8F6ECE85D0FFA50C95C06DB274021C1371376C6EB16561FD65C5E2704B570A7504D617D0F3820F176A0609F6162BDF5890533289FDC3DA7DB03B50BB3BD60A613E1FF72060F22987627E8F1A29F0128A94EC4C8FF7CF6B7AB9558D8433BF86D7A388AB927641CD6C02689139CEE3AAC9ACBFFE83806CB',
                algolia: {
                    appId: 'JGRXRFVQM0',
                    apiKey: 'dfbdea500cb0b5f46e449ad334916c44', indexName: 'prod_COURSES_fr'
                },
                routes: {
                    COURSE_EVENT: '/components/courses/:courseId',
                    COURSE_PART_EVENT: '/components/courses/:courseId/parts/:partId',

                    ACCEPT_COOKIE: '/components/user-accept-consent-cookie'
                }

                                            };

            App.preferences.navigationPreference = {
                            };

            App.preferences.modules = {
                'smiley': {
                    basePath: '/bundles/common/images/smiley/'
                }
            };
        </script>
        <!-- inlined top javascript block end -->

        <script>    App.preferences.modules['course/view/internalFolding'] = {
        isBigCourse: true
    };

    App.data = App.data || {};
App.data.currentCourse = {"partId":624392,"courseId":626954};
App.preferences.modules['view/currentCoursePage'] = App.data.currentCourse;

</script>

        
        
    </head>

    <body class="course oc-body ">

        

        
    
    
    <script id="_EVENTS-PAGE" type="application/json">
        {"type":"page"}
    </script>


        <!--[if lt IE 9]>
<div class="disclaimer  disclaimer-error">
    Vous utilisez un navigateur obsolète, veuillez le <a href="http://browsehappy.com/">mettre à jour</a>.
</div>
<![endif]-->

<noscript>
    <div class="disclaimer  disclaimer--error">
        Veuillez utiliser un <a href="http://browsehappy.com/">navigateur internet moderne</a> avec JavaScript activé pour naviguer sur OpenClassrooms.com
    </div>
</noscript>


                    

<header id="oc-header" class="js-tabs-mobile mainHeader ">

        <div class="disclaimer  disclaimer--info hidden  js-cookie-disclaimer">
        <div class="disclaimer__wrapper">
            <span class="disclaimer__content">Bienvenue sur OpenClassrooms ! En poursuivant votre navigation, vous acceptez l'utilisation de cookies. <a href="https://openclassrooms.com/privacy-policy#personal-data-gathering">En savoir plus</a></span>
            <span class="disclaimer__actions">
                <a href="#" class="disclaimer__button  js-close-button">ok</a>
            </span>
        </div>
    </div>

    <div class="mainHeader__wrapper">

        <div class="mainHeader__topLine">
                <a href="https://openclassrooms.com/pole-emploi/partenariat?utm_source=SiteWeb-OC&amp;utm_medium=Lien-PhraseHeader&amp;utm_campaign=relancePE"> Vous êtes demandeur d'emploi ? On vous offre le Premium Solo en 3 clics :) ! </a>

        </div>

        <div class="mainHeader__top">
            <a href="https://openclassrooms.com/" class="mainHeader__logo" title="OpenClassrooms.com">OpenClassrooms.com</a>

            
<nav role="navigation" class="icoTabs  mainHeader__tabSet">
    <span class="mainHeader__mobileNav">

        
        
        <a class="js-tabs-tab  icoTabs__tab  is-disabled" href="#tab-courseMenu">
            <span class="icoTabs__inner--mobileRightSeparator">
                <i class="icon-plus  icoTabs__icon"></i>
            </span>
        </a>

        <a class="js-tabs-tab  icoTabs__tab  is-disabled" href="#tab-courseEditMenu">
            <span class="icoTabs__inner--mobileRightSeparator">
                <i class="icon-plus  icoTabs__icon"></i>
            </span>
        </a>

        <a class="js-tabs-tab  icoTabs__tab  is-disabled" data-tabs-default="true" href="#tab-searchMenu">
            <span class="icoTabs__inner--mobileRightSeparator">
                <i class="icon-search  icoTabs__icon"></i>
            </span>
        </a>

        <a class="js-tabs-tab  icoTabs__tab" href="#tab-main">
            <i class="icon-menu  icoTabs__icon"></i>
        </a>
    </span>

</nav>
        </div>

                <div class="js-tabs-content  mainHeader__content"></div>

        <div class="mainHeader__content">
            <div id="tab-main" class="mainHeader__tabs">
                <nav class="mainTopNav  scrollPanel  js-scrollPanel-mobileMenu">
    <div class="mainTopNav__container  scrollPanel__container  js-scrollPanel-container">
        <ul class="mainHeader__container  mainHeader__container--mainMenu  js-scrollPanel-content">
            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="http://openclassrooms.com/paths/">Parcours</a>
            </li>
            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="https://openclassrooms.com/courses">Cours</a>
            </li>
            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="https://openclassrooms.com/forum/">Forums</a>
            </li>

            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="https://openclassrooms.com/partners">Partenaires</a>
            </li>

            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="https://openclassrooms.com/premium">Premium</a>
            </li>
        </ul>
    </div>
</nav>

                <div class="mainHeader__contentInner">
                    <div class="mainHeader__container  mainHeader__container--search">
                                                                                                                                                                            
                                                                          
 <div class="js-courseSearch  topSearchBox">
     <form tabindex="0" class="js-courseSearch-form  oc-form" action="https://openclassrooms.com/courses" method="get">
         <div class="js-courseSearch-inputGroup oc-form__widget  inputGroup  topSearchBox__inner">
             <input id="algolia-search-input"
                    type="search"
                    class="js-courseSearch-input oc-form__control inputGroup__input  topSearchBox__input"
                    title="Rechercher"
                    autocomplete="off"
                    data-option_source="/components/courses/search?q=<%= term %>"
                    placeholder="Rechercher"
                    name="q" />

             <button class="js-courseSearch-button  oc-btn dark-btn  only-icon  inputGroup__button  topSearchBox__button" type="submit" title="Rechercher un cours">
                 <i class="inputGroup__icon icon-search"></i>
                 <i class="inputGroup__icon inputGroup__icon--load icon-spinner icon-spin"></i>
             </button>
         </div>
     </form>
 </div>
                    </div>

                                            <div class="mainHeader__container  mainHeader__container--separatorLarge  hidden-s"></div>
                    


                    
                                            <div class="mainHeader__container  mainHeader__container--login">
    <a href="https://openclassrooms.com/register" class="oc-btn orange-alt-btn js-popin-activator space-right" data-popin-selector="#popin-sign-in">
    S&#039;inscrire
</a>
<a href="https://openclassrooms.com/login" class="oc-btn dark-btn js-popin-activator" data-popin-selector="#popin-log-in">
    Se connecter
</a>
</div>


<aside  tabindex="-1"
        role="dialog"
                    aria-labelledby="popin-sign-in_popin_title"
                class="popin popin--small  js-popin"
        id="popin-sign-in"
>
    <i class="popin__close-button icon-close js-close-button"></i>

    <div class="popin__inner">
        
        <div class="popin__mainContainer">
                            <h3 id="popin-sign-in_popin_title" class="popin__title  js-popin-title">Inscription</h3>
            
            
            
            <div class="popin__content  js-popin-content">
                <div class="popin__contentWrapper">
                                                <div class="formLogin formLogin--smallSize">
            
<ul class="table table--fullwidth u--noMargin">
    <li class="formLogin__column">
        <a class="facebook-btn oc-btn fullwidth formLogin__facebook" href="https://www.facebook.com/v2.3/dialog/oauth?client_id=277769842283905&amp;redirect_uri=https%3A%2F%2Fopenclassrooms.com%2Flogin_check_facebook&amp;state=956eb095b24cd831fd52c32931c4aae3&amp;sdk=php-sdk-4.0.23&amp;scope=public_profile%2Cemail">
            <i class="icon-facebook"></i>S&#039;inscrire avec Facebook
        </a>
        <a class="google-btn oc-btn fullwidth formLogin__google" href="https://accounts.google.com/o/oauth2/auth?response_type=code&amp;redirect_uri=https%3A%2F%2Fopenclassrooms.com%2Flogin_check_google&amp;client_id=132418960718-jdnmpug3g9e6ub2p41ergcci1492qh82.apps.googleusercontent.com&amp;scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fplus.me+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&amp;access_type=online&amp;approval_prompt=auto">
            <i class="icon-google"></i>S&#039;inscrire avec Google
        </a>
    </li>

    <li class="formLogin__column">
        
            
    
    

    <form name="register" method="post" action="https://openclassrooms.com/register" class="js-registerForm oc-form">

        <div class="accessibility-hidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Wonder&nbsp;                        </span><span class="oc-form__widget"><input type="text" id="register_wonder" name="register[wonder]" class="" /></span></label>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Prénom&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="text" id="register_firstName" name="register[firstName]" required="required" autofocus="autofocus" class="" /></span></label>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Nom&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="text" id="register_lastName" name="register[lastName]" required="required" class="" /></span></label>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Adresse email&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="email" id="register_email" name="register[email]" required="required" class="" /></span></label>
            <p>
                <em>
                    Vous recevrez votre mot de passe sur cette adresse email.
                </em>
            </p>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row  oc-form__row--reversed  "><span class="oc-form__widget"><span class="ocCheckbox"><input type="checkbox" id="register_terms" name="register[terms]" required="required" class="" value="1" /><span class="ocCheckbox__check"></span></span></span><span class="oc-form__label-text"><span class="oc-form__label-text ">
                            J'ai lu et j'accepte les <a href="https://openclassrooms.com/terms-conditions/fr">Conditions Générales d'Utilisation</a>.&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span></span></label>
        </div>


        <div class="oc-form__group  center-text">
            
    <button type="submit" id="register_create" name="register[create]" class="oc-btn orange-alt-btn oc-btn"> S'inscrire</button>
        </div>

        <input type="hidden" id="register__target_path" name="register[_target_path]" value="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/communiquez-avec-votre-bdd" /><input type="hidden" id="register__token" name="register[_token]" value="LEhsW-IhokD4hQHYoHva_FZzYy-PP2cG-886IBpx9HY" /></form>
    </li>
</ul>
        </div>
                    </div>
            </div>

            
                        
                    </div>
    </div>
</aside>



<aside  tabindex="-1"
        role="dialog"
                    aria-labelledby="popin-log-in_popin_title"
                class="popin popin--small  js-popin"
        id="popin-log-in"
>
    <i class="popin__close-button icon-close js-close-button"></i>

    <div class="popin__inner">
        
        <div class="popin__mainContainer">
                            <h3 id="popin-log-in_popin_title" class="popin__title  js-popin-title">Connexion</h3>
            
            
            
            <div class="popin__content  js-popin-content">
                <div class="popin__contentWrapper">
                                                <div class="formLogin formLogin--smallSize">
            
<ul class="table table--fullwidth u--noMargin">
    <li class="formLogin__column">
        <a class="facebook-btn oc-btn fullwidth formLogin__facebook" href="https://www.facebook.com/v2.3/dialog/oauth?client_id=277769842283905&amp;redirect_uri=https%3A%2F%2Fopenclassrooms.com%2Flogin_check_facebook&amp;state=956eb095b24cd831fd52c32931c4aae3&amp;sdk=php-sdk-4.0.23&amp;scope=public_profile%2Cemail"><i class="icon-facebook"></i> Se connecter avec Facebook</a>
        <a class="google-btn oc-btn fullwidth formLogin__google" href="https://accounts.google.com/o/oauth2/auth?response_type=code&amp;redirect_uri=https%3A%2F%2Fopenclassrooms.com%2Flogin_check_google&amp;client_id=132418960718-jdnmpug3g9e6ub2p41ergcci1492qh82.apps.googleusercontent.com&amp;scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fplus.me+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&amp;access_type=online&amp;approval_prompt=auto"><i class="icon-google"></i> Se connecter avec Google</a>
    </li>

    <li class="formLogin__column">

        
            
    
    

    <form name="" method="post" action="https://openclassrooms.com/login_check" class=" oc-form">

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Adresse email ou nom d'utilisateur&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="text" id="_username" name="_username" required="required" autofocus="autofocus" class="" /></span></label>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Mot de passe&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="password" id="_password" name="_password" required="required" class="" /></span></label>
        </div>

        <div class="oc-form__group">
                <label class="oc-form__row  oc-form__row--reversed  "><span class="oc-form__widget"><span class="ocCheckbox"><input type="checkbox" id="_remember_me" name="_remember_me" class="" value="1" checked="checked" /><span class="ocCheckbox__check"></span></span></span><span class="oc-form__label-text"><span class="oc-form__label-text ">
                            Se souvenir de moi&nbsp;                        </span></span></label>
        </div>

        <div class="oc-form__group right-text">
            <a href="https://openclassrooms.com/set-new-password">Mot de passe oublié</a>
        </div>

        <div class="oc-form__group  center-text">
            <input type="hidden" id="_target_path" name="_target_path" value="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/communiquez-avec-votre-bdd" /><div>
    <button type="submit" id="login" name="login" class="orange-alt-btn oc-btn"> Se connecter</button></div><input type="hidden" id="_csrf_token" name="_csrf_token" value="WFIVlYEKEcL5v9hnQC1z3quXwgYs14KEFOLh1GUmi_I" />
        </div>

        </form>
    </li>
</ul>
<p class="text-center space-top">
    Pas encore membre ? <a href="https://openclassrooms.com/register">Inscrivez-vous gratuitement</a> en 30s.
</p>
        </div>
                    </div>
            </div>

            
                        
                    </div>
    </div>
</aside>
                    
                    <div class="mainHeader__container  mainHeader__container--langSelector">
                        <div class="js-popOut-header  popOut popOut--small  popOut--rightAlign" data-keep-it-mobile="true">
    <span class="js-popOut-button  popOut__button">
                    <a href="javascript:;" class="languageSelector__selected">Français</a>
            </span>
    <ul class="popOutList  popOut__content  popOutList--small">
                    <li class="popOutList__item">
                <a class="popOutList__link" href="https://openclassrooms.com/change-locale/en/wsADDEtTJgeOfRBlmygmpV2y0eneCLAuyYJYnverVSQ">English</a>
            </li>
                    <li class="popOutList__item">
                <a class="popOutList__link" href="https://openclassrooms.com/change-locale/es/wsADDEtTJgeOfRBlmygmpV2y0eneCLAuyYJYnverVSQ">Español</a>
            </li>
            </ul>
</div>

                    </div>
                </div>
            </div>

        </div>
    </div>
</header>

        
        <div id="mainSearch" class="centered search-content">
        </div>

        <div id="mainContentWithHeader">
            <div id="pre-main-part">
                
                                        <section class="inset no-padding">
        <div class="centered">

            <h6 class="accessibility-hidden">Fil d&#039;Ariane</h6>

            <nav class="breadcrumb">
                <ul class="breadcrumbtrail">
                                                                        <li class="home" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                                                                            <a href="https://openclassrooms.com/" itemprop="url">
                                <span itemprop="title">Accueil</span>
                            </a>
                                                                            <div class="arrow-right"></div>
                                                </li>
                                                                        <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                                                                            <a href="https://openclassrooms.com/courses" itemprop="url">
                                <span itemprop="title">Cours</span>
                            </a>
                                                                            <div class="arrow-right"></div>
                                                </li>
                                                                        <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                                                                            <a href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee?status=published" itemprop="url">
                                <span itemprop="title">Créez votre application web avec Java EE</span>
                            </a>
                                                                            <div class="arrow-right"></div>
                                                </li>
                                                                        <li class="current" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                                                                            Communiquez avec votre BDD
                                                                        </li>
                                    </ul>
            </nav>
        </div>
    </section>

                
                            </div>

            <div class="claire clearfix" >
                    <article itemscope itemtype="http://schema.org/Article">

                        
<header class="course-header" xmlns="http://www.w3.org/1999/html">
    <div class="centered"><div class="course-header__topPart"><div class="course-header__info"><a itemprop="url" href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee"><h1 data-course-title="Créez votre application web avec Java EE">Créez votre application web avec Java EE</h1></a><span class="course-header__updatedTime visible-l">Mis à jour le lundi 13 juillet 2015</span></div></div></div><div class="course-header__details-container"><div class="centered"><div class="row"><div class="col12"><div class="course-header__details  iconBar"><div class="course-header__detailsGroup  course-header__detailsGroup--formats iconBar__group"><ul data-option_popinselector="#popin-formats-availables" class="course-types iconBar__list js-course-formats-bar"><li class="iconBar__item  course-types__item  js-tooltip" title="Ce cours est visible gratuitement en ligne."><a href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee"><i class="icon-desktop  course-types__icon"></i><span class="course-header__format-current"></span></a></li><li class="iconBar__item  course-types__item iconBar__item--dimmed js-tooltip" title="Ce cours n&#039;est pas encore en vidéo."><span><i class="icon-video course-types__icon"></i></span></li><li class="iconBar__item  course-types__item  js-tooltip" title="Ce cours existe en livre papier."><a href="http://www.eyrolles.com/Informatique/Livre/creez-des-applications-web-avec-java-ee-9791090085244?societe=openclassrooms" target="_blank"><i class="icon-book  course-types__icon"></i></a></li><li class="iconBar__item  course-types__item  js-tooltip" title="Ce cours existe en eBook."><a href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee"><i class="icon-ebook  course-types__icon"></i></a></li><li class="iconBar__item  course-types__item iconBar__item--dimmed js-tooltip"
                                                                                            title="Vous ne pouvez pas encore obtenir de certificat de réussite à l&#039;issue de ce cours."
                                                                                ><a
                                                                                        ><i class="icon-badge  course-types__icon"></i></a></li><li class="iconBar__item  course-types__item iconBar__item--dimmed js-tooltip" title="Ce cours n&#039;est pas encore diplômant et ne vous permet pas d&#039;obtenir des crédits universitaires européens (ECTS)."><span><i class="icon-hat  course-types__icon"></i></span></li><li class="iconBar__item  course-types__item  js-tooltip" title="Vous pouvez être accompagné sur ce cours par un mentor dédié en visioconférence."><a  href="https://openclassrooms.com/premium#discover-premium-plus-offer" ><i class="icon-mentor  course-types__icon"></i></a></li></ul></div><div class="course-header__detailsGroup  course-header__detailsGroup--info  iconBar__group"><ul class="iconBar__list"><li class="iconBar__item"><i class="icon-duration iconBar__icon js-tooltip" title="Ce cours demande en moyenne 40 heures de travail pour être réussi."></i><span class="iconBar__label">40 heures</span></li><li class="iconBar__item"><i class="icon-level iconBar__icon"></i><span class="iconBar__label">
                                                                                                    Moyenne
                                                                                            </span></li></ul></div><div class="course-header__detailsGroup course-header__detailsGroup--licences iconBar__group"><a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.0"><span class="iconBar__label">Licence</span><ul class="iconBar__list"><li class="iconBar__item"><i class="icon-cc iconBar__icon" title="CC"></i></li><li class="iconBar__item"><i class="icon-ccby iconBar__icon" title="BY"></i></li><li class="iconBar__item"><i class="icon-ccnc iconBar__icon" title="NC"></i></li><li class="iconBar__item"><i class="icon-ccsa iconBar__icon" title="SA"></i></li></ul></a></div></div></div></div></div></div>
    <div id="popin-formats-availables" class="popin popin--course-formats-availables">
        <i class="popin__close-button icon-close js-close-button"></i>

        <div class="course-types course-types--withSpace">
                            <a class="course-types__item" href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee">
                    <i class="icon-desktop course-types__icon"></i>
                </a>
            
            
                            <a class="course-types__item" href="http://www.eyrolles.com/Informatique/Livre/creez-des-applications-web-avec-java-ee-9791090085244?societe=openclassrooms">
                    <i class="icon-book course-types__icon"></i>
                </a>
            
                            <a class="course-types__item" href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee">
                    <i class="icon-ebook course-types__icon"></i>
                </a>
            
            
                                        <a class="course-types__item" href="https://openclassrooms.com/premium#discover-premium-plus-offer">
                    <i class="icon-mentor course-types__icon"></i>
                </a>
                    </div>

                    <p>Ce cours est visible <a href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee">gratuitement en ligne</a>.</p>
        
        
                    <p>
                Ce cours existe en livre papier.
            </p>
        
                    <p>Ce cours existe <a href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee">en eBook</a>.</p>
        
        
        
                    <p>
                Vous pouvez être <a href="https://openclassrooms.com/premium#discover-premium-plus-offer">accompagné et mentoré par un professeur particulier</a> par visioconférence sur ce cours.
            </p>
        
        <a class="oc-btn orange-alt-btn js-close-button" href="#">J&#039;ai tout compris !</a>
    </div>

    
</header>

    <div class="centered">
                            
        
            <div class="row">
        <div class="col12 col11-s">
                            <nav class="timeline">
        <div class="timeline__inner">

        <span class="timeline__iconContainer">
            <a href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee" title="Retour sur le sommaire du cours" class="roundIcon timeline__roundIcon">
                <i class="icon-home roundIcon__icon"></i>
            </a>
        </span>
            <div class="timeline__steps">
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="introduction-au-java-ee.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Introduction au Java EE
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-java-ee-mis-a-nu.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le Java EE mis à nu !
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="outils-et-environnement-de-developpement.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Outils et environnement de développement
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="la-servlet.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La servlet
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="servlet-avec-vue.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Servlet avec vue…
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="transmission-de-donnees.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Transmission de données
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-javabean.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le JavaBean
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-technologie-jsp-1-2.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La technologie JSP (1/2)
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-technologie-jsp-2-2.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La technologie JSP (2/2)
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="des-problemes-de-vue.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Des problèmes de vue ?
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-1.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 1
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="objectifs-et-configuration.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Objectifs et configuration
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-bibliotheque-core.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La bibliothèque Core
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="jstl-core-exercice-d-application.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    JSTL core : exercice d&#039;application
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-bibliotheque-xml.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La bibliothèque xml
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="jstl-xml-exercice-d-application.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    JSTL xml : exercice d&#039;application
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="faisons-le-point-2.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Faisons le point !
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-2.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 2
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="formulaires-le-b-a-ba.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Formulaires : le b.a.-ba
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="formulaires-a-la-mode-mvc.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Formulaires : à la mode MVC
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-3.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 3
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-session-connectez-vos-clients.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La session : connectez vos clients
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-filtre-creez-un-espace-membre.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le filtre : créez un espace membre
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-cookie-le-navigateur-vous-ouvre-ses-portes.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le cookie : le navigateur vous ouvre ses portes
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-4.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 4
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="formulaires-l-envoi-de-fichiers.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Formulaires : l&#039;envoi de fichiers
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-telechargement-de-fichiers.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le téléchargement de fichiers
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-5.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 5
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="introduction-a-mysql-et-jdbc.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Introduction à MySQL et JDBC
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="communiquez-avec-votre-bdd.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Communiquez avec votre BDD
                                </span>

                                                                    <span class="timeline__progressMarker"></span>
                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-modele-dao.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le modèle DAO
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-6.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 6
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="gerer-un-pool-de-connexions-avec-bonecp.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Gérer un pool de connexions avec BoneCP
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="les-annotations.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Les annotations
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-persistance-des-donnees-avec-jpa.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La persistance des données avec JPA
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-7.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 7
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="introduction-aux-frameworks-mvc.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Introduction aux frameworks MVC
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="premiers-pas-avec-jsf.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Premiers pas avec JSF
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-gestion-d-un-formulaire-avec-jsf.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La gestion d&#039;un formulaire avec JSF
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="l-envoi-de-fichiers-avec-jsf.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    L&#039;envoi de fichiers avec JSF
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="debugger-un-projet.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Débugger un projet
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="empaquetage-et-deploiement-d-un-projet.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Empaquetage et déploiement d&#039;un projet
                                </span>

                                                            </a>
                                            
                
                <span class="timeline__splitChapter"></span>

            </div>

        <span class="timeline__iconContainer">
                            <span title="Ce cours n&#039;est pas encore certifiant." class="roundIcon roundIcon--disabled">
                    <i class="icon-trophy roundIcon__icon"></i>
                </span>
                    </span>

        </div>
    </nav>
        </div>
    </div>
    </div>

        
        <div class="centered">
            <div class="contentWithSidebar  spacer  js-contentWithSidebar" >
                <main class="contentWithSidebar__content" >
                        

        <div class="relative js-sidebar-container">
        <div class="static">
    <h2 itemprop="name" data-part-title="Communiquez avec votre BDD" class="part-title">Communiquez avec votre BDD</h2>

    <section class="row space-bottom js-desktop-sticky-container">
        <div class="col9 col11-s col__small-padding--right">

                <div class="tooltipMessage tooltipMessage--noArrow">
        <i class="tooltipMessage__icon  icon-lock"></i>
        <a href="https://openclassrooms.com/login" class="js-popin-activator" data-popin-selector="#popin-log-in" >Connectez-vous</a> ou <a href="https://openclassrooms.com/register" class="js-popin-activator" data-popin-selector="#popin-sign-in" >inscrivez-vous</a> pour bénéficier de toutes les fonctionnalités de ce cours !
    </div>

            <div
                itemprop="articleBody"
                data-page-indentifier="/courses/creez-votre-application-web-avec-java-ee/communiquez-avec-votre-bdd"
                class="js-isRestrictablePage course-content js-course-container js-smilize "

                                    data-video-blocked-wrapper="<a href='https://openclassrooms.com/login#popin-log-in' class='js-popin-activator'>"
                            >

                <p id="r-2136236" data-claire-element-id="2353277">Nous allons, pour commencer, découvrir les nouveaux objets et interfaces qui doivent intervenir dans notre application afin d'établir une communication avec la base de données. Nous apprendrons ensuite à lire des données depuis la base vers notre application, et enfin à écrire des données depuis notre application vers la base.</p><p id="r-2136237" data-claire-element-id="2353278">Une fois la théorie assimilée, nous mettrons tout cela en musique dans un exemple pratique, avant d'analyser les manques et risques liés à la technique employée, et de découvrir une seconde manière de procéder qui pallie ces lacunes.</p><h3 id="r-623993" data-claire-element-id="2838057">Chargement du driver</h3><p id="r-2136238" data-claire-element-id="2353279">Nous avons, dans le chapitre précédent, récupéré le driver JDBC correspondant à MySQL, et nous l'avons ajouté au <em>classpath</em> du projet. Il nous est maintenant nécessaire de procéder à ce que l'on nomme <strong>le chargement du driver</strong> depuis le code de notre application. Voici le code minimal nécessaire :</p><pre id="r-2136239" data-claire-element-id="2838056"><code data-claire-semantic="java">/* Chargement du driver JDBC pour MySQL */
try {
    Class.forName( &quot;com.mysql.jdbc.Driver&quot; );
} catch ( ClassNotFoundException e ) {
    /* Gérer les éventuelles erreurs ici. */
}</code></pre><p id="r-2136240" data-claire-element-id="2353281">Intéressons-nous à la ligne 3 de notre exemple, dont le rôle est justement de charger le driver. Le nom de ce dernier, en l'occurrence <code>&quot;com.mysql.jdbc.Driver&quot;</code>, est fourni par son constructeur, autrement dit ici par MySQL. Si vous utilisez un autre SGBD, vous devrez vous renseigner sur le site de son distributeur pour trouver son nom exact et ainsi pouvoir le charger depuis votre application.</p><p id="r-2136241" data-claire-element-id="2353282">Si cette ligne de code envoie une exception de type <code>ClassNotFoundException</code>, cela signifie que le fichier .jar contenant le driver JDBC pour MySQL n'a pas été correctement placé dans le <em>classpath</em>. Vous pourrez d'ailleurs faire le test vous-mêmes lorsque nous passerons à la pratique, en retirant le driver que nous avons ajouté en tant que bibliothèque externe, et constater que cette ligne envoie bien une exception ! ;)</p><aside id="r-2136243" data-claire-element-id="2353284" data-claire-semantic="information"><p id="r-2136242" data-claire-element-id="2353283">Notez bien que dans la pratique, <strong>il est absolument inutile de charger le driver avant chaque connexion</strong>, une seule fois durant le chargement de l'application suffit ! Toutefois pour des raisons de simplicité, dans les exemples de ce chapitre nous ne nous préoccuperons pas de ce détail et chargerons le driver à chaque exécution de nos tests.</p></aside><p id="r-2136244" data-claire-element-id="2353285">Nous allons maintenant apprendre à communiquer avec une base de données. Pour ce faire, nous devons suivre le processus suivant :</p><ol id="r-2136253" data-claire-element-id="2353294"><li id="r-2136246" data-claire-element-id="2353287"><p id="r-2136245" data-claire-element-id="2353286">nous connecter à la base ;</p></li><li id="r-2136248" data-claire-element-id="2353289"><p id="r-2136247" data-claire-element-id="2353288">créer et exécuter une requête SQL ;</p></li><li id="r-2136250" data-claire-element-id="2353291"><p id="r-2136249" data-claire-element-id="2353290">analyser son résultat ;</p></li><li id="r-2136252" data-claire-element-id="2353293"><p id="r-2136251" data-claire-element-id="2353292">fermer les différentes ressources mises en jeu.</p></li></ol><p id="r-2136254" data-claire-element-id="2353295">Sans plus attendre, découvrons tout cela en détail !</p><h3 id="r-624140" data-claire-element-id="2838076">Connexion à la base, création et exécution d'une requête</h3><p id="r-2136255" data-claire-element-id="2353297">Le contenu qui va suivre est assez dense, mais il faut bien passer par la théorie pour comprendre. Pas de panique si vous n'assimilez pas tout ce que je vous présente ici, la partie suivante de ce chapitre est entièrement consacrée à la pratique ! Nous allons commencer par étudier la syntaxe et les objets à mettre en œuvre, puis nous appliquerons ensuite tout cela à travers un petit scénario de tests.</p><h4 id="r-2136330" data-claire-element-id="2838060">Connexion à la base de données</h4><h5 id="r-2136269" data-claire-element-id="2353311">Identification de l'URL</h5><p id="r-2136256" data-claire-element-id="2353298">Pour nous connecter à la base de données MySQL depuis notre application Java, nous avons besoin d'une URL spécifique à JDBC, qui respecte la syntaxe générale suivante :</p><pre id="r-2136257" data-claire-element-id="2353299"><code data-claire-semantic="URL">jdbc:mysql://nomhote:port/nombdd</code></pre><p id="r-2136258" data-claire-element-id="2353300">Dans cette adresse, vous remarquez plusieurs sections :</p><ul id="r-2136265" data-claire-element-id="2353307"><li id="r-2136260" data-claire-element-id="2353302"><p id="r-2136259" data-claire-element-id="2353301"><strong>nomhote</strong> : le nom de l'hôte sur lequel le serveur MySQL est installé. S'il est en place sur la même machine que l'application Java exécutée, alors vous pouvez simplement spécifier <strong>localhost</strong>. Cela peut également être une adresse IP comme 127.0.0.1. Au passage, si vous rencontrez des problèmes de connectivité en spécifiant <strong>localhost</strong> et que l'utilisation de <strong>127.0.0.1</strong> à la place les résout, alors vous avez un souci de configuration réseau (DNS, hosts, etc.) ;</p></li><li id="r-2136262" data-claire-element-id="2353304"><p id="r-2136261" data-claire-element-id="2353303"><strong>port</strong> : le port TCP/IP écouté par votre serveur MySQL. Par défaut, il s'agit du port <strong>3306</strong> ;</p></li><li id="r-2136264" data-claire-element-id="2353306"><p id="r-2136263" data-claire-element-id="2353305"><strong>nombdd</strong> : le nom de la base de données à laquelle vous souhaitez vous connecter. En l'occurrence, il s'agira pour nous de <strong>bdd_sdzee</strong>.</p></li></ul><p id="r-2136266" data-claire-element-id="2353308">Ainsi, puisque notre serveur MySQL est installé sur le même poste que notre serveur d'applications, l'URL finale sera dans notre cas :</p><pre id="r-2136267" data-claire-element-id="2353309"><code data-claire-semantic="URL">jdbc:mysql://localhost:3306/bdd_sdzee</code></pre><p id="r-2136268" data-claire-element-id="2353310">Étudions maintenant la mise en place de la connexion entre notre application et notre base.</p><h5 id="r-2136329" data-claire-element-id="2838059">Établissement de la connexion</h5><p id="r-2136270" data-claire-element-id="2353312">Après le chargement du driver, nous pouvons tenter d'établir une connexion avec notre base de données :</p><pre id="r-2136271" data-claire-element-id="2838058"><code data-claire-semantic="java">/* Connexion à la base de données */
String url = &quot;jdbc:mysql://localhost:3306/bdd_sdzee&quot;;
String utilisateur = &quot;java&quot;;
String motDePasse = &quot;$dZ_£E&quot;;
Connection connexion = null;
try {
    connexion = DriverManager.getConnection( url, utilisateur, motDePasse );

    /* Ici, nous placerons nos requêtes vers la BDD */
    /* ... */

} catch ( SQLException e ) {
    /* Gérer les éventuelles erreurs ici */
} finally {
    if ( connexion != null )
        try {
            /* Fermeture de la connexion */
            connexion.close();
        } catch ( SQLException ignore ) {
            /* Si une erreur survient lors de la fermeture, il suffit de l'ignorer. */
        }
}</code></pre><p id="r-2136272" data-claire-element-id="2353314">L'établissement d'une connexion s'effectue à travers l'objet <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/DriverManager.html">DriverManager</a></code>. Il suffit d'appeler sa méthode statique <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/DriverManager.html#getConnection%28java.lang.String,%20java.lang.String,%20java.lang.String%29">getConnection()</a></code> pour récupérer un objet de type <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html">Connection</a></code>. Comme vous pouvez le voir ici, celle-ci prend en argument l'adresse de la base de données, le nom d'utilisateur et le mot de passe associé.</p><p id="r-2136273" data-claire-element-id="2353315">L'appel à cette méthode peut retourner des erreurs de type <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/SQLException.html">SQLException</a></code> :</p><ul id="r-2136278" data-claire-element-id="2353320"><li id="r-2136275" data-claire-element-id="2353317"><p id="r-2136274" data-claire-element-id="2353316">si une erreur <strong>SQLException: No suitable driver</strong> est envoyée, alors cela signifie que le driver JDBC n'a pas été chargé ou que l'URL n'a été reconnue par aucun des drivers chargés par votre application ;</p></li><li id="r-2136277" data-claire-element-id="2353319"><p id="r-2136276" data-claire-element-id="2353318">si une erreur <strong>SQLException: Connection refused</strong> ou <strong>Connection timed out</strong> ou encore <strong>CommunicationsException: Communications link failure</strong> est envoyée, alors cela signifie que la base de données n'est pas joignable.</p></li></ul><p id="r-2136279" data-claire-element-id="2353321">Si un de ces derniers cas survient, vous trouverez ci-dessous une liste des causes possibles et les pistes de résolution associées :</p><table id="r-2136322" data-claire-element-id="2353364"><thead id="r-2136285" data-claire-element-id="2353327"><tr id="r-2136284" data-claire-element-id="2353326"><th id="r-2136281" data-claire-element-id="2353323"><p id="r-2136280" data-claire-element-id="2353322">Cause éventuelle</p></th><th id="r-2136283" data-claire-element-id="2353325"><p id="r-2136282" data-claire-element-id="2353324">Piste de résolution</p></th></tr></thead><tbody id="r-2136321" data-claire-element-id="2353363"><tr id="r-2136290" data-claire-element-id="2353332"><td id="r-2136287" data-claire-element-id="2353329"><p id="r-2136286" data-claire-element-id="2353328">Le serveur MySQL est éteint ?</p></td><td id="r-2136289" data-claire-element-id="2353331"><p id="r-2136288" data-claire-element-id="2353330">Démarrez le serveur MySQL...</p></td></tr><tr id="r-2136295" data-claire-element-id="2353337"><td id="r-2136292" data-claire-element-id="2353334"><p id="r-2136291" data-claire-element-id="2353333">Le numéro de port dans l'URL est manquant ou incorrect ?</p></td><td id="r-2136294" data-claire-element-id="2353336"><p id="r-2136293" data-claire-element-id="2353335">Ouvrez le fichier de configuration <strong>my.cnf</strong> de votre serveur MySQL, et vérifiez le port qui y est spécifié.</p></td></tr><tr id="r-2136300" data-claire-element-id="2353342"><td id="r-2136297" data-claire-element-id="2353339"><p id="r-2136296" data-claire-element-id="2353338">Le nom d'hôte ou l'adresse IP dans l'URL est incorrect(e) ?</p></td><td id="r-2136299" data-claire-element-id="2353341"><p id="r-2136298" data-claire-element-id="2353340">Testez la connectivité en effectuant un simple <code>ping</code>.</p></td></tr><tr id="r-2136305" data-claire-element-id="2353347"><td id="r-2136302" data-claire-element-id="2353344"><p id="r-2136301" data-claire-element-id="2353343">Le serveur MySQL n'accepte pas de connexions TCP/IP ?</p></td><td id="r-2136304" data-claire-element-id="2353346"><p id="r-2136303" data-claire-element-id="2353345">Vérifiez que MySQL a été lancé sans l'option <code>--skip-networking</code>.</p></td></tr><tr id="r-2136310" data-claire-element-id="2353352"><td id="r-2136307" data-claire-element-id="2353349"><p id="r-2136306" data-claire-element-id="2353348">Il n'y a plus aucune connexion disponible sur le serveur MySQL ?</p></td><td id="r-2136309" data-claire-element-id="2353351"><p id="r-2136308" data-claire-element-id="2353350">Redémarrez MySQL, et corrigez le code de votre application pour qu'il libère les connexions efficacement.</p></td></tr><tr id="r-2136315" data-claire-element-id="2353357"><td id="r-2136312" data-claire-element-id="2353354"><p id="r-2136311" data-claire-element-id="2353353">Quelque chose entre l'application Java et le serveur MySQL bloque la connexion, comme un pare-feu ou un proxy ?</p></td><td id="r-2136314" data-claire-element-id="2353356"><p id="r-2136313" data-claire-element-id="2353355">Configurez votre pare-feu et/ou proxy pour qu'il(s) autorise(nt) le port écouté par votre serveur MySQL.</p></td></tr><tr id="r-2136320" data-claire-element-id="2353362"><td id="r-2136317" data-claire-element-id="2353359"><p id="r-2136316" data-claire-element-id="2353358">Le nom d'hôte dans l'URL n'est pas reconnu par votre serveur DNS local ?</p></td><td id="r-2136319" data-claire-element-id="2353361"><p id="r-2136318" data-claire-element-id="2353360">Utilisez l'adresse IP dans l'URL au lieu du nom d'hôte, ou actualisez si possible votre DNS.</p></td></tr></tbody></table><p id="r-2136323" data-claire-element-id="2353365">Enfin, peu importe que la connexion ait réussi ou non, retenez bien que sa fermeture dans un bloc <code>finally</code> est extrêmement importante !</p><aside id="r-2136325" data-claire-element-id="2353367" data-claire-semantic="warning"><p id="r-2136324" data-claire-element-id="2353366">Si vous ne fermez pas les connexions que vous ouvrez, et en gardez un grand nombre ouvertes sur une courte période, le serveur risque d'être saturé et de ne plus accepter aucune nouvelle connexion ; votre application risque alors de planter.</p></aside><aside id="r-2136327" data-claire-element-id="2353369" data-claire-semantic="information"><p id="r-2136326" data-claire-element-id="2353368">La bonne pratique à suivre est de toujours ouvrir et fermer la connexion le plus finement possible, c'est-à-dire au plus près de l'exécution de vos requêtes, dans un ensemble <code>try-catch-finally</code>. Cela permet de s'assurer qu'aucune connexion n'est ouverte ni ne reste ouverte inutilement. La mise en place d'un bloc <code>finally</code> permet de s'assurer que la connexion sera fermée quoi qu'il arrive en cours de route.</p></aside><p id="r-2136328" data-claire-element-id="2353370">Nous n'allons pas entrer dans les détails pour le moment, puisque nous n'en sommes qu'au début de notre apprentissage, mais sachez d'ores et déjà que l'ouverture d'une connexion a un coût non négligeable en termes de performances. Dans une application très fréquentée, il devient hors de question de procéder à des ouvertures/fermetures à chaque requête effectuée, cela reviendrait à signer l'arrêt de mort de votre serveur ! Nous y reviendrons en temps voulu, pas d'inquiétudes. :)</p><h4 id="r-2136333" data-claire-element-id="2838062">Création d'une requête</h4><p id="r-2136331" data-claire-element-id="2353373">Avant de pouvoir créer des instructions SQL, vous devez tout d'abord créer un objet de type <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html">Statement</a></code>. Si vous parcourez sa documentation, vous constaterez qu'il s'agit en réalité d'une interface dont le rôle est de permettre l'exécution de requêtes. Pour initialiser cet objet, rien de plus simple, il suffit d'appeler la méthode <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#createStatement%28%29">createStatement()</a></code> de l'objet <code>Connection</code> précédemment obtenu ! Donc si nous reprenons notre exemple, juste après l'établissement de la connexion dans notre bloc <code>try</code>, nous devons ajouter le code suivant :</p><pre id="r-2136332" data-claire-element-id="2838061"><code data-claire-semantic="java">/* Création de l'objet gérant les requêtes */
Statement statement = connexion.createStatement();</code></pre><h4 id="r-2136350" data-claire-element-id="2838067">Exécution de la requête</h4><p id="r-2136334" data-claire-element-id="2353376">Une fois l'objet <code>Statement</code> initialisé, il devient alors possible d'exécuter une requête. Pour ce faire, celui-ci met à votre disposition toute une série de méthodes, notamment les deux suivantes :</p><ul id="r-2136339" data-claire-element-id="2353381"><li id="r-2136336" data-claire-element-id="2353378"><p id="r-2136335" data-claire-element-id="2353377"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeQuery%28java.lang.String%29">executeQuery()</a></code> : cette méthode est dédiée à la lecture de données via une requête de type <code>SELECT</code> ;</p></li><li id="r-2136338" data-claire-element-id="2353380"><p id="r-2136337" data-claire-element-id="2353379"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29">executeUpdate()</a></code> : cette méthode est réservée à l'exécution de requêtes ayant un effet sur la base de données (écriture ou suppression), typiquement les requêtes de type <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>, etc.</p></li></ul><p id="r-2136340" data-claire-element-id="2353382">En outre, il existe des variantes de chaque méthode prenant en compte d'autres arguments, ainsi que deux autres méthodes nommées <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#execute%28java.lang.String%29">execute()</a></code> et <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeBatch%28%29">executeBatch()</a></code>. Nous n'allons pas nous attarder sur les subtilités mises en jeu, je vous laisse le soin de lire la documentation de l'objet <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html">Statement</a></code> si vous souhaitez en savoir davantage.</p><h5 id="r-2136344" data-claire-element-id="2838064">Exécution d'une requête de lecture</h5><p id="r-2136341" data-claire-element-id="2353383">En parcourant la documentation de la méthode <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeQuery%28java.lang.String%29">executeQuery()</a></code>, nous apprenons qu'elle retourne un objet de type <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html">ResultSet</a></code> contenant le résultat de la requête. Voici donc un exemple effectuant un <code>SELECT</code> sur notre table d'utilisateurs :</p><pre id="r-2136342" data-claire-element-id="2838063"><code data-claire-semantic="java">/* Exécution d'une requête de lecture */
ResultSet resultat = statement.executeQuery( &quot;SELECT id, email, mot_de_passe, nom  FROM Utilisateur;&quot; );</code></pre><p id="r-2136343" data-claire-element-id="2353385">Avant d'apprendre à récupérer et analyser le résultat retourné par cet appel, regardons comment effectuer une requête d'écriture dans la base.</p><h5 id="r-2136349" data-claire-element-id="2838066">Exécution d'une requête d'écriture</h5><p id="r-2136345" data-claire-element-id="2353387">En parcourant cette fois la documentation de la méthode <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29">executeUpdate()</a></code>, nous apprenons qu'elle retourne un entier représentant le nombre de lignes affectées par la requête réalisée. Si par exemple vous réalisez une insertion de données via un <code>INSERT</code>, cette méthode retournera 0 en cas d'échec et 1 en cas de succès. Si vous réalisez une mise à jour via un <code>UPDATE</code>, cette méthode retournera le nombre de lignes mises à jour. Idem en cas d'une suppression via un <code>DELETE</code>, etc.</p><p id="r-2136346" data-claire-element-id="2353388">Je vous propose ici un exemple effectuant un <code>INSERT</code> sur notre table d'utilisateurs :</p><pre id="r-2136347" data-claire-element-id="2838065"><code data-claire-semantic="java">/* Exécution d'une requête d'écriture */
int statut = statement.executeUpdate( &quot;INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) VALUES ('jmarc@mail.fr', MD5('lavieestbelle78'), 'jean-marc', NOW());&quot; );</code></pre><p id="r-2136348" data-claire-element-id="2353390">Avant de pouvoir tester ces deux méthodes, il nous faut encore découvrir comment manipuler les résultats retournés.</p><h4 id="r-2136394" data-claire-element-id="2838073">Accès aux résultats de la requête</h4><h5 id="r-2136382" data-claire-element-id="2838070">Retour d'une requête de lecture</h5><p id="r-2136351" data-claire-element-id="2353393">Je vous l'ai déjà soufflé, l'exécution d'une requête de lecture via la méthode <code>statement.executeQuery()</code> retourne un objet de type <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html">ResultSet</a></code>. Vous pouvez le voir comme un tableau, qui contient les éventuelles données retournées par la base de données sous forme de lignes. Pour accéder à ces lignes de données, vous avez à votre disposition un curseur, que vous pouvez déplacer de ligne en ligne. Notez bien qu'il ne s'agit pas d'un <a href="http://www.siteduzero.com/tutoriel-3-660123-gestionnaires-d-erreurs-curseurs-et-utilisation-avancee.html#ss_part_2">curseur au sens base de données du terme</a>, mais bien d'un curseur propre à l'objet <code>ResultSet</code>. Voyons cela dans un exemple, puis commentons :</p><pre id="r-2136352" data-claire-element-id="2838068"><code data-claire-semantic="java">/* Exécution d'une requête de lecture */
ResultSet resultat = statement.executeQuery( &quot;SELECT id, email, mot_de_passe, nom  FROM Utilisateur;&quot; );

/* Récupération des données du résultat de la requête de lecture */
while ( resultat.next() ) {
    int idUtilisateur = resultat.getInt( &quot;id&quot; );
    String emailUtilisateur = resultat.getString( &quot;email&quot; );
    String motDePasseUtilisateur = resultat.getString( &quot;mot_de_passe&quot; );
    String nomUtilisateur = resultat.getString( &quot;nom&quot; );

    /* Traiter ici les valeurs récupérées. */
}</code></pre><p id="r-2136353" data-claire-element-id="2353395">Pour commencer, à la ligne 2 nous récupérons le retour de l'appel à la méthode <code>statement.executeQuery()</code> dans un objet <code>ResultSet</code>.</p><p id="r-2136354" data-claire-element-id="2353396">Ensuite, afin de pouvoir accéder aux lignes contenues dans cet objet, nous effectuons un appel à la méthode <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#next%28%29">next()</a></code>, qui permet de déplacer le curseur à la ligne suivante. Elle retourne un booléen, initialisé à <code>true</code> tant qu'il reste des données à parcourir.</p><div id="r-2136356" data-claire-element-id="2353398" data-claire-semantic="question"><p id="r-2136355" data-claire-element-id="2353397">Pourquoi ne lisons-nous pas la première ligne avant de déplacer le curseur à la ligne suivante ?</p></div><p id="r-2136357" data-claire-element-id="2353399">Tout simplement parce que lors de la création d'un objet <code>ResultSet</code>, son curseur est par défaut positionné <strong>avant</strong> la première ligne de données. Ainsi, il est nécessaire de se déplacer d'un cran vers l'avant pour pouvoir commencer à lire les données contenues dans l'objet.</p><aside id="r-2136359" data-claire-element-id="2353401" data-claire-semantic="warning"><p id="r-2136358" data-claire-element-id="2353400">Si vous essayez de lire des données avant d'avoir déplacé le curseur, votre code enverra une <code>SQLException</code>.</p></aside><p id="r-2136360" data-claire-element-id="2353402">Une fois le curseur positionné correctement, il ne nous reste plus qu'à récupérer les contenus des différents champs via une des nombreuses méthodes de récupération proposées par l'objet <code>ResultSet</code>. Je ne vais pas vous en faire la liste exhaustive, je vous laisse parcourir la documentation pour les découvrir en intégralité. Sachez simplement qu'il en existe une par type de données récupérables :</p><ul id="r-2136369" data-claire-element-id="2353411"><li id="r-2136362" data-claire-element-id="2353404"><p id="r-2136361" data-claire-element-id="2353403">une méthode <code>resultat.getInt()</code> pour récupérer un entier ;</p></li><li id="r-2136364" data-claire-element-id="2353406"><p id="r-2136363" data-claire-element-id="2353405">une méthode <code>resultat.getString()</code> pour récupérer une chaîne de caractères ;</p></li><li id="r-2136366" data-claire-element-id="2353408"><p id="r-2136365" data-claire-element-id="2353407">une méthode <code>resultat.getBoolean()</code> pour récupérer un booléen ;</p></li><li id="r-2136368" data-claire-element-id="2353410"><p id="r-2136367" data-claire-element-id="2353409">etc.</p></li></ul><p id="r-2136370" data-claire-element-id="2353412">Chacune de ces méthodes existe sous deux formes différentes :</p><ul id="r-2136375" data-claire-element-id="2353417"><li id="r-2136372" data-claire-element-id="2353414"><p id="r-2136371" data-claire-element-id="2353413">soit elle prend en argument le nom du champ visé dans la table de la base de données ;</p></li><li id="r-2136374" data-claire-element-id="2353416"><p id="r-2136373" data-claire-element-id="2353415">soit elle prend en argument l'index du champ visé dans la table de la base de données.</p></li></ul><p id="r-2136376" data-claire-element-id="2353418">En l’occurrence, nous avons ici utilisé le nom des champs : <code>&quot;id&quot;</code>, <code>&quot;email&quot;</code>, <code>&quot;mot_de_passe&quot;</code> et <code>&quot;nom&quot;</code>. Si nous avions voulu utiliser leurs index, alors nous aurions dû remplacer les lignes 6 à 9 du code précédent par :</p><pre id="r-2136377" data-claire-element-id="2838069"><code data-claire-semantic="java">int idUtilisateur = resultat.getInt( 1 );
String emailUtilisateur = resultat.getString( 2 );
String motDePasseUtilisateur = resultat.getString( 3 );
String nomUtilisateur = resultat.getString( 4 );</code></pre><p id="r-2136378" data-claire-element-id="2353420">En effet, la colonne nommée <code>&quot;id&quot;</code> est bien la colonne n°1 de notre table, <code>&quot;email&quot;</code> la colonne n°2, etc.</p><aside id="r-2136380" data-claire-element-id="2353422" data-claire-semantic="warning"><p id="r-2136379" data-claire-element-id="2353421">Peu importe que vous utilisiez l'index ou le nom des champs, vous devez vous assurer qu'ils existent bel et bien dans la table. Si vous précisez un nom de champ qui n'existe pas, ou un index de champ qui dépasse l'index de la dernière colonne, alors la méthode de récupération vous enverra une <code>SQLException</code>.</p></aside><p id="r-2136381" data-claire-element-id="2353423">Dernière information importante : afin de parcourir toutes les lignes de données renvoyées dans le résultat de la requête, il est nécessaire de boucler sur l'appel à la méthode de déplacement du curseur. Lorsque ce curseur atteindra la dernière ligne contenue dans l'objet, la méthode <code>resultat.next()</code> renverra <code>false</code>, et nous sortirons ainsi automatiquement de notre boucle une fois le parcours des données achevé.</p><h5 id="r-2136393" data-claire-element-id="2838072">Retour d'une requête d'écriture</h5><p id="r-2136383" data-claire-element-id="2353425">Lorsque vous effectuez une modification sur une table de votre base de données via la méthode <code>statement.executeUpdate()</code>, celle-ci renvoie des informations différentes selon le type de la requête effectuée :</p><ul id="r-2136390" data-claire-element-id="2353432"><li id="r-2136385" data-claire-element-id="2353427"><p id="r-2136384" data-claire-element-id="2353426">l'exécution d'un <code>INSERT</code> renvoie 0 en cas d'échec de la requête d'insertion, et 1 en cas de succès ;</p></li><li id="r-2136387" data-claire-element-id="2353429"><p id="r-2136386" data-claire-element-id="2353428">l'exécution d'un <code>UPDATE</code> ou d'un <code>DELETE</code> renvoie le nombre de lignes respectivement mises à jour ou supprimées ;</p></li><li id="r-2136389" data-claire-element-id="2353431"><p id="r-2136388" data-claire-element-id="2353430">l'exécution d'un <code>CREATE</code>, ou de toute autre requête ne retournant rien, renvoie 0.</p></li></ul><p id="r-2136391" data-claire-element-id="2353433">Voici par exemple comment récupérer le statut d'une requête d'insertion de données :</p><pre id="r-2136392" data-claire-element-id="2838071"><code data-claire-semantic="java">/* Exécution d'une requête d'écriture */
int statut = statement.executeUpdate( &quot;INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) VALUES ('jmarc@mail.fr', MD5('lavieestbelle78'), 'jean-marc', NOW());&quot; );</code></pre><h4 id="r-2136400" data-claire-element-id="2838075">Libération des ressources</h4><p id="r-2136395" data-claire-element-id="2353437">Tout comme il est nécessaire de fermer proprement une connexion ouverte, il est extrêmement recommandé de disposer proprement des objets <code>Statement</code> et <code>ResultSet</code> initialisés au sein d'une connexion :</p><pre id="r-2136396" data-claire-element-id="2838074"><code data-claire-semantic="java">Connection connexion = null;
Statement statement = null;
ResultSet resultat = null;
try {
    /* 
     * Ouverture de la connexion, initialisation d'un Statement, initialisation d'un ResultSet, etc.
     */
} catch ( SQLException e ) {
    /* Traiter les erreurs éventuelles ici. */
} finally {
    if ( resultat != null ) {
        try {
            /* On commence par fermer le ResultSet */
            resultat.close();
        } catch ( SQLException ignore ) {
        }
    }
    if ( statement != null ) {
        try {
            /* Puis on ferme le Statement */
            statement.close();
        } catch ( SQLException ignore ) {
        }
    }
    if ( connexion != null ) {
        try {
            /* Et enfin on ferme la connexion */
            connexion.close();
        } catch ( SQLException ignore ) {
        }
    }
}</code></pre><p id="r-2136397" data-claire-element-id="2353439">Ceux-ci doivent obligatoirement être fermés, du plus récemment ouvert au plus ancien. Ainsi il faut commencer par fermer le <code>ResultSet</code>, puis le <code>Statement</code> et enfin l'objet <code>Connection</code>. Les exceptions éventuelles, envoyées en cas de ressources déjà fermées ou non disponibles, peuvent être ignorées comme c'est le cas dans ce code d'exemple. Vous pouvez bien évidemment choisir de les prendre en compte, par exemple en les enregistrant dans un fichier de logs.</p><aside id="r-2136399" data-claire-element-id="2353441" data-claire-semantic="information"><p id="r-2136398" data-claire-element-id="2353440">Tout comme pour la connexion, ces ressources doivent être fermées au sein d'un bloc <code>finally</code> afin de s'assurer que, quoiqu'il arrive en cours de route, les ressources soient proprement libérées.</p></aside><h3 id="r-624192" data-claire-element-id="2838088">Mise en pratique</h3><p id="r-2136401" data-claire-element-id="2353444">Nous venons d'étudier les étapes principales de la communication avec une base de données, qui pour rappel sont :</p><ol id="r-2136410" data-claire-element-id="2353453"><li id="r-2136403" data-claire-element-id="2353446"><p id="r-2136402" data-claire-element-id="2353445">la connexion à la base ;</p></li><li id="r-2136405" data-claire-element-id="2353448"><p id="r-2136404" data-claire-element-id="2353447">la création et l'exécution d'une requête SQL ;</p></li><li id="r-2136407" data-claire-element-id="2353450"><p id="r-2136406" data-claire-element-id="2353449">la récupération de son résultat ;</p></li><li id="r-2136409" data-claire-element-id="2353452"><p id="r-2136408" data-claire-element-id="2353451">la fermeture des différentes ressources mises en jeu.</p></li></ol><p id="r-2136411" data-claire-element-id="2353454">Il est maintenant temps de pratiquer, en utilisant le bac à sable que nous avons mis en place.</p><h4 id="r-2136430" data-claire-element-id="2838080">Afficher le contenu de la table Utilisateur</h4><p id="r-2136412" data-claire-element-id="2353455">En premier lieu, nous allons effectuer une requête de type <code>SELECT</code> afin de récupérer ce que contient notre table <strong>Utilisateur</strong>. Voici le code à mettre en place dans la méthode <code>executerTests()</code> de notre objet <code>TestJDBC</code> :</p><pre id="r-2136413" data-claire-element-id="2838077"><code data-claire-semantic="java">public List&lt;String&gt; executerTests( HttpServletRequest request ) {
    /* Chargement du driver JDBC pour MySQL */
    try {
        messages.add( &quot;Chargement du driver...&quot; );
        Class.forName( &quot;com.mysql.jdbc.Driver&quot; );
        messages.add( &quot;Driver chargé !&quot; );
    } catch ( ClassNotFoundException e ) {
        messages.add( &quot;Erreur lors du chargement : le driver n'a pas été trouvé dans le classpath ! &lt;br/&gt;&quot;
                + e.getMessage() );
    }

    /* Connexion à la base de données */
    String url = &quot;jdbc:mysql://localhost:3306/bdd_sdzee&quot;;
    String utilisateur = &quot;java&quot;;
    String motDePasse = &quot;$dZ_£E&quot;;
    Connection connexion = null;
    Statement statement = null;
    ResultSet resultat = null;
    try {
        messages.add( &quot;Connexion à la base de données...&quot; );
        connexion = DriverManager.getConnection( url, utilisateur, motDePasse );
        messages.add( &quot;Connexion réussie !&quot; );

        /* Création de l'objet gérant les requêtes */
        statement = connexion.createStatement();
        messages.add( &quot;Objet requête créé !&quot; );

        /* Exécution d'une requête de lecture */
        resultat = statement.executeQuery( &quot;SELECT id, email, mot_de_passe, nom FROM Utilisateur;&quot; );
        messages.add( &quot;Requête \&quot;SELECT id, email, mot_de_passe, nom FROM Utilisateur;\&quot; effectuée !&quot; );
 
        /* Récupération des données du résultat de la requête de lecture */
        while ( resultat.next() ) {
            int idUtilisateur = resultat.getInt( &quot;id&quot; );
            String emailUtilisateur = resultat.getString( &quot;email&quot; );
            String motDePasseUtilisateur = resultat.getString( &quot;mot_de_passe&quot; );
            String nomUtilisateur = resultat.getString( &quot;nom&quot; );
            /* Formatage des données pour affichage dans la JSP finale. */
            messages.add( &quot;Données retournées par la requête : id = &quot; + idUtilisateur + &quot;, email = &quot; + emailUtilisateur
                    + &quot;, motdepasse = &quot;
                    + motDePasseUtilisateur + &quot;, nom = &quot; + nomUtilisateur + &quot;.&quot; );
        }
    } catch ( SQLException e ) {
        messages.add( &quot;Erreur lors de la connexion : &lt;br/&gt;&quot;
                + e.getMessage() );
    } finally {
        messages.add( &quot;Fermeture de l'objet ResultSet.&quot; );
        if ( resultat != null ) {
            try {
                resultat.close();
            } catch ( SQLException ignore ) {
            }
        }
        messages.add( &quot;Fermeture de l'objet Statement.&quot; );
        if ( statement != null ) {
            try {
                statement.close();
            } catch ( SQLException ignore ) {
            }
        }
        messages.add( &quot;Fermeture de l'objet Connection.&quot; );
        if ( connexion != null ) {
            try {
                connexion.close();
            } catch ( SQLException ignore ) {
            }
        }
    }

    return messages;
}</code></pre><p id="r-2136414" data-claire-element-id="2353457">Vous retrouvez ici sans surprise les étapes que nous avons découvertes et analysées précédemment. Les lignes 28 à 42 correspondent à l'exécution de la requête <code>SELECT</code> et à la récupération de son résultat.</p><p id="r-2136415" data-claire-element-id="2353458">Vous pouvez remarquer l'utilisation de la liste <strong>messages</strong> que nous avions mise en place lors de la création de notre bac à sable. Nous y insérons ici, et y insérerons dans la suite de nos exemples, tous les messages indiquant les résultats et erreurs de nos tests. À chaque nouvel essai, il nous suffira alors d'accéder à l'URL de la servlet, qui je le rappelle est <a href="http://localhost:8080/pro/testjdbc">http://localhost:8080/pro/testjdbc</a>, pour que notre JSP finale nous affiche le contenu de cette liste et nous permette ainsi de suivre simplement la progression au sein du code.</p><p id="r-2136416" data-claire-element-id="2353459">Une fois ce code mis en place, il ne vous reste plus qu'à démarrer votre serveur Tomcat si ce n'est pas déjà fait, et à accéder à l'URL de test. Vous pourrez alors visualiser toutes les informations placées dans la liste <strong>messages</strong>, qui est je vous le rappelle parcourue par notre page JSP. Vous obtiendrez le résultat affiché à la figure suivante si vous avez correctement préparé votre base de données et si vous avez démarré votre serveur SQL.</p><figure id="r-2136419" data-claire-element-id="2838079"><img id="r-2136417" data-claire-element-id="2353460" src="../../../user.oc-static.com/files/390001_391000/390121.png" alt="Image utilisateur" /></figure><p id="r-2136420" data-claire-element-id="2353463">Tout fonctionne comme prévu, notre application a réussi à :</p><ul id="r-2136429" data-claire-element-id="2353472"><li id="r-2136422" data-claire-element-id="2353465"><p id="r-2136421" data-claire-element-id="2353464">charger le driver ;</p></li><li id="r-2136424" data-claire-element-id="2353467"><p id="r-2136423" data-claire-element-id="2353466">se connecter à la base de données avec le compte utilisateur que nous y avions créé ;</p></li><li id="r-2136426" data-claire-element-id="2353469"><p id="r-2136425" data-claire-element-id="2353468">effectuer une requête de sélection et récupérer son résultat ;</p></li><li id="r-2136428" data-claire-element-id="2353471"><p id="r-2136427" data-claire-element-id="2353470">fermer les ressources.</p></li></ul><h4 id="r-2136451" data-claire-element-id="2838087">Insérer des données dans la table Utilisateur</h4><p id="r-2136431" data-claire-element-id="2353474">Le principe est sensiblement le même que pour une requête de lecture ; il suffit d'utiliser un appel à <code>statement.executeUpdate()</code> à la place d'un appel à <code>statement.executeQuery()</code>. Dans notre exemple, nous allons insérer des données d'exemple dans la table <strong>Utilisateur</strong>, puis effectuer une requête de lecture pour visualiser le contenu de la table après insertion. Pour ce faire, il faut simplement ajouter le code suivant, <strong>juste avant</strong> les lignes 28 à 42 du code précédent :</p><pre id="r-2136432" data-claire-element-id="2838081"><code data-claire-semantic="java">/* Exécution d'une requête d'écriture */
int statut = statement.executeUpdate( &quot;INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) VALUES ('jmarc@mail.fr', MD5('lavieestbelle78'), 'jean-marc', NOW());&quot; );

/* Formatage pour affichage dans la JSP finale. */
messages.add( &quot;Résultat de la requête d'insertion : &quot; + statut + &quot;.&quot; );</code></pre><p id="r-2136433" data-claire-element-id="2353476">Nous récupérons ici le retour de la requête <code>INSERT</code> dans l'entier <strong>statut</strong>, qui pour rappel vaut 1 en cas de succès de l'insertion et 0 en cas d'échec, et le stockons dans la liste <strong>messages</strong> pour affichage final dans notre JSP.</p><p id="r-2136434" data-claire-element-id="2353477">Accédez à nouveau à la page de test depuis votre navigateur, et constatez le résultat à la figure suivante.</p><figure id="r-2136437" data-claire-element-id="2838083"><img id="r-2136435" data-claire-element-id="2353478" src="../../../user.oc-static.com/files/390001_391000/390315.png" alt="Image utilisateur" /></figure><p id="r-2136438" data-claire-element-id="2353481">La requête de sélection retourne bien une ligne supplémentaire, et il s'agit bien des données que nous venons d'insérer. Seulement il nous manque un petit quelque chose...</p><div id="r-2136440" data-claire-element-id="2353483" data-claire-semantic="question"><p id="r-2136439" data-claire-element-id="2353482">Comment récupérer l'id auto-généré par la table lors de l'insertion d'une ligne ?</p></div><p id="r-2136441" data-claire-element-id="2353484">Dans l'exemple, nous pouvons observer que l'id de la nouvelle ligne insérée vaut 3 parce que nous effectuons un <code>SELECT</code> par la suite, mais dans une vraie application nous n'allons pas nous amuser à effectuer une requête de lecture après chaque insertion simplement pour récupérer cette information ! Le problème, c'est que la méthode <code>executeUpdate()</code> ne retourne pas cette valeur, elle retourne seulement un entier dont la valeur indique le succès ou non de l'insertion.</p><p id="r-2136442" data-claire-element-id="2353485">Eh bien rassurez-vous, car il existe <a href="http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String,%20int%29">une variante de la méthode <code>executeUpdate()</code></a> qui remplit exactement cette fonction ! Regardez sa documentation, vous observerez qu'elle prend un argument supplémentaire en plus de la requête SQL à effectuer. Il s'agit d'un entier qui peut prendre uniquement deux valeurs, qui sont définies par les deux constantes <code>Statement.RETURN_GENERATED_KEYS</code> et <code>Statement.NO_GENERATED_KEYS</code> (qui en réalité valent respectivement 1 et 2). Leurs noms parlent d'eux-mêmes : la première permet la récupération de l'id généré, et la seconde ne le permet pas.<br /> Mais attention, il ne suffit pas de passer la valeur <code>Statement.RETURN_GENERATED_KEYS</code> en tant que second argument à la méthode <code>executeUpdate()</code> pour qu'elle se mette à retourner l'id souhaité. Non, la méthode continue à ne retourner qu'un simple entier indiquant le succès ou non de l'insertion. Ce qui change par contre, c'est qu'il devient alors possible de récupérer un <code>ResultSet</code>, le même objet que celui utilisé pour récupérer le retour d'une requête de lecture. Voyez plutôt :</p><pre id="r-2136443" data-claire-element-id="2838084"><code data-claire-semantic="java">/* Exécution d'une requête d'écriture avec renvoi de l'id auto-généré */
int statut = statement.executeUpdate( &quot;INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) VALUES ('jmarc2@mail.fr', MD5('lavieestbelle78'), 'jean-marc', NOW());&quot; , Statement.RETURN_GENERATED_KEYS);

/* Formatage pour affichage dans la JSP finale. */
messages.add( &quot;Résultat de la requête d'insertion : &quot; + statut + &quot;.&quot; );

/* Récupération de l'id auto-généré par la requête d'insertion. */
resultat = statement.getGeneratedKeys();
/* Parcours du ResultSet et formatage pour affichage de la valeur qu'il contient dans la JSP finale. */
while ( resultat.next() ) {
    messages.add( &quot;ID retourné lors de la requête d'insertion :&quot; + resultat.getInt( 1 ) );
}</code></pre><p id="r-2136444" data-claire-element-id="2353487">En remplaçant la requête d'insertion précédente par ce nouvel appel, vous obtiendrez alors cette ligne (voir figure suivante) parmi les messages affichés.</p><figure id="r-2136447" data-claire-element-id="2838086"><img id="r-2136445" data-claire-element-id="2353488" src="../../../user.oc-static.com/files/396001_397000/396565.png" alt="Image utilisateur" /></figure><p id="r-2136448" data-claire-element-id="2353491">Vous observez que l'id créé par MySQL pour l'entrée insérée en base est bien présent dans le <code>ResultSet</code> retourné par <code>statement.getGeneratedKeys()</code> !</p><aside id="r-2136450" data-claire-element-id="2353493" data-claire-semantic="warning"><p id="r-2136449" data-claire-element-id="2353492">Si vous n'obtenez pas ces résultats et/ou si votre code génère des exceptions, reportez-vous aux causes éventuelles et aux pistes de résolution exposées précédemment.</p></aside><h3 id="r-624262" data-claire-element-id="2838106">Les limites du système</h3><p id="r-2136452" data-claire-element-id="2353496">Nous sommes dorénavant capables d'interroger notre base de données, mais comme toujours, il y a un &quot;mais&quot; ! Dans notre mise en pratique, tout fonctionne à merveille, mais nous allons découvrir un cas d'utilisation qui peut poser de gros problèmes de sécurité.</p><h4 id="r-2136457" data-claire-element-id="2838090">Insérer des données saisies par l'utilisateur</h4><p id="r-2136453" data-claire-element-id="2353497">Reprenons notre exemple d'insertion de données précédent, mais cette fois au lieu d'insérer des données écrites en dur dans le code, nous allons confier à l'utilisateur la tâche de saisir ces données. Nous n'allons pas nous embêter à mettre en place un formulaire pour quelque chose d'aussi basique, nous allons nous contenter de paramètres placés directement dans l'URL de la requête. Concrètement, nous allons modifier légèrement le code de notre objet Java pour que lorsque le client saisit une URL de la forme <code>http://localhost:8080/pro/testjdbc?nom=aaa&amp;motdepasse=bbb&amp;email=ccc</code>, notre application soit capable de récupérer et utiliser les données ainsi transmises.</p><p id="r-2136454" data-claire-element-id="2353498">C'est très simple, il nous suffit pour cela de remplacer la ligne d'appel à la méthode <code>statement.executeUpdate()</code> par les lignes suivantes :</p><pre id="r-2136455" data-claire-element-id="2838089"><code data-claire-semantic="java">/* Récupération des paramètres d'URL saisis par l'utilisateur */
String paramEmail = request.getParameter( &quot;email&quot; );
String paramMotDePasse = request.getParameter( &quot;motdepasse&quot; );
String paramNom = request.getParameter( &quot;nom&quot; );

/* Exécution d'une requête d'écriture */
int statut = statement.executeUpdate( &quot;INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) &quot;
        + &quot;VALUES ('&quot; + paramEmail + &quot;', MD5('&quot; + paramMotDePasse + &quot;'), '&quot; + paramNom + &quot;', NOW());&quot; );</code></pre><p id="r-2136456" data-claire-element-id="2353500">Avec tout ce que nous avons codé dans les chapitres précédents, vous devez comprendre ces lignes aisément ! Nous récupérons ici simplement les paramètres d'URL via la méthode <code>request.getParameter()</code>, et les concaténons directement à notre <code>INSERT</code> pour former une requête valide.</p><h4 id="r-2136480" data-claire-element-id="2838096">Le problème des valeurs nulles</h4><p id="r-2136458" data-claire-element-id="2353502">Voyons pour commencer un premier inconvénient majeur avec cette technique. Afin de générer une requête valide, nous sommes obligés de préciser des paramètres dans l'URL d'appel de notre page de test. Si nous nous contentons d'appeler bêtement l'URL <code>http://localhost:8080/pro/testjdbc</code> sans paramètres, les appels aux méthodes <code>request.getParameter()</code> vont retourner des chaînes de caractères indéfinies, c'est-à-dire initialisées à <code>null</code>.</p><p id="r-2136459" data-claire-element-id="2353503">Si vous avez prêté attention à la requête <code>CREATE</code> que nous avions utilisée pour mettre en place notre table <strong>Utilisateur</strong> dans la base de données, vous devez vous souvenir que nous avions précisé une contrainte <code>NOT NULL</code> sur les champs <strong>nom</strong>, <strong>motdepasse</strong> et <strong>email</strong>. Ainsi, notre base de données doit nous retourner une erreur si nous tentons d'insérer des valeurs indéfinies dans la table <strong>Utilisateur</strong>.</p><p id="r-2136460" data-claire-element-id="2353504">Faites bêtement le test, et appelez votre URL de test sans paramètres. Vous observez alors au sein de la page affichée par votre JSP cette ligne (voir figure suivante).</p><figure id="r-2136463" data-claire-element-id="2838092"><img id="r-2136461" data-claire-element-id="2353505" src="../../../user.oc-static.com/files/390001_391000/390316.png" alt="Image utilisateur" /></figure><div id="r-2136465" data-claire-element-id="2353509" data-claire-semantic="question"><p id="r-2136464" data-claire-element-id="2353508">Que s'est-il passé ? Pourquoi est-ce qu'une ligne a été insérée avec des valeurs indéfinies ?</p></div><p id="r-2136466" data-claire-element-id="2353510">Ne soyez pas leurrés ici, les valeurs que vous avez insérées dans votre base ne valent pas <code>null</code> au sens Java du terme ! En réalité, les paramètres que vous récupérez dans votre application Java sont bien indéfinis, mais la construction de la requête par concaténation produit la chaîne suivante :</p><pre id="r-2136467" data-claire-element-id="2838093"><code data-claire-semantic="sql">INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) VALUES ('null',MD5('null'),'null',NOW());</code></pre><p id="r-2136468" data-claire-element-id="2353512">Ainsi, si des valeurs apparaissent comme étant égales à <code>null</code> ce n'est pas parce que la contrainte <code>NOT NULL</code> n'a pas été respectée, c'est parce que notre requête a été mal formée ! Alors que les champs <strong>email</strong> et <strong>nom</strong> devraient effectivement être indéfinis, ils sont ici initialisés avec le contenu <code>'null'</code> et la requête d'insertion fonctionne donc comme si ces champs étaient correctement renseignés. La requête correctement formée devrait être la suivante :</p><pre id="r-2136469" data-claire-element-id="2838094"><code data-claire-semantic="sql">INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) VALUES (null,MD5(null),null,NOW());</code></pre><p id="r-2136470" data-claire-element-id="2353514">Notez bien l'absence des apostrophes autour des <code>null</code>. Si notre base de données recevait une telle requête, elle la refuserait, car elle y détecterait correctement les valeurs indéfinies.</p><aside id="r-2136472" data-claire-element-id="2353516" data-claire-semantic="information"><p id="r-2136471" data-claire-element-id="2353515">Par ailleurs, vous remarquerez peut-être sur l'image que le champ <strong>mot_de_passe</strong> ne contient pas <code>'null'</code>. Cela provient tout simplement du fait que nous utilisons la fonction <code>MD5()</code> dans notre requête SQL, qui génère un <em>hash</em> de la chaîne contenant <code>'null'</code>. Si nous n'utilisions pas cette fonction, la valeur de ce champ serait, elle aussi, initialisée à <code>'null'</code> !</p></aside><div id="r-2136474" data-claire-element-id="2353518" data-claire-semantic="question"><p id="r-2136473" data-claire-element-id="2353517">Comment pallier ce problème d'insertion de valeurs &quot;nulles&quot; ?</p></div><p id="r-2136475" data-claire-element-id="2353519">Pour éviter ce désagrément, plusieurs solutions s'offrent à nous. La plus simple pour le moment, c'est de mettre en place une vérification dans le code de notre objet Java sur le retour de chaque appel à la méthode <code>request.getParameter()</code>, juste avant l'exécution de la requête. Voici ce que devient alors notre code :</p><pre id="r-2136476" data-claire-element-id="2838095"><code data-claire-semantic="java">/* Récupération des paramètres d'URL saisis par l'utilisateur */
String paramEmail = request.getParameter( &quot;email&quot; );
String paramMotDePasse = request.getParameter( &quot;motdepasse&quot; );
String paramNom = request.getParameter( &quot;nom&quot; );

if ( paramEmail != null &amp;&amp; paramMotDePasse != null &amp;&amp; paramNom != null ) {
    /* Exécution d'une requête d'écriture */
    int statut = statement.executeUpdate( &quot;INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) &quot;
            + &quot;VALUES ('&quot; + paramEmail + &quot;', MD5('&quot; + paramMotDePasse + &quot;'), '&quot; + paramNom + &quot;', NOW());&quot; );

    /* Formatage pour affichage dans la JSP finale. */
    messages.add( &quot;Résultat de la requête d'insertion : &quot; + statut + &quot;.&quot; );
}</code></pre><p id="r-2136477" data-claire-element-id="2353521">Grâce à ce simple bloc <code>if</code>, si un des appels à <code>request.getParameter()</code> retourne une chaîne indéfinie, alors la requête n'est pas effectuée. Appelez à nouveau la page de test sans paramètres, vous constaterez que la requête n'est plus effectuée.</p><aside id="r-2136479" data-claire-element-id="2353523" data-claire-semantic="warning"><p id="r-2136478" data-claire-element-id="2353522">Cela dit, c'est très contraignant de procéder de cette manière : si demain la structure de notre table change et qu'il devient par exemple possible de ne pas transmettre le paramètre <strong>nom</strong>, alors il faudra penser à modifier cette condition dans notre code pour autoriser une chaîne <strong>paramNom</strong> indéfinie...</p></aside><h4 id="r-2136499" data-claire-element-id="2838101">Le cas idéal</h4><p id="r-2136481" data-claire-element-id="2353525">Essayons maintenant d'insérer des valeurs correctement, en saisissant une URL qui contient bien les trois paramètres attendus. Appelez par exemple la page de test avec l'URL suivante :</p><pre id="r-2136482" data-claire-element-id="2353526"><code data-claire-semantic="URL">http://localhost:8080/pro/testjdbc?nom=Marcel&amp;motdepasse=pastèque&amp;email=marcel@mail.fr</code></pre><p id="r-2136483" data-claire-element-id="2353527">Vous observerez alors une nouvelle ligne dans la page affichée par votre JSP (voir la figure suivante).</p><figure id="r-2136486" data-claire-element-id="2838098"><img id="r-2136484" data-claire-element-id="2353528" src="../../../user.oc-static.com/files/390001_391000/390319.png" alt="Image utilisateur" /></figure><p id="r-2136487" data-claire-element-id="2353531">Tout va bien, notre code a bien inséré dans la table les données récupérées depuis l'URL transmise par l'utilisateur.</p><div id="r-2136489" data-claire-element-id="2353533" data-claire-semantic="question"><p id="r-2136488" data-claire-element-id="2353532">Que va-t-il se passer si nous omettons de renseigner un ou plusieurs paramètres ?</p></div><p id="r-2136490" data-claire-element-id="2353534">Bonne question, il reste effectivement un cas que nous n'avons pas encore traité. Si vous accédez à la page de test avec l'URL suivante :</p><pre id="r-2136491" data-claire-element-id="2353535"><code data-claire-semantic="URL">http://localhost:8080/pro/testjdbc?nom=&amp;motdepasse=&amp;email=</code></pre><p id="r-2136492" data-claire-element-id="2353536">Alors les appels aux méthodes <code>request.getParameter()</code> ne vont cette fois plus retourner <code>null</code> comme c'était le cas lorsque nous accédions à la page sans aucun paramètre, mais des chaînes vides. À la figure suivante, le résultat alors affiché.</p><figure id="r-2136495" data-claire-element-id="2838100"><img id="r-2136493" data-claire-element-id="2353537" src="../../../user.oc-static.com/files/391001_392000/391099.png" alt="Image utilisateur" /></figure><p id="r-2136496" data-claire-element-id="2353540">Vous observez ici que les valeurs vides sont insérées correctement dans la table. Cela est dû au fait que MySQL sait faire la distinction entre un champ vide et un champ nul.</p><aside id="r-2136498" data-claire-element-id="2353542" data-claire-semantic="information"><p id="r-2136497" data-claire-element-id="2353541">Sachez toutefois que ce n'est pas le cas de toutes les solutions existantes sur le marché. Certains systèmes, comme les bases de données Oracle par exemple, considèrent par défaut qu'un champ vide est équivalent à un champ nul. Ainsi, notre dernier exemple serait refusé par la base si nous travaillions avec le SGBD Oracle.</p></aside><h4 id="r-2136520" data-claire-element-id="2838105">Les injections SQL</h4><p id="r-2136500" data-claire-element-id="2353544">Dans ce dernier exemple tout va bien, car aucune embûche ne gêne notre parcours, nous évoluons dans un monde peuplé de bisounours. :D Mais dans la vraie vie, vous savez très bien que tout n'est pas aussi merveilleux, et vous devez toujours vous rappeler la règle d'or que je vous ai déjà communiquée à plusieurs reprises : <strong>« il ne faut jamais faire confiance à l'utilisateur »</strong>.</p><div id="r-2136502" data-claire-element-id="2353546" data-claire-semantic="question"><p id="r-2136501" data-claire-element-id="2353545">Quel est le problème exactement ?</p></div><p id="r-2136503" data-claire-element-id="2353547">Ok... Puisque vous semblez encore une fois sceptiques, changeons l'URL de notre exemple précédent par celle-ci :</p><pre id="r-2136504" data-claire-element-id="2353548"><code data-claire-semantic="URL">http://localhost:8080/pro/testjdbc?nom=Marcel'&amp;motdepasse=pastèque&amp;email=marcel@mail.fr</code></pre><p id="r-2136505" data-claire-element-id="2353549">Nous avons simplement ajouté une apostrophe au contenu du paramètre <strong>nom</strong>. Faites le test, et vous observerez alors cette ligne dans la page affichée par votre JSP (voir la figure suivante).</p><figure id="r-2136508" data-claire-element-id="2838103"><img id="r-2136506" data-claire-element-id="2353550" src="../../../user.oc-static.com/files/390001_391000/390321.png" alt="Image utilisateur" /></figure><div id="r-2136510" data-claire-element-id="2353554" data-claire-semantic="question"><p id="r-2136509" data-claire-element-id="2353553">Que s'est-il passé ?</p></div><p id="r-2136511" data-claire-element-id="2353555">Ce type de failles porte un nom, il s'agit d'une <strong>injection SQL</strong>. En envoyant une chaîne contenant le caractère apostrophe, qui pour rappel est le caractère qui sert à délimiter les valeurs dans notre requête d'insertion, l'utilisateur a fait échouer notre requête. En effet, après concaténation du contenu des paramètres, notre requête devient :</p><pre id="r-2136512" data-claire-element-id="2838104"><code data-claire-semantic="sql">INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) VALUES ('marcel@mail.fr',MD5('pastèque'),'Marcel'',NOW());</code></pre><p id="r-2136513" data-claire-element-id="2353557">Vous voyez bien où est le problème ici : dans votre requête, deux apostrophes se suivent, ce qui rend sa syntaxe erronée et provoque l'envoi d'une <code>SQLException</code>.</p><div id="r-2136515" data-claire-element-id="2353559" data-claire-semantic="question"><p id="r-2136514" data-claire-element-id="2353558">D'accord, l'utilisateur peut provoquer l'envoi d'une exception. Ce n'est pas catastrophique non plus...</p></div><p id="r-2136516" data-claire-element-id="2353560">En l'occurrence non, ça ne nous embête pas plus que ça, car ça ne pénalise que l'utilisateur, qui se retrouve avec un message d'erreur devant les yeux. Mais rendez-vous bien compte que <strong>ce type de failles peut être très dangereux</strong> pour d'autres types de requêtes ! L'objet de ce chapitre n'est pas de faire de vous des pirates en herbe, nous n'allons donc pas nous attarder sur les cas qui posent de gros problèmes de sécurité, sachez simplement que si vous ne protégez pas efficacement vos requêtes, il peut devenir possible pour un utilisateur averti de modifier une requête à votre insu ou pire, d'effectuer des requêtes sur la base à votre insu ! En clair, votre application peut devenir une porte ouverte conduisant tout droit aux données de votre base... :o</p><div id="r-2136518" data-claire-element-id="2353562" data-claire-semantic="question"><p id="r-2136517" data-claire-element-id="2353561">Quelle est la parade contre ce type de risques ?</p></div><p id="r-2136519" data-claire-element-id="2353563">A priori, nous pourrions tenter de créer une méthode de vérification qui se chargerait d'analyser les paramètres saisis par l'utilisateur, et d'y éliminer ou échapper les caractères problématiques (notamment l'apostrophe que nous avons utilisée dans notre exemple). Rassurez-vous, il existe bien plus propre, bien plus standard et surtout bien plus efficace : <strong>les requêtes préparées !</strong></p><h3 id="r-624391" data-claire-element-id="2838138">Les requêtes préparées</h3><h4 id="r-2136547" data-claire-element-id="2838109">Pourquoi préparer ses requêtes ?</h4><p id="r-2136521" data-claire-element-id="2353566">Nous allons ici découvrir un nouvel objet, nommé <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html">PreparedStatement</a></code>. En parcourant sa documentation, vous vous apercevrez qu'il s'agit en réalité d'une nouvelle interface qui implémente l'interface <code>Statement</code> utilisée dans nos précédents exemples. Comme son nom l'indique, cet objet permet de créer des <a href="http://www.siteduzero.com/tutoriel-3-660097-requetes-preparees.html#ss_part_2">requêtes préparées</a>.</p><div id="r-2136523" data-claire-element-id="2353568" data-claire-semantic="question"><p id="r-2136522" data-claire-element-id="2353567">Pourquoi devrions-nous utiliser de telles requêtes ?</p></div><p id="r-2136524" data-claire-element-id="2353569">En étudiant un peu plus attentivement la documentation de l'objet, vous découvrirez alors qu'il présente trois différences majeures avec un <code>Statement</code> classique :</p><ul id="r-2136531" data-claire-element-id="2353576"><li id="r-2136526" data-claire-element-id="2353571"><p id="r-2136525" data-claire-element-id="2353570">l'utilisation de <code>PreparedStatement</code> peut permettre de pré-compiler une requête SQL ;</p></li><li id="r-2136528" data-claire-element-id="2353573"><p id="r-2136527" data-claire-element-id="2353572">une requête SQL ainsi créée peut être paramétrée, c'est-à-dire contenir des trous ou jokers qui ne seront comblés que lors de son exécution ;</p></li><li id="r-2136530" data-claire-element-id="2353575"><p id="r-2136529" data-claire-element-id="2353574">une requête SQL ainsi créée est protégée contre les injections SQL, et contre d'éventuelles erreurs sur les types des paramètres.</p></li></ul><h5 id="r-2136537" data-claire-element-id="2353582">1. Des requêtes pré-compilées</h5><p id="r-2136532" data-claire-element-id="2353577">Le premier avantage se situe au niveau des performances. Dès lors que vous souhaitez exécuter une requête d'un même objet <code>Statement</code> plusieurs fois, il devient intéressant d'utiliser un <code>PreparedStatement</code> à la place, afin de réduire le temps d'exécution. En effet, la principale fonctionnalité de ce nouvel objet est qu'à la différence d'un classique objet <code>Statement</code>, il prend en argument une requête SQL dès sa création.</p><div id="r-2136534" data-claire-element-id="2353579" data-claire-semantic="question"><p id="r-2136533" data-claire-element-id="2353578">Quel est l'intérêt de passer une requête à l'objet dès sa création ?</p></div><p id="r-2136535" data-claire-element-id="2353580">L'avantage, c'est que dans la plupart des cas (*), la requête SQL sera, dès la création de l'objet, directement envoyée au SGBD, où elle sera compilée. Pour être exact, un objet <code>PreparedStatement</code> ne contient donc pas simplement une requête SQL, mais une requête SQL pré-compilée. Concrètement, cela signifie que lorsque ce <code>PreparedStatement</code> sera exécuté, le SGBD n'aura plus qu'à exécuter la requête sans avoir besoin de la compiler au préalable.</p><p id="r-2136536" data-claire-element-id="2353581"><em>(*) Note : tous les drivers JDBC ne procèdent pas de cette manière, certains n'effectuent pas l'envoi de la requête vers le serveur SQL pour pré-compilation lors de sa création via un <code>PreparedStatement</code>. Ces différences de comportement d'un driver à l'autre existent parce que cette fonctionnalité n'est pas définie noir sur blanc dans les spécifications de l'API JDBC.</em></p><h5 id="r-2136543" data-claire-element-id="2838108">2. Des requêtes paramétrées</h5><p id="r-2136538" data-claire-element-id="2353583">Le second avantage réside dans le fait qu'à travers un tel objet, il est possible de créer des requêtes qui prennent en compte des paramètres. Ceux-ci sont représentés par des points d'interrogation <kbd>?</kbd> dans la requête qui sert de modèle, et doivent être précisés avant l'exécution. Si vous n'êtes pas familiers avec ce concept, vous en apprendrez davantage dans <a href="http://www.siteduzero.com/tutoriel-3-660097-requetes-preparees.html#ss_part_2">ce chapitre du cours de MySQL</a>. Le principe est simple, il s'agit de créer une requête modèle qui contient un ou plusieurs trous. Exemple d'une requête attendant un seul paramètre :</p><pre id="r-2136539" data-claire-element-id="2838107"><code data-claire-semantic="sql">SELECT * FROM Utilisateur WHERE email = ?</code></pre><p id="r-2136540" data-claire-element-id="2353585">Vous observez ici le caractère joker <kbd>?</kbd> dont je viens de vous parler. Lorsque vous passez une telle requête à un objet <code>PreparedStatement</code>, celui-ci va la faire pré-compiler et se chargera ensuite de remplacer le paramètre manquant par la valeur que vous souhaitez lui donner au moment de l'exécution.</p><aside id="r-2136542" data-claire-element-id="2353587" data-claire-semantic="information"><p id="r-2136541" data-claire-element-id="2353586">Ainsi, la pré-compilation, couplée à la prise en compte de paramètres au moment de l'exécution, permet d'améliorer considérablement les performances de requêtes paramétrées destinées à être exécutées plusieurs fois. Cela dit, ces conditions ne sont pas un prérequis à l'utilisation de requêtes préparées : il est tout à fait possible de préparer des requêtes qui n'attendent pas de paramètres ou qui ne seront exécutées qu'une seule fois.</p></aside><h5 id="r-2136546" data-claire-element-id="2353591">3. Des requêtes protégées !</h5><p id="r-2136544" data-claire-element-id="2353589">Le dernier avantage et <strong>le plus important de tous</strong>, c'est bien évidemment celui que je vous ai annoncé en conclusion du paragraphe sur les injections SQL : en utilisant des requêtes préparées, vous prévenez tout risque de failles de ce type ! Et cette fonctionnalité, contrairement à l'étape de pré-compilation, est disponible quel que soit le driver JDBC utilisé.</p><p id="r-2136545" data-claire-element-id="2353590">En outre, non seulement vos requêtes seront protégées contre les injections SQL, mais le passage des paramètres s'en retrouvera également grandement facilité, et ce quel que soit le type du paramètre passé : <code>String</code>, <code>Date</code>, etc., et même la valeur <code>null</code> ! Nous allons revenir sur ce point dans la mise en pratique à venir.</p><h4 id="r-2136587" data-claire-element-id="2838119">Comment préparer ses requêtes ?</h4><p id="r-2136548" data-claire-element-id="2353593">Vous n'allez pas être dépaysés, le fonctionnement est assez semblable à celui d'un <code>Statement</code> classique.</p><h5 id="r-2136554" data-claire-element-id="2838112">Initialisation de l'objet</h5><p id="r-2136549" data-claire-element-id="2353594">La première différence se situe là où, auparavant, nous effectuions cette initialisation :</p><pre id="r-2136550" data-claire-element-id="2838110"><code data-claire-semantic="java">/* Création de l'objet gérant les requêtes */
Statement statement = connexion.createStatement();</code></pre><p id="r-2136551" data-claire-element-id="2353596">Nous allons désormais directement préciser la requête SQL dans cette nouvelle initialisation :</p><pre id="r-2136552" data-claire-element-id="2838111"><code data-claire-semantic="java">/* Création de l'objet gérant la requête préparée définie */
PreparedStatement preparedStatement = connexion.prepareStatement( &quot;SELECT id, email, mot_de_passe, nom FROM Utilisateur;&quot; );</code></pre><p id="r-2136553" data-claire-element-id="2353598">La seule différence est l'appel à la méthode <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#prepareStatement%28java.lang.String%29">prepareStatement()</a></code> de l'objet <code>Connection</code> qui attend, comme je vous l'ai déjà annoncé, une requête SQL en argument.</p><h5 id="r-2136560" data-claire-element-id="2838115">Exécution de la requête</h5><p id="r-2136555" data-claire-element-id="2353600">Puisque votre requête est déjà déclarée lors de l'initialisation, la seconde différence avec l'utilisation d'un <code>Statement</code> classique se situe au niveau de l'appel à la méthode d'exécution. Alors qu'auparavant nous effectuions par exemple :</p><pre id="r-2136556" data-claire-element-id="2838113"><code data-claire-semantic="java">/* Exécution d'une requête de lecture */
statement.executeQuery( &quot;SELECT id, email, mot_de_passe, nom FROM Utilisateur;&quot; );</code></pre><p id="r-2136557" data-claire-element-id="2353602">Nous allons cette fois simplement appeler :</p><pre id="r-2136558" data-claire-element-id="2838114"><code data-claire-semantic="java">preparedStatement.executeQuery();</code></pre><p id="r-2136559" data-claire-element-id="2353604">Vous l'aurez déjà remarqué si vous avez attentivement parcouru la documentation de l'objet <code>PreparedStatement</code>, ses méthodes <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#executeQuery%28%29">executeQuery()</a></code> et <code><a href="http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#executeUpdate%28%29">executeUpdate()</a></code> n'attendent logiquement aucun argument.</p><h5 id="r-2136586" data-claire-element-id="2838118">Et avec des paramètres ?</h5><p id="r-2136561" data-claire-element-id="2353606">En effet tout cela est bien joli, mais préparer ses requêtes est surtout utile lorsque des paramètres interviennent. Pour rappel, voici comment nous procédions avec un <code>Statement</code> classique :</p><pre id="r-2136562" data-claire-element-id="2838116"><code data-claire-semantic="java">/* Création de l'objet gérant les requêtes */
statement = connexion.createStatement();

/* Récupération des paramètres d'URL saisis par l'utilisateur */
String paramEmail = request.getParameter( &quot;email&quot; );
String paramMotDePasse = request.getParameter( &quot;motdepasse&quot; );
String paramNom = request.getParameter( &quot;nom&quot; );

if ( paramEmail != null &amp;&amp; paramMotDePasse != null &amp;&amp; paramNom != null ) {
    /* Exécution d'une requête d'écriture */
    int statut = statement.executeUpdate( &quot;INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) &quot;
            + &quot;VALUES ('&quot; + paramEmail + &quot;', MD5('&quot; + paramMotDePasse + &quot;'), '&quot; + paramNom + &quot;', NOW());&quot; );
}</code></pre><p id="r-2136563" data-claire-element-id="2353608">Et voilà comment procéder avec une requête préparée. Je vous donne le code, et vous commente le tout ensuite :</p><pre id="r-2136564" data-claire-element-id="2838117"><code data-claire-semantic="java">/* Création de l'objet gérant les requêtes préparées */
preparedStatement = connexion.prepareStatement( &quot;INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) VALUES(?, MD5(?), ?, NOW());&quot; );

/* Récupération des paramètres d'URL saisis par l'utilisateur */
String paramEmail = request.getParameter( &quot;email&quot; );
String paramMotDePasse = request.getParameter( &quot;motdepasse&quot; );
String paramNom = request.getParameter( &quot;nom&quot; );

/*
 * Remplissage des paramètres de la requête grâce aux méthodes
 * setXXX() mises à disposition par l'objet PreparedStatement.
 */
preparedStatement.setString( 1, paramEmail );
preparedStatement.setString( 2, paramMotDePasse );
preparedStatement.setString( 3, paramNom );

/* Exécution de la requête */
int statut = preparedStatement.executeUpdate();</code></pre><p id="r-2136565" data-claire-element-id="2353610">Pour commencer, à la ligne 2 vous observez la définition de la requête SQL dès l'initialisation du <code>PreparedStatement</code>. Celle-ci attend trois paramètres, signalés par les trois caractères <kbd>?</kbd>.</p><p id="r-2136566" data-claire-element-id="2353611">Vous remarquez ensuite l'étape de remplissage des paramètres de la requête, dans les lignes 13 à 15. Il s'agit en réalité tout simplement de remplacer les <kbd>?</kbd> par les valeurs des paramètres attendus. Cela se fait par l'intermédiaire des méthodes <code>setXXX()</code> mises à disposition par l'objet <code>PreparedStatement</code>, dont je vous laisse le loisir de parcourir la documentation si vous ne l'avez pas déjà fait. Celles-ci devraient grandement vous rappeler la flopée de méthodes <code>getXXX()</code> que nous avions découvertes dans l'objet <code>ResultSet</code>, puisqu'il en existe là encore une pour chaque type géré :</p><ul id="r-2136575" data-claire-element-id="2353620"><li id="r-2136568" data-claire-element-id="2353613"><p id="r-2136567" data-claire-element-id="2353612">une méthode <code>preparedStatement.setInt()</code> pour définir un entier ;</p></li><li id="r-2136570" data-claire-element-id="2353615"><p id="r-2136569" data-claire-element-id="2353614">une méthode <code>preparedStatement.setString()</code> pour définir une chaîne de caractères ;</p></li><li id="r-2136572" data-claire-element-id="2353617"><p id="r-2136571" data-claire-element-id="2353616">une méthode <code>preparedStatement.setBoolean()</code> pour définir un booléen ;</p></li><li id="r-2136574" data-claire-element-id="2353619"><p id="r-2136573" data-claire-element-id="2353618">...</p></li></ul><p id="r-2136576" data-claire-element-id="2353621">La plupart de ces méthodes attendent simplement deux arguments :</p><ul id="r-2136581" data-claire-element-id="2353626"><li id="r-2136578" data-claire-element-id="2353623"><p id="r-2136577" data-claire-element-id="2353622">un entier définissant le paramètre à remplacer ;</p></li><li id="r-2136580" data-claire-element-id="2353625"><p id="r-2136579" data-claire-element-id="2353624">un objet du type concerné destiné à remplacer le paramètre dans la requête SQL.</p></li></ul><p id="r-2136582" data-claire-element-id="2353627">En l'occurrence, notre requête attend, dans l'ordre, un email, un mot de passe et un nom. Il s'agit là de trois chaînes de caractères, voilà pourquoi dans notre exemple nous utilisons à trois reprises la méthode <code>preparedStatement.setString()</code>, appliquée respectivement aux paramètres numérotés 1, 2 et 3, représentant la position du <kbd>?</kbd> à remplacer dans la requête. Ainsi, le contenu de notre chaîne <strong>paramEmail</strong> remplace le premier <kbd>?</kbd>, le contenu de <strong>paramMotDePasse</strong> le second, et le contenu de <strong>paramNom</strong> le troisième.</p><aside id="r-2136584" data-claire-element-id="2353629" data-claire-semantic="information"><p id="r-2136583" data-claire-element-id="2353628">Facile, n'est-ce pas ? Vous comprenez maintenant mieux pourquoi je vous avais annoncé qu'un <code>PreparedStatement</code> facilitait le passage de paramètres : finie la concaténation barbare directement au sein de la requête SQL, tout passe désormais par des méthodes standard, et c'est bien plus propre ainsi ! :)</p></aside><p id="r-2136585" data-claire-element-id="2353630">Enfin, vous remarquez à la ligne 18 l'exécution de la requête d'insertion via un simple appel à la méthode <code>preparedStatement.executeUpdate()</code>.</p><h4 id="r-2136648" data-claire-element-id="2838137">Mise en pratique</h4><p id="r-2136588" data-claire-element-id="2353633">Nous pouvons maintenant utiliser des requêtes préparées dans notre classe d'exemple, afin de tester leur bon fonctionnement et leurs différences avec les requêtes non préparées. Vous devez remplacer le code suivant dans notre objet :</p><pre id="r-2136589" data-claire-element-id="2838120"><code data-claire-semantic="java">/* Création de l'objet gérant les requêtes */
statement = connexion.createStatement();

/* Récupération des paramètres d'URL saisis par l'utilisateur */
String paramEmail = request.getParameter( &quot;email&quot; );
String paramMotDePasse = request.getParameter( &quot;motdepasse&quot; );
String paramNom = request.getParameter( &quot;nom&quot; );

if ( paramEmail != null &amp;&amp; paramMotDePasse!= null &amp;&amp; paramNom != null ) {
    /* Exécution d'une requête d'écriture */
    int statut = statement.executeUpdate( &quot;INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) &quot;
            + &quot;VALUES ('&quot; + paramEmail + &quot;', MD5('&quot; + paramMotDePasse + &quot;'), '&quot; + paramNom + &quot;', NOW());&quot; );

    /* Formatage pour affichage dans la JSP finale. */
    messages.add( &quot;Résultat de la requête d'insertion : &quot; + statut + &quot;.&quot; );
}</code></pre><p id="r-2136590" data-claire-element-id="2353635">Par ce nouveau code :</p><pre id="r-2136591" data-claire-element-id="2838121"><code data-claire-semantic="java">/* Création de l'objet gérant les requêtes préparées */
preparedStatement = connexion.prepareStatement( &quot;INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) VALUES(?, MD5(?), ?, NOW());&quot; );
messages.add( &quot;Requête préparée créée !&quot; );

/* Récupération des paramètres d'URL saisis par l'utilisateur */
String paramEmail = request.getParameter( &quot;email&quot; );
String paramMotDePasse = request.getParameter( &quot;motdepasse&quot; );
String paramNom = request.getParameter( &quot;nom&quot; );

/*
 * Remplissage des paramètres de la requête grâce aux méthodes
 * setXXX() mises à disposition par l'objet PreparedStatement.
 */
preparedStatement.setString( 1, paramEmail );
preparedStatement.setString( 2, paramMotDePasse );
preparedStatement.setString( 3, paramNom );

/* Exécution de la requête */
int statut = preparedStatement.executeUpdate();

/* Formatage pour affichage dans la JSP finale. */
messages.add( &quot;Résultat de la requête d'insertion préparée : &quot; + statut + &quot;.&quot; );</code></pre><p id="r-2136592" data-claire-element-id="2353637">De même, n'oubliez pas de remplacer la création de la requête de sélection :</p><pre id="r-2136593" data-claire-element-id="2838122"><code data-claire-semantic="java">/* Exécution d'une requête de lecture */
resultat = statement.executeQuery( &quot;SELECT id, email, mot_de_passe, nom FROM Utilisateur;&quot; );
messages.add( &quot;Requête \&quot;SELECT id, email, mot_de_passe, nom FROM Utilisateur;\&quot; effectuée !&quot; );</code></pre><p id="r-2136594" data-claire-element-id="2353639">Par le code suivant :</p><pre id="r-2136595" data-claire-element-id="2838123"><code data-claire-semantic="java">/* Création de l'objet gérant les requêtes préparées */
preparedStatement = connexion.prepareStatement( &quot;SELECT id, email, mot_de_passe, nom FROM Utilisateur;&quot; );
messages.add( &quot;Requête préparée créée !&quot; );

/* Exécution d'une requête de lecture */
resultat = preparedStatement.executeQuery();
messages.add( &quot;Requête \&quot;SELECT id, email, mot_de_passe, nom FROM Utilisateur;\&quot; effectuée !&quot; );</code></pre><p id="r-2136596" data-claire-element-id="2353641">Remarquez au passage que contrairement à un <code>Statement</code> classique, qui peut être réutilisé plusieurs fois pour exécuter des requêtes différentes, il est nécessaire avec un <code>PreparedStatement</code> de réinitialiser l'objet via un nouvel appel à la méthode <code>connexion.prepareStatement()</code>. Ceci est tout bêtement dû au fait que la requête SQL est passée lors de la création de l'objet, et non plus lors de l'appel aux méthodes d'exécution.</p><p id="r-2136597" data-claire-element-id="2353642">Enfin, il faut bien entendu remplacer l'initialisation du <code>Statement</code> par un <code>PreparedStatement</code> ; et la fermeture de la ressource <code>Statement</code> par la fermeture de la ressource <code>PreparedStatement</code> :</p><pre id="r-2136598" data-claire-element-id="2838124"><code data-claire-semantic="java">messages.add( &quot;Fermeture de l'objet Statement.&quot; );
if ( statement != null ) {
    try {
        statement.close();
    } catch ( SQLException ignore ) {
    }
}</code></pre><pre id="r-2136599" data-claire-element-id="2838125"><code data-claire-semantic="java">messages.add( &quot;Fermeture de l'objet PreparedStatement.&quot; );
if ( preparedStatement != null ) {
    try {
        preparedStatement.close();
    } catch ( SQLException ignore ) {
    }
}</code></pre><p id="r-2136600" data-claire-element-id="2353645">Une fois toutes ces modifications effectuées et enregistrées, suivez alors ce bref scénario de tests :</p><ol id="r-2136613" data-claire-element-id="2838134"><li id="r-2136603" data-claire-element-id="2838127"><img id="r-2394605" data-claire-element-id="2838126" src="../../../user.oc-static.com/files/391001_392000/391250.png" alt="Image utilisateur" /><img id="r-2136602" data-claire-element-id="2353647" src="../../../user.oc-static.com/files/391001_392000/391250.png" alt="Image utilisateur" /><p id="r-2136601" data-claire-element-id="2353646">accédez à l'URL sans aucun paramètre <code>http://localhost:8080/pro/testjdbc</code>, et observez le résultat à la figure suivante.</p></li><li id="r-2136606" data-claire-element-id="2838129"><img id="r-2394606" data-claire-element-id="2838128" src="../../../user.oc-static.com/files/391001_392000/391251.png" alt="Image utilisateur" /><img id="r-2136605" data-claire-element-id="2353650" src="../../../user.oc-static.com/files/391001_392000/391251.png" alt="Image utilisateur" /><p id="r-2136604" data-claire-element-id="2353649">accédez à l'URL correctement renseignée <code>http://localhost:8080/pro/testjdbc?nom=Raymond&amp;motdepasse=knysna&amp;email=raymond@anpe.fr</code>, et observez le résultat à la figure suivante.</p></li><li id="r-2136609" data-claire-element-id="2838131"><img id="r-2394607" data-claire-element-id="2838130" src="../../../user.oc-static.com/files/391001_392000/391252.png" alt="Image utilisateur" /><img id="r-2136608" data-claire-element-id="2353653" src="../../../user.oc-static.com/files/391001_392000/391252.png" alt="Image utilisateur" /><p id="r-2136607" data-claire-element-id="2353652">accédez à l'URL contenant des paramètres vides <code>http://localhost:8080/pro/testjdbc?nom=&amp;motdepasse=&amp;email=</code>, et observez le résultat à la figure suivante.</p></li><li id="r-2136612" data-claire-element-id="2838133"><img id="r-2394608" data-claire-element-id="2838132" src="../../../user.oc-static.com/files/391001_392000/391253.png" alt="Image utilisateur" /><img id="r-2136611" data-claire-element-id="2353656" src="../../../user.oc-static.com/files/391001_392000/391253.png" alt="Image utilisateur" /><p id="r-2136610" data-claire-element-id="2353655">accédez à l'URL contenant une tentative d'injection SQL <code>http://localhost:8080/pro/testjdbc?nom=Charles'&amp;motdepasse=doucefrance&amp;email=charles@lamer.fr</code>, et observez le résultat à la figure suivante.</p></li></ol><p id="r-2136614" data-claire-element-id="2353659">Vous remarquez ici deux différences majeures avec les requêtes non préparées :</p><ul id="r-2136619" data-claire-element-id="2353664"><li id="r-2136616" data-claire-element-id="2353661"><p id="r-2136615" data-claire-element-id="2353660">dans le premier test, le passage des valeurs indéfinies est cette fois correctement réalisé. La base de données refuse alors logiquement la requête, en précisant ici que le champ <strong>email</strong> ne peut pas contenir <code>null</code> ;</p></li><li id="r-2136618" data-claire-element-id="2353663"><p id="r-2136617" data-claire-element-id="2353662">dans le dernier test, le paramètre contenant une apostrophe est cette fois correctement inséré dans la table, la requête n'échoue plus !</p></li></ul><p id="r-2136620" data-claire-element-id="2353665">En outre, vous remarquez dans le troisième test qu'une erreur est renvoyée lors de la tentative d'insertion des valeurs vides. Cela signifie que la requête préparée autorise logiquement les valeurs vides tout comme le faisait le <code>Statement</code> classique. Mais, puisque dans notre table il y a une contrainte d'unicité sur le champ <strong>email</strong> et qu'il existe déjà une ligne contenant une adresse vide, le SGBD n'accepte pas d'insérer une nouvelle ligne contenant encore une telle adresse.</p><aside id="r-2136622" data-claire-element-id="2353667" data-claire-semantic="information"><p id="r-2136621" data-claire-element-id="2353666">Vous devez maintenant être convaincus de l'intérêt des requêtes préparées : elles facilitent le passage de valeurs à une requête paramétrée, et protègent automatiquement les requêtes contre tout type d'injections !</p></aside><p id="r-2136623" data-claire-element-id="2353668">Dorénavant, je ne veux plus vous voir utiliser de <code>Statement</code> classique. En trois mots : préparez vos requêtes !</p><p id="r-2136624" data-claire-element-id="2353669">Avant de passer à la suite, il nous reste encore à découvrir comment récupérer l'id auto-généré après exécution d'une requête d'insertion. En effet, vous savez qu'avec un <code>Statement</code> classique nous précisions un paramètre supplémentaire lors de l'exécution de la requête :</p><pre id="r-2136625" data-claire-element-id="2838135"><code data-claire-semantic="java">/* Exécution d'une requête d'écriture avec renvoi de l'id auto-généré */
int statut = statement.executeUpdate( &quot;INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) VALUES ('jmarc@mail.fr', MD5('lavieestbelle78'), 'jean-marc', NOW());&quot; , Statement.RETURN_GENERATED_KEYS);</code></pre><p id="r-2136626" data-claire-element-id="2353671">Eh bien de la même manière que nous devons préciser la requête SQL, non pas à l'exécution mais dès la création d'un <code>PreparedStatement</code>, nous allons devoir préciser dès la création si nous souhaitons récupérer l'id auto-généré ou non, en utilisant <a href="http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#prepareStatement%28java.lang.String,%20int%29">une cousine de la méthode <code>connexion.prepareStatement()</code></a>, qui attend en second argument les mêmes constantes que celles utilisées avec le <code>Statement</code> :</p><pre id="r-2136627" data-claire-element-id="2838136"><code data-claire-semantic="java">/* Création d'un PreparedStatement avec renvoi de l'id auto-généré */
PreparedStatement preparedStatement = connexion.prepareStatement( &quot;INSERT INTO Utilisateur (email, mot_de_passe, nom, date_inscription) VALUES ('jmarc@mail.fr', MD5('lavieestbelle78'), 'jean-marc', NOW());&quot;, Statement.RETURN_GENERATED_KEYS );</code></pre><p id="r-2136628" data-claire-element-id="2353673">Le reste ne change pas : il faut parcourir le <code>ResultSet</code> retourné par la méthode <code>preparedStatement.getGeneratedKeys()</code> et y récupérer le premier champ, tout comme nous l'avions fait avec un <code>Statement</code> classique.</p><ul id="r-2136647" data-claire-element-id="2353692"><li id="r-2136630" data-claire-element-id="2353675"><p id="r-2136629" data-claire-element-id="2353674">Il est nécessaire de charger le driver JDBC une seule et unique fois, au démarrage de l'application par exemple.</p></li><li id="r-2136632" data-claire-element-id="2353677"><p id="r-2136631" data-claire-element-id="2353676">JDBC fonctionne par un système d'URL. Dans le cas de MySQL : <code>jdbc:mysql://hôte:port/nom_de_la_bdd</code>.</p></li><li id="r-2136634" data-claire-element-id="2353679"><p id="r-2136633" data-claire-element-id="2353678">Il est nécessaire d'établir une connexion entre l'application et la base de données, via un appel à <code>DriverManager.getConnection()</code> qui retourne un objet <code>Connection</code>.</p></li><li id="r-2136636" data-claire-element-id="2353681"><p id="r-2136635" data-claire-element-id="2353680">Un appel à <code>connexion.createStatement()</code> retourne un objet <code>Statement</code>, qui permet d'effectuer des requêtes via notamment ses méthodes <code>executeQuery()</code> et <code>executeUpdate()</code>.</p></li><li id="r-2136638" data-claire-element-id="2353683"><p id="r-2136637" data-claire-element-id="2353682">L'emploi de cet objet est à éviter, celui-ci étant sujet à de nombreux problèmes dont les dangeureuses injections SQL.</p></li><li id="r-2136640" data-claire-element-id="2353685"><p id="r-2136639" data-claire-element-id="2353684">Préparer ses requêtes permet une protection contre ces injections, une gestion simplifiée des paramètres et dans certains cas de meilleures performances.</p></li><li id="r-2136642" data-claire-element-id="2353687"><p id="r-2136641" data-claire-element-id="2353686">Un appel à <code>connexion.prepareStatement()</code> retourne un objet <code>PreparedStatement</code>, qui permet d'effectuer des requêtes de manière sécurisée, via notamment ses méthodes <code>executeQuery()</code> et <code>executeUpdate()</code>.</p></li><li id="r-2136644" data-claire-element-id="2353689"><p id="r-2136643" data-claire-element-id="2353688">Un ensemble de <em>setters</em> facilite l'utilisation de paramètres dans les requêtes effectuées.</p></li><li id="r-2136646" data-claire-element-id="2353691"><p id="r-2136645" data-claire-element-id="2353690">Il est nécessaire de <strong>libérer les ressources</strong> utilisées lors d'un échange avec la base de données, en fermant les différents objets intervenant dans un ordre précis via des appels à leur méthode <code>close()</code>.</p></li></ul>

                <div class="js-courseSelementActions sideActions">
    <ul class="sideActions__container">
        <li>
            <a class="sideActions__item  js-courseElementActions-copyUrl  js-tooltip"
               href="#" data-tooltip="Copier le lien"
               data-tooltip-done="Lien copié !">
            #
            </a>
        </li>
    </ul>
</div>
            </div>

            
            <nav class="course-pagination    clearfix">

            <a href="introduction-a-mysql-et-jdbc.html" class="oc-btn dark-btn course-pagination__btn course-pagination__btn--previous">
            <i class="icon-previous"></i>
            <span>Introduction à MySQL et JDBC</span>
        </a>
    
    <span class="course-pagination__separator"></span>

            <a href="le-modele-dao.html" class="oc-btn dark-btn course-pagination__btn course-pagination__btn--next">
            <span>Le modèle DAO</span>
            <i class="icon-next"></i>
        </a>
    
</nav>

            
<aside  tabindex="-1"
        role="dialog"
                    aria-labelledby="popin-view-restriction_popin_title"
                class="popin popin--illustrated  js-popin"
        id="popin-view-restriction"
>
    <i class="popin__close-button icon-close js-close-button"></i>

    <div class="popin__inner">
                    <div class="popin__illustrationWrapper">
                <div class="popin__illustration illustration--balloon"></div>
            </div>
        
        <div class="popin__mainContainer">
                            <h3 id="popin-view-restriction_popin_title" class="popin__title  js-popin-title">Waouh !</h3>
            
            
            
            <div class="popin__content  js-popin-content">
                <div class="popin__contentWrapper">
                                                <p>
            Très heureux de voir que nos cours vous plaisent, déjà 3 pages lues aujourd&#039;hui ! Vous pouvez continuer la lecture de nos cours en devenant un Roomie, un membre de la communauté d&#039;OpenClassrooms. C&#039;est gratuit !
        </p>
        <p>
            Vous pourrez aussi suivre votre avancement dans le cours, faire les exercices et discuter avec les autres Roomies.
        </p>
                    </div>
            </div>

                            <div class="popin__actions  js-popin-actions">
                                                                        <a class="oc-btn orange-alt-btn "  href="https://openclassrooms.com/register">S'inscrire</a>
                                                    <a class="oc-btn dark-btn "  href="https://openclassrooms.com/login">Se connecter</a>
                                                            </div>
            
                        
                    </div>
    </div>
</aside>

        </div>


    </section>
</div>
    </div>

    
    <div id="popin-not-certifying-yet"
     class="popin"
     data-popin-title="Vous ne pouvez pas encore obtenir de certificat de réussite à l&#039;issue de ce cours.
                            <a href='https://openclassrooms.com/premium'><i class='icon-star'></i> Devenez Premium</a>
                    ">
    <img alt="Exemple de certificat de réussite" src="../../../static.oc-static.com/prod/images/courses/certif.jpg"/>
</div>


                </main>

                <aside class="contentWithSidebar__sidebar  js-contentWithSidebar-slidingElement" >
                        <nav class="col-nav">
    <div id="tab-courseMenu" class="col-nav__inner js-sidebar-inner">
        <div class="col-nav__block  col-nav__block--summary">

            <div class="side-paginate">
                                    <a href="introduction-a-mysql-et-jdbc.html" class="side-paginate__previous">
                        <i class="icon-previous"></i>
                    </a>

                    <span class="side-paginate__separator"></span>
                
                <h6 class="side-paginate__title">
                    Les bases de données avec Java EE
                </h6>

                                    <span class="side-paginate__separator"></span>

                    <a href="le-modele-dao.html" class="side-paginate__next">
                        <i class="icon-next"></i>
                    </a>
                            </div>

                            <div class="col-nav__block--summary-list">
                    <ol class="col-nav__chapters">
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="introduction-a-mysql-et-jdbc.html">Introduction à MySQL et JDBC</a>
                                                            </li>
                                                    <li class="selected">
                                                                                                    <span class="col-nav__chapterTitle">Communiquez avec votre BDD</span>
                                                            </li>
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="le-modele-dao.html">Le modèle DAO</a>
                                                            </li>
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="tp-fil-rouge-etape-6.html">TP Fil rouge - Étape 6</a>
                                                            </li>
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="gerer-un-pool-de-connexions-avec-bonecp.html">Gérer un pool de connexions avec BoneCP</a>
                                                            </li>
                                            </ol>

                                    </div>
                    </div>

        
        
            <div class="col-nav__block  col-nav__block--subscribe">
            <a href="https://openclassrooms.com/login" class="oc-btn orange-alt-btn js-popin-activator" data-popin-selector="#popin-log-in">
                <i class="icon-lock"></i>
                Suivre ce cours
            </a>

            <a href="https://openclassrooms.com/how-does-it-work">
                <small>Comment ça marche ?</small>
            </a>
        </div>
    


        
                    <div class="col-nav__block col-nav__block--institution">
    <h2>Créé par</h2>
            <a  href="https://openclassrooms.com/partners/openclassrooms" target="_blank">
            <img src="../../../sdz-upload.s3.amazonaws.com/prod/partners/img/logo_logo-oc.png" alt="logo OpenClassrooms" class="col-nav__institutionLogo"/>
            <p class="col-nav__block--institutionDescription">
                OpenClassrooms, 1ère plateforme  <span class='nowrap'>e-Education<span> en Europe
            </p>
        </a>
    </div>
        
        
        
    
                        
            
    <div class="socialNetwork col-nav__block">
        <ul class="socialButtons  js-socialButtons"
    data-options="
                title: 'Découvrez le cours &quot;Communiquez avec votre BDD&quot; sur @OpenClassrooms',
        mailTitle: 'Cours &quot;Communiquez avec votre BDD&quot; sur OpenClassrooms',
        mailContent: 'Découvrez le cours &quot;Communiquez avec votre BDD&quot; sur OpenClassrooms.'">

    <li>
        <a class="roundIcon  roundIcon--twitter addthis_button_twitter  js-socialButtons-btn" data-tooltip="Partagez sur Twitter" >
            <i class="roundIcon__icon  icon-twitter"></i>
        </a>
    </li>

    <li>
        <a class="roundIcon  roundIcon--facebook  addthis_button_facebook  js-socialButtons-btn" data-tooltip="Partagez sur Facebook">
            <i class="roundIcon__icon  icon-facebook"></i>
        </a>
    </li>

    <li>
        <a class="roundIcon  roundIcon--googlePlus  addthis_button_google_plusone_share  js-socialButtons-btn" data-tooltip="Partagez sur Google+" >
            <i class="roundIcon__icon  icon-google"></i>
        </a>
    </li>

    <li>
        <a class="roundIcon  addthis_button_email  js-socialButtons-btn  js-socialButtons-email" data-tooltip="Partagez par e-mail">
            <i class="roundIcon__icon  icon-letter"></i>
        </a>
    </li>

</ul>

    </div>
    </div>
</nav>
                </aside>
            </div>
        </div>

                    <footer class="alt-section">
    <div class="centered">

        <div class="row">
                            <div class="col4 course-bottom__category">
                    <h2 class="highlighted">
                        L&#039;auteur
                    </h2>
                    <div>
                                                    <a itemprop="author" itemscope itemtype="http://schema.org/Person" href="https://openclassrooms.com/membres/coyote-92394" class="no-underlined">
                                <div class="course-bottom__text-illustrated">
                                    <span data-author="Médéric Munier" style="background-image: url(../../../www.gravatar.com/avatar/15c349ac5313535fba91e5dbfa8803ec/indexd6dc.html?s=256&amp;r=g&amp;d=https%3A%2F%2Fopenclassrooms.com%2Fbundles%2Fcommon%2Fimages%2Favatar_defaut.png);"></span>
                                    <h4 itemprop="name">Médéric Munier</h4>
                                                                            <p itemprop="description">
                                            Auteur du livre sur le Java EE.
                                        </p>
                                                                    </div>
                            </a>
                                            </div>
                </div>
            
                            <div class="col8 course-bottom__category">
                    <h2 class="highlighted">Découvrez aussi ce cours en...</h2>

                    <ul class="course-bottom__format">
                                                    <li>
                                <a
                                                                                    href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee" class="text-decoration-none"
                                                                        >
                                    <div class="circle circle--x-small">
                                        <span class="circle__content"></span>
                                        <i class="icon-ebook"></i>
                                                                                    <div class="ribbon ribbon--orange">
                                                <div class="ribbon__content">
                                                    <span>Premium</span>
                                                </div>
                                            </div>
                                                                            </div>
                                    <div class="course-bottom__format-entitled">eBook</div>
                                </a>
                            </li>
                                                    <li>
                                <a
                                                                                    href="http://www.eyrolles.com/Informatique/Livre/creez-des-applications-web-avec-java-ee-9791090085244?societe=openclassrooms" target="_blank" class="text-decoration-none"
                                                                        >
                                    <div class="circle circle--x-small">
                                        <span class="circle__content"></span>
                                        <i class="icon-book"></i>
                                                                            </div>
                                    <div class="course-bottom__format-entitled">Livre papier</div>
                                </a>
                            </li>
                                                    <li>
                                <a
                                                                                    href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee" class="text-decoration-none"
                                                                        >
                                    <div class="circle circle--x-small">
                                        <span class="circle__content"></span>
                                        <i class="icon-ebook pdf"></i>
                                                                                    <div class="ribbon ribbon--orange">
                                                <div class="ribbon__content">
                                                    <span>Premium</span>
                                                </div>
                                            </div>
                                                                            </div>
                                    <div class="course-bottom__format-entitled">PDF</div>
                                </a>
                            </li>
                                            </ul>
                </div>
                    </div>

    </div>
</footer>


    </article>
            </div>
        </div>

                    <footer class="footer">
    <div class="centered">
        <div class="row">

            <div class="col3 col6-s  footer__item  linksList  foldable  js-foldable" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: 'closed'">
                <h2 class="linksList__title  foldable__button  js-foldable-button">
                    OpenClassrooms
                    <i class="icon-next  foldable__icon"></i>
                </h2>

                <ul class="linksList__content foldable__content">
                    <li>
                        <a href="https://openclassrooms.com/about-us" class="footer__link">Qui sommes-nous ?</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/how-does-it-work" class="footer__link">Fonctionnement de nos cours</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/jobs" class="footer__link">Recrutement</a>
                    </li>
                    <li>
                        <a href="#" class="js-zendesk-show footer__link">Nous contacter</a>
                    </li>
                </ul>
            </div>

            <div class="col3 col6-s  footer__item  linksList  foldable  js-foldable" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: 'closed'">
                <h2 class="linksList__title  foldable__button  js-foldable-button">
                    Professionnels
                    <i class="icon-next  foldable__icon"></i>
                </h2>

                <ul class="linksList__content foldable__content">
                    <li>
                        <a href="https://openclassrooms.com/affiliation" class="footer__link">
                            Affiliation
                        </a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/business" class="footer__link">Entreprises</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/universities" class="footer__link">Universités et écoles</a>
                    </li>
                </ul>
            </div>

            <div class="col3 col6-s  footer__item  linksList  foldable  js-foldable" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: 'closed'">
                <h2 class="linksList__title  foldable__button  js-foldable-button">
                    Participez
                    <i class="icon-next  foldable__icon"></i>
                </h2>

                <ul class="linksList__content foldable__content">
                    <li>
                        <a href="https://openclassrooms.com/new-teachers" class="footer__link">Créer un cours</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/courses/courselab" class="footer__link">CourseLab</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/terms-conditions/fr" class="footer__link">
                            <strong>Conditions Générales d&#039;Utilisation</strong>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="col3 col6-s  footer__item  linksList  foldable  js-foldable" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: 'closed'">
                <h2 class="linksList__title  foldable__button  js-foldable-button">
                    Suivez-nous
                    <i class="icon-next  foldable__icon"></i>
                </h2>
                                                                    <ul class="linksList__content foldable__content">
                    <li>
                        <a href="http://blog.openclassrooms.com/" class="footer__link">Le blog OpenClassrooms</a>
                    </li>
                    <li>
                        <ul class="footer__socialNetwork">
                            <li>
                                <a href="https://www.facebook.com/openclassrooms" target="_blank" class="roundIcon roundIcon--facebook footer__socialButtons">
                                    <i class="icon-facebook roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://twitter.com/openclassrooms" target="_blank" class="roundIcon roundIcon--twitter footer__socialButtons">
                                    <i class="icon-twitter roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://plus.google.com/+OpenClassrooms/posts" target="_blank" class="roundIcon roundIcon--youtube footer__socialButtons">
                                    <i class="icon-google roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="http://instagram.com/openclassrooms" target="_blank" class="roundIcon roundIcon--instagram footer__socialButtons">
                                    <i class="icon-instagram roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://www.youtube.com/user/TheOpenClassrooms" target="_blank" class="roundIcon roundIcon--googlePlus footer__socialButtons">
                                    <i class="icon-youtube roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://www.linkedin.com/company/openclassrooms" target="_blank" class="roundIcon roundIcon--linkedin footer__socialButtons">
                                    <i class="icon-linkedin roundIcon__icon"></i>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>

            </div>
        </div>
    </div>
</footer>
        
        <!-- loaded javascript block -->

            
            <script type="text/javascript" src="../../js/maind0b3.js?095b5b3"></script>

        

    <script type="text/javascript" src="../../js/oc/courseViewd0b3.js?095b5b3"></script>


        <!-- loaded javascript block -->

        <script type="text/javascript">
    window.analytics=window.analytics||[],window.analytics.methods=["identify","group","track","page","pageview","alias","ready","on","once","off","trackLink","trackForm","trackClick","trackSubmit"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var key=window.analytics.methods[i];window.analytics[key]=window.analytics.factory(key)}window.analytics.load=function(t){if(!document.getElementById("analytics-js")){var a=document.createElement("script");a.type="text/javascript",a.id="analytics-js",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.io/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)}},window.analytics.SNIPPET_VERSION="2.0.9",
    window.analytics.load('mou95e6tdn');
</script>

                            
        <!-- inlined javascript block -->

        <script type="text/javascript">
            
            if (App.modules) {
                App.modules.startAll();
            }
        </script>

                        
    <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"90dc06697a","applicationID":"20302107","transactionName":"NANaYkJXC0ICAhdYVw1Je0NDQgpcTA4AblsPB1FEVWkGXhYTEFRnEwdKQm9GBEMXPhVYXRQ=","queueTime":0,"applicationTime":520,"atts":"GERZFApNGEw=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>

<!-- Mirrored from openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/communiquez-avec-votre-bdd by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Apr 2016 09:52:05 GMT -->
</html>
