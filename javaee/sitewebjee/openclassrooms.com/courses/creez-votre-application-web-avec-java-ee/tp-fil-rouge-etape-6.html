


<!DOCTYPE html>
<html class="no-js" lang="fr" prefix="og: http://ogp.me/ns#">
    
<!-- Mirrored from openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/tp-fil-rouge-etape-6 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Apr 2016 09:52:08 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <meta charset="utf-8" /><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var o=e[n][1][t];return r(o||t)},o,o.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){function r(e,t){return function(){o(e,[(new Date).getTime()].concat(a(arguments)),null,t)}}var o=e("handle"),i=e(2),a=e(3);"undefined"==typeof window.newrelic&&(newrelic=NREUM);var u=["setPageViewName","addPageAction","setCustomAttribute","finished","addToTrace","inlineHit"],c=["addPageAction"],f="api-";i(u,function(e,t){newrelic[t]=r(f+t,"api")}),i(c,function(e,t){newrelic[t]=r(f+t)}),t.exports=newrelic,newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),o("err",[e,(new Date).getTime()])}},{}],2:[function(e,t,n){function r(e,t){var n=[],r="",i=0;for(r in e)o.call(e,r)&&(n[i]=t(r,e[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],3:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(0>o?0:o);++r<o;)i[r]=e[t+r];return i}t.exports=r},{}],ee:[function(e,t,n){function r(){}function o(e){function t(e){return e&&e instanceof r?e:e?u(e,a,i):i()}function n(n,r,o){e&&e(n,r,o);for(var i=t(o),a=l(n),u=a.length,c=0;u>c;c++)a[c].apply(i,r);var s=f[g[n]];return s&&s.push([m,n,r,i]),i}function p(e,t){w[e]=l(e).concat(t)}function l(e){return w[e]||[]}function d(e){return s[e]=s[e]||o(n)}function v(e,t){c(e,function(e,n){t=t||"feature",g[n]=t,t in f||(f[t]=[])})}var w={},g={},m={on:p,emit:n,get:d,listeners:l,context:t,buffer:v};return m}function i(){return new r}var a="nr@context",u=e("gos"),c=e(2),f={},s={},p=t.exports=o();p.backlog=f},{}],gos:[function(e,t,n){function r(e,t,n){if(o.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[t]=r,r}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){o.buffer([e],r),o.emit(e,t,n)}var o=e("ee").get("handle");t.exports=r,r.ee=o},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!w++){var e=v.info=NREUM.info,t=s.getElementsByTagName("script")[0];if(e&&e.licenseKey&&e.applicationID&&t){c(l,function(t,n){e[t]||(e[t]=n)});var n="https"===p.split(":")[0]||e.sslForHttp;v.proto=n?"https://":"http://",u("mark",["onload",a()],null,"api");var r=s.createElement("script");r.src=v.proto+e.agent,t.parentNode.insertBefore(r,t)}}}function o(){"complete"===s.readyState&&i()}function i(){u("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var u=e("handle"),c=e(2),f=window,s=f.document;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:f.XMLHttpRequest,REQ:f.Request,EV:f.Event,PR:f.Promise,MO:f.MutationObserver},e(1);var p=""+location,l={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-918.min.js"},d=window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent),v=t.exports={offset:a(),origin:p,features:{},xhrWrappable:d};s.addEventListener?(s.addEventListener("DOMContentLoaded",i,!1),f.addEventListener("load",r,!1)):(s.attachEvent("onreadystatechange",o),f.attachEvent("onload",r)),u("mark",["firstbyte",a()],null,"api");var w=0},{}]},{},["loader"]);</script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <meta name="application-name" content="OpenClassrooms"/>
        <meta name="msapplication-TileColor" content="#e95325"/>
        <meta name="msapplication-TileImage" content="/fav-icon.png?v=1"/>

        <meta name="theme-color" content="#E95325">
        <link rel="icon" sizes="144x144" href="../../fav-icon3860.png?v=1">

        
        
        <link href="../../bundles/common/css/masterd0b3.css?095b5b3" type="text/css" rel="stylesheet" media="all"  />
        

        <link rel="apple-touch-icon" href="../../apple-touch-icon.png" />
        <link rel="apple-touch-icon" href="../../apple-touch-icon-iphone.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="../../apple-touch-icon-ipad.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="../../apple-touch-icon-iphone-retina-display.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="../../apple-touch-icon-ipad-retina-display.png" />

        <link rel="apple-touch-icon-precomposed" href="../../apple-touch-icon-precomposed.png" />

            <link href="../../bundles/course/css/maind0b3.css?095b5b3" type="text/css" rel="stylesheet" media="all"/>

        <script type="text/javascript" src="../../js/modernizrd0b3.js?095b5b3"></script>

        <link rel="shortcut icon" href="https://openclassrooms.com/favicon.ico?095b5b3" />

            
    <meta property="og:locale" content="fr"/>
    <meta property="og:type" content="website"/>

    <meta property="og:title" content="Découvrez le cours &quot;TP Fil rouge - Étape 6&quot; sur @OpenClassrooms"/>
    <meta property="og:url" content="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/tp-fil-rouge-etape-6"/>
    <meta property="og:site_name" content="OpenClassrooms"/>
    <meta property="og:image" content="https://static.oc-static.com/prod/courses/illustrations/illu_creez-votre-application-web-avec-java-ee.png"/>
    <meta property="og:description" content="Pour réaliser des sites web en Java, on utilise l&#039;environnement Java EE (anciennement appelé J2EE). Celui-ci impose de développer de façon très structurée, ce qui explique certainement pour quoi on le retrouve dans un très grand nombre d&#039;applications web notamment en entreprise (banques, administrations...)."/>

            
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@OpenClassrooms"/>
    <meta name="twitter:title" content="Découvrez le cours &quot;TP Fil rouge - Étape 6&quot; sur @OpenClassrooms"/>
    <meta name="twitter:description" content=""/>

                
        <title>TP Fil rouge - Étape 6</title>

        <!-- inlined top javascript block -->


        <script type="text/javascript">
            var App = {
                startTime: (new Date()).getTime(),
                debug: false
            };

            App.user = {
                
                
                
                isPremium: false
            };


            App.preferences = {
                assetVersion: '095b5b3',
                contactMail: 'hello@openclassrooms.com',
                adyenPublicKey: '10001|889EBFD4D434B82683E21DCA26E77C3E20E0EE09A5ECE3830B0ED51F2FA721A2F7E9EC871C6AB9A1E12C4492F4717673047757E02C5256D8E265CD51E413E5EFCCFEAC41B39C662A424ADC13EE187C38C372A7FCCEC1EA5DF841989437D78B252A8EB51008E60BB55B1E55A7A80DE1A9D60D998C128A576BFAE1DDB97D514AF0A073AEDDE84CEE40D1F8F6ECE85D0FFA50C95C06DB274021C1371376C6EB16561FD65C5E2704B570A7504D617D0F3820F176A0609F6162BDF5890533289FDC3DA7DB03B50BB3BD60A613E1FF72060F22987627E8F1A29F0128A94EC4C8FF7CF6B7AB9558D8433BF86D7A388AB927641CD6C02689139CEE3AAC9ACBFFE83806CB',
                algolia: {
                    appId: 'JGRXRFVQM0',
                    apiKey: 'dfbdea500cb0b5f46e449ad334916c44', indexName: 'prod_COURSES_fr'
                },
                routes: {
                    COURSE_EVENT: '/components/courses/:courseId',
                    COURSE_PART_EVENT: '/components/courses/:courseId/parts/:partId',

                    ACCEPT_COOKIE: '/components/user-accept-consent-cookie'
                }

                                            };

            App.preferences.navigationPreference = {
                            };

            App.preferences.modules = {
                'smiley': {
                    basePath: '/bundles/common/images/smiley/'
                }
            };
        </script>
        <!-- inlined top javascript block end -->

        <script>    App.preferences.modules['course/view/internalFolding'] = {
        isBigCourse: true
    };

    App.data = App.data || {};
App.data.currentCourse = {"partId":624970,"courseId":626954};
App.preferences.modules['view/currentCoursePage'] = App.data.currentCourse;

</script>

        
        
    </head>

    <body class="course oc-body ">

        

        
    
    
    <script id="_EVENTS-PAGE" type="application/json">
        {"type":"page"}
    </script>


        <!--[if lt IE 9]>
<div class="disclaimer  disclaimer-error">
    Vous utilisez un navigateur obsolète, veuillez le <a href="http://browsehappy.com/">mettre à jour</a>.
</div>
<![endif]-->

<noscript>
    <div class="disclaimer  disclaimer--error">
        Veuillez utiliser un <a href="http://browsehappy.com/">navigateur internet moderne</a> avec JavaScript activé pour naviguer sur OpenClassrooms.com
    </div>
</noscript>


                    

<header id="oc-header" class="js-tabs-mobile mainHeader ">

        <div class="disclaimer  disclaimer--info hidden  js-cookie-disclaimer">
        <div class="disclaimer__wrapper">
            <span class="disclaimer__content">Bienvenue sur OpenClassrooms ! En poursuivant votre navigation, vous acceptez l'utilisation de cookies. <a href="https://openclassrooms.com/privacy-policy#personal-data-gathering">En savoir plus</a></span>
            <span class="disclaimer__actions">
                <a href="#" class="disclaimer__button  js-close-button">ok</a>
            </span>
        </div>
    </div>

    <div class="mainHeader__wrapper">

        <div class="mainHeader__topLine">
                <a href="https://openclassrooms.com/pole-emploi/partenariat?utm_source=SiteWeb-OC&amp;utm_medium=Lien-PhraseHeader&amp;utm_campaign=relancePE"> Vous êtes demandeur d'emploi ? On vous offre le Premium Solo en 3 clics :) ! </a>

        </div>

        <div class="mainHeader__top">
            <a href="https://openclassrooms.com/" class="mainHeader__logo" title="OpenClassrooms.com">OpenClassrooms.com</a>

            
<nav role="navigation" class="icoTabs  mainHeader__tabSet">
    <span class="mainHeader__mobileNav">

        
        
        <a class="js-tabs-tab  icoTabs__tab  is-disabled" href="#tab-courseMenu">
            <span class="icoTabs__inner--mobileRightSeparator">
                <i class="icon-plus  icoTabs__icon"></i>
            </span>
        </a>

        <a class="js-tabs-tab  icoTabs__tab  is-disabled" href="#tab-courseEditMenu">
            <span class="icoTabs__inner--mobileRightSeparator">
                <i class="icon-plus  icoTabs__icon"></i>
            </span>
        </a>

        <a class="js-tabs-tab  icoTabs__tab  is-disabled" data-tabs-default="true" href="#tab-searchMenu">
            <span class="icoTabs__inner--mobileRightSeparator">
                <i class="icon-search  icoTabs__icon"></i>
            </span>
        </a>

        <a class="js-tabs-tab  icoTabs__tab" href="#tab-main">
            <i class="icon-menu  icoTabs__icon"></i>
        </a>
    </span>

</nav>
        </div>

                <div class="js-tabs-content  mainHeader__content"></div>

        <div class="mainHeader__content">
            <div id="tab-main" class="mainHeader__tabs">
                <nav class="mainTopNav  scrollPanel  js-scrollPanel-mobileMenu">
    <div class="mainTopNav__container  scrollPanel__container  js-scrollPanel-container">
        <ul class="mainHeader__container  mainHeader__container--mainMenu  js-scrollPanel-content">
            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="http://openclassrooms.com/paths/">Parcours</a>
            </li>
            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="https://openclassrooms.com/courses">Cours</a>
            </li>
            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="https://openclassrooms.com/forum/">Forums</a>
            </li>

            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="https://openclassrooms.com/partners">Partenaires</a>
            </li>

            <li class="mainHeader__containerItem">
                <a class="mainTopNav__item" href="https://openclassrooms.com/premium">Premium</a>
            </li>
        </ul>
    </div>
</nav>

                <div class="mainHeader__contentInner">
                    <div class="mainHeader__container  mainHeader__container--search">
                                                                                                                                                                            
                                                                          
 <div class="js-courseSearch  topSearchBox">
     <form tabindex="0" class="js-courseSearch-form  oc-form" action="https://openclassrooms.com/courses" method="get">
         <div class="js-courseSearch-inputGroup oc-form__widget  inputGroup  topSearchBox__inner">
             <input id="algolia-search-input"
                    type="search"
                    class="js-courseSearch-input oc-form__control inputGroup__input  topSearchBox__input"
                    title="Rechercher"
                    autocomplete="off"
                    data-option_source="/components/courses/search?q=<%= term %>"
                    placeholder="Rechercher"
                    name="q" />

             <button class="js-courseSearch-button  oc-btn dark-btn  only-icon  inputGroup__button  topSearchBox__button" type="submit" title="Rechercher un cours">
                 <i class="inputGroup__icon icon-search"></i>
                 <i class="inputGroup__icon inputGroup__icon--load icon-spinner icon-spin"></i>
             </button>
         </div>
     </form>
 </div>
                    </div>

                                            <div class="mainHeader__container  mainHeader__container--separatorLarge  hidden-s"></div>
                    


                    
                                            <div class="mainHeader__container  mainHeader__container--login">
    <a href="https://openclassrooms.com/register" class="oc-btn orange-alt-btn js-popin-activator space-right" data-popin-selector="#popin-sign-in">
    S&#039;inscrire
</a>
<a href="https://openclassrooms.com/login" class="oc-btn dark-btn js-popin-activator" data-popin-selector="#popin-log-in">
    Se connecter
</a>
</div>


<aside  tabindex="-1"
        role="dialog"
                    aria-labelledby="popin-sign-in_popin_title"
                class="popin popin--small  js-popin"
        id="popin-sign-in"
>
    <i class="popin__close-button icon-close js-close-button"></i>

    <div class="popin__inner">
        
        <div class="popin__mainContainer">
                            <h3 id="popin-sign-in_popin_title" class="popin__title  js-popin-title">Inscription</h3>
            
            
            
            <div class="popin__content  js-popin-content">
                <div class="popin__contentWrapper">
                                                <div class="formLogin formLogin--smallSize">
            
<ul class="table table--fullwidth u--noMargin">
    <li class="formLogin__column">
        <a class="facebook-btn oc-btn fullwidth formLogin__facebook" href="https://www.facebook.com/v2.3/dialog/oauth?client_id=277769842283905&amp;redirect_uri=https%3A%2F%2Fopenclassrooms.com%2Flogin_check_facebook&amp;state=608692825cc3820cf5a3e3a53af16657&amp;sdk=php-sdk-4.0.23&amp;scope=public_profile%2Cemail">
            <i class="icon-facebook"></i>S&#039;inscrire avec Facebook
        </a>
        <a class="google-btn oc-btn fullwidth formLogin__google" href="https://accounts.google.com/o/oauth2/auth?response_type=code&amp;redirect_uri=https%3A%2F%2Fopenclassrooms.com%2Flogin_check_google&amp;client_id=132418960718-jdnmpug3g9e6ub2p41ergcci1492qh82.apps.googleusercontent.com&amp;scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fplus.me+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&amp;access_type=online&amp;approval_prompt=auto">
            <i class="icon-google"></i>S&#039;inscrire avec Google
        </a>
    </li>

    <li class="formLogin__column">
        
            
    
    

    <form name="register" method="post" action="https://openclassrooms.com/register" class="js-registerForm oc-form">

        <div class="accessibility-hidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Wonder&nbsp;                        </span><span class="oc-form__widget"><input type="text" id="register_wonder" name="register[wonder]" class="" /></span></label>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Prénom&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="text" id="register_firstName" name="register[firstName]" required="required" autofocus="autofocus" class="" /></span></label>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Nom&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="text" id="register_lastName" name="register[lastName]" required="required" class="" /></span></label>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Adresse email&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="email" id="register_email" name="register[email]" required="required" class="" /></span></label>
            <p>
                <em>
                    Vous recevrez votre mot de passe sur cette adresse email.
                </em>
            </p>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row  oc-form__row--reversed  "><span class="oc-form__widget"><span class="ocCheckbox"><input type="checkbox" id="register_terms" name="register[terms]" required="required" class="" value="1" /><span class="ocCheckbox__check"></span></span></span><span class="oc-form__label-text"><span class="oc-form__label-text ">
                            J'ai lu et j'accepte les <a href="https://openclassrooms.com/terms-conditions/fr">Conditions Générales d'Utilisation</a>.&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span></span></label>
        </div>


        <div class="oc-form__group  center-text">
            
    <button type="submit" id="register_create" name="register[create]" class="oc-btn orange-alt-btn oc-btn"> S'inscrire</button>
        </div>

        <input type="hidden" id="register__target_path" name="register[_target_path]" value="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/tp-fil-rouge-etape-6" /><input type="hidden" id="register__token" name="register[_token]" value="LEhsW-IhokD4hQHYoHva_FZzYy-PP2cG-886IBpx9HY" /></form>
    </li>
</ul>
        </div>
                    </div>
            </div>

            
                        
                    </div>
    </div>
</aside>



<aside  tabindex="-1"
        role="dialog"
                    aria-labelledby="popin-log-in_popin_title"
                class="popin popin--small  js-popin"
        id="popin-log-in"
>
    <i class="popin__close-button icon-close js-close-button"></i>

    <div class="popin__inner">
        
        <div class="popin__mainContainer">
                            <h3 id="popin-log-in_popin_title" class="popin__title  js-popin-title">Connexion</h3>
            
            
            
            <div class="popin__content  js-popin-content">
                <div class="popin__contentWrapper">
                                                <div class="formLogin formLogin--smallSize">
            
<ul class="table table--fullwidth u--noMargin">
    <li class="formLogin__column">
        <a class="facebook-btn oc-btn fullwidth formLogin__facebook" href="https://www.facebook.com/v2.3/dialog/oauth?client_id=277769842283905&amp;redirect_uri=https%3A%2F%2Fopenclassrooms.com%2Flogin_check_facebook&amp;state=608692825cc3820cf5a3e3a53af16657&amp;sdk=php-sdk-4.0.23&amp;scope=public_profile%2Cemail"><i class="icon-facebook"></i> Se connecter avec Facebook</a>
        <a class="google-btn oc-btn fullwidth formLogin__google" href="https://accounts.google.com/o/oauth2/auth?response_type=code&amp;redirect_uri=https%3A%2F%2Fopenclassrooms.com%2Flogin_check_google&amp;client_id=132418960718-jdnmpug3g9e6ub2p41ergcci1492qh82.apps.googleusercontent.com&amp;scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fplus.me+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&amp;access_type=online&amp;approval_prompt=auto"><i class="icon-google"></i> Se connecter avec Google</a>
    </li>

    <li class="formLogin__column">

        
            
    
    

    <form name="" method="post" action="https://openclassrooms.com/login_check" class=" oc-form">

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Adresse email ou nom d'utilisateur&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="text" id="_username" name="_username" required="required" autofocus="autofocus" class="" /></span></label>
        </div>

        <div class="oc-form__group oc-form--requiredHidden">
                <label class="oc-form__row    "><span class="oc-form__label-text ">
                            Mot de passe&nbsp;<abbr class="oc-form__required" title="requis"><span>*</span></abbr></span><span class="oc-form__widget"><input type="password" id="_password" name="_password" required="required" class="" /></span></label>
        </div>

        <div class="oc-form__group">
                <label class="oc-form__row  oc-form__row--reversed  "><span class="oc-form__widget"><span class="ocCheckbox"><input type="checkbox" id="_remember_me" name="_remember_me" class="" value="1" checked="checked" /><span class="ocCheckbox__check"></span></span></span><span class="oc-form__label-text"><span class="oc-form__label-text ">
                            Se souvenir de moi&nbsp;                        </span></span></label>
        </div>

        <div class="oc-form__group right-text">
            <a href="https://openclassrooms.com/set-new-password">Mot de passe oublié</a>
        </div>

        <div class="oc-form__group  center-text">
            <input type="hidden" id="_target_path" name="_target_path" value="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/tp-fil-rouge-etape-6" /><div>
    <button type="submit" id="login" name="login" class="orange-alt-btn oc-btn"> Se connecter</button></div><input type="hidden" id="_csrf_token" name="_csrf_token" value="WFIVlYEKEcL5v9hnQC1z3quXwgYs14KEFOLh1GUmi_I" />
        </div>

        </form>
    </li>
</ul>
<p class="text-center space-top">
    Pas encore membre ? <a href="https://openclassrooms.com/register">Inscrivez-vous gratuitement</a> en 30s.
</p>
        </div>
                    </div>
            </div>

            
                        
                    </div>
    </div>
</aside>
                    
                    <div class="mainHeader__container  mainHeader__container--langSelector">
                        <div class="js-popOut-header  popOut popOut--small  popOut--rightAlign" data-keep-it-mobile="true">
    <span class="js-popOut-button  popOut__button">
                    <a href="javascript:;" class="languageSelector__selected">Français</a>
            </span>
    <ul class="popOutList  popOut__content  popOutList--small">
                    <li class="popOutList__item">
                <a class="popOutList__link" href="https://openclassrooms.com/change-locale/en/wsADDEtTJgeOfRBlmygmpV2y0eneCLAuyYJYnverVSQ">English</a>
            </li>
                    <li class="popOutList__item">
                <a class="popOutList__link" href="https://openclassrooms.com/change-locale/es/wsADDEtTJgeOfRBlmygmpV2y0eneCLAuyYJYnverVSQ">Español</a>
            </li>
            </ul>
</div>

                    </div>
                </div>
            </div>

        </div>
    </div>
</header>

        
        <div id="mainSearch" class="centered search-content">
        </div>

        <div id="mainContentWithHeader">
            <div id="pre-main-part">
                
                                        <section class="inset no-padding">
        <div class="centered">

            <h6 class="accessibility-hidden">Fil d&#039;Ariane</h6>

            <nav class="breadcrumb">
                <ul class="breadcrumbtrail">
                                                                        <li class="home" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                                                                            <a href="https://openclassrooms.com/" itemprop="url">
                                <span itemprop="title">Accueil</span>
                            </a>
                                                                            <div class="arrow-right"></div>
                                                </li>
                                                                        <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                                                                            <a href="https://openclassrooms.com/courses" itemprop="url">
                                <span itemprop="title">Cours</span>
                            </a>
                                                                            <div class="arrow-right"></div>
                                                </li>
                                                                        <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                                                                            <a href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee?status=published" itemprop="url">
                                <span itemprop="title">Créez votre application web avec Java EE</span>
                            </a>
                                                                            <div class="arrow-right"></div>
                                                </li>
                                                                        <li class="current" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
                                                                            TP Fil rouge - Étape 6
                                                                        </li>
                                    </ul>
            </nav>
        </div>
    </section>

                
                            </div>

            <div class="claire clearfix" >
                    <article itemscope itemtype="http://schema.org/Article">

                        
<header class="course-header" xmlns="http://www.w3.org/1999/html">
    <div class="centered"><div class="course-header__topPart"><div class="course-header__info"><a itemprop="url" href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee"><h1 data-course-title="Créez votre application web avec Java EE">Créez votre application web avec Java EE</h1></a><span class="course-header__updatedTime visible-l">Mis à jour le lundi 13 juillet 2015</span></div></div></div><div class="course-header__details-container"><div class="centered"><div class="row"><div class="col12"><div class="course-header__details  iconBar"><div class="course-header__detailsGroup  course-header__detailsGroup--formats iconBar__group"><ul data-option_popinselector="#popin-formats-availables" class="course-types iconBar__list js-course-formats-bar"><li class="iconBar__item  course-types__item  js-tooltip" title="Ce cours est visible gratuitement en ligne."><a href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee"><i class="icon-desktop  course-types__icon"></i><span class="course-header__format-current"></span></a></li><li class="iconBar__item  course-types__item iconBar__item--dimmed js-tooltip" title="Ce cours n&#039;est pas encore en vidéo."><span><i class="icon-video course-types__icon"></i></span></li><li class="iconBar__item  course-types__item  js-tooltip" title="Ce cours existe en livre papier."><a href="http://www.eyrolles.com/Informatique/Livre/creez-des-applications-web-avec-java-ee-9791090085244?societe=openclassrooms" target="_blank"><i class="icon-book  course-types__icon"></i></a></li><li class="iconBar__item  course-types__item  js-tooltip" title="Ce cours existe en eBook."><a href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee"><i class="icon-ebook  course-types__icon"></i></a></li><li class="iconBar__item  course-types__item iconBar__item--dimmed js-tooltip"
                                                                                            title="Vous ne pouvez pas encore obtenir de certificat de réussite à l&#039;issue de ce cours."
                                                                                ><a
                                                                                        ><i class="icon-badge  course-types__icon"></i></a></li><li class="iconBar__item  course-types__item iconBar__item--dimmed js-tooltip" title="Ce cours n&#039;est pas encore diplômant et ne vous permet pas d&#039;obtenir des crédits universitaires européens (ECTS)."><span><i class="icon-hat  course-types__icon"></i></span></li><li class="iconBar__item  course-types__item  js-tooltip" title="Vous pouvez être accompagné sur ce cours par un mentor dédié en visioconférence."><a  href="https://openclassrooms.com/premium#discover-premium-plus-offer" ><i class="icon-mentor  course-types__icon"></i></a></li></ul></div><div class="course-header__detailsGroup  course-header__detailsGroup--info  iconBar__group"><ul class="iconBar__list"><li class="iconBar__item"><i class="icon-duration iconBar__icon js-tooltip" title="Ce cours demande en moyenne 40 heures de travail pour être réussi."></i><span class="iconBar__label">40 heures</span></li><li class="iconBar__item"><i class="icon-level iconBar__icon"></i><span class="iconBar__label">
                                                                                                    Moyenne
                                                                                            </span></li></ul></div><div class="course-header__detailsGroup course-header__detailsGroup--licences iconBar__group"><a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.0"><span class="iconBar__label">Licence</span><ul class="iconBar__list"><li class="iconBar__item"><i class="icon-cc iconBar__icon" title="CC"></i></li><li class="iconBar__item"><i class="icon-ccby iconBar__icon" title="BY"></i></li><li class="iconBar__item"><i class="icon-ccnc iconBar__icon" title="NC"></i></li><li class="iconBar__item"><i class="icon-ccsa iconBar__icon" title="SA"></i></li></ul></a></div></div></div></div></div></div>
    <div id="popin-formats-availables" class="popin popin--course-formats-availables">
        <i class="popin__close-button icon-close js-close-button"></i>

        <div class="course-types course-types--withSpace">
                            <a class="course-types__item" href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee">
                    <i class="icon-desktop course-types__icon"></i>
                </a>
            
            
                            <a class="course-types__item" href="http://www.eyrolles.com/Informatique/Livre/creez-des-applications-web-avec-java-ee-9791090085244?societe=openclassrooms">
                    <i class="icon-book course-types__icon"></i>
                </a>
            
                            <a class="course-types__item" href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee">
                    <i class="icon-ebook course-types__icon"></i>
                </a>
            
            
                                        <a class="course-types__item" href="https://openclassrooms.com/premium#discover-premium-plus-offer">
                    <i class="icon-mentor course-types__icon"></i>
                </a>
                    </div>

                    <p>Ce cours est visible <a href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee">gratuitement en ligne</a>.</p>
        
        
                    <p>
                Ce cours existe en livre papier.
            </p>
        
                    <p>Ce cours existe <a href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee">en eBook</a>.</p>
        
        
        
                    <p>
                Vous pouvez être <a href="https://openclassrooms.com/premium#discover-premium-plus-offer">accompagné et mentoré par un professeur particulier</a> par visioconférence sur ce cours.
            </p>
        
        <a class="oc-btn orange-alt-btn js-close-button" href="#">J&#039;ai tout compris !</a>
    </div>

    
</header>

    <div class="centered">
                            
        
            <div class="row">
        <div class="col12 col11-s">
                            <nav class="timeline">
        <div class="timeline__inner">

        <span class="timeline__iconContainer">
            <a href="https://openclassrooms.com/courses/creez-votre-application-web-avec-java-ee" title="Retour sur le sommaire du cours" class="roundIcon timeline__roundIcon">
                <i class="icon-home roundIcon__icon"></i>
            </a>
        </span>
            <div class="timeline__steps">
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="introduction-au-java-ee.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Introduction au Java EE
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-java-ee-mis-a-nu.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le Java EE mis à nu !
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="outils-et-environnement-de-developpement.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Outils et environnement de développement
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="la-servlet.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La servlet
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="servlet-avec-vue.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Servlet avec vue…
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="transmission-de-donnees.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Transmission de données
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-javabean.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le JavaBean
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-technologie-jsp-1-2.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La technologie JSP (1/2)
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-technologie-jsp-2-2.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La technologie JSP (2/2)
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="des-problemes-de-vue.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Des problèmes de vue ?
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-1.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 1
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="objectifs-et-configuration.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Objectifs et configuration
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-bibliotheque-core.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La bibliothèque Core
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="jstl-core-exercice-d-application.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    JSTL core : exercice d&#039;application
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-bibliotheque-xml.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La bibliothèque xml
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="jstl-xml-exercice-d-application.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    JSTL xml : exercice d&#039;application
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="faisons-le-point-2.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Faisons le point !
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-2.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 2
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="formulaires-le-b-a-ba.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Formulaires : le b.a.-ba
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="formulaires-a-la-mode-mvc.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Formulaires : à la mode MVC
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-3.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 3
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-session-connectez-vos-clients.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La session : connectez vos clients
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-filtre-creez-un-espace-membre.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le filtre : créez un espace membre
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-cookie-le-navigateur-vous-ouvre-ses-portes.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le cookie : le navigateur vous ouvre ses portes
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-4.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 4
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="formulaires-l-envoi-de-fichiers.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Formulaires : l&#039;envoi de fichiers
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-telechargement-de-fichiers.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le téléchargement de fichiers
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-5.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 5
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="introduction-a-mysql-et-jdbc.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Introduction à MySQL et JDBC
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="communiquez-avec-votre-bdd.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Communiquez avec votre BDD
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="le-modele-dao.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Le modèle DAO
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-6.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 6
                                </span>

                                                                    <span class="timeline__progressMarker"></span>
                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="gerer-un-pool-de-connexions-avec-bonecp.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Gérer un pool de connexions avec BoneCP
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="les-annotations.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Les annotations
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-persistance-des-donnees-avec-jpa.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La persistance des données avec JPA
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="tp-fil-rouge-etape-7.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    TP Fil rouge - Étape 7
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="introduction-aux-frameworks-mvc.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Introduction aux frameworks MVC
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="premiers-pas-avec-jsf.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Premiers pas avec JSF
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="la-gestion-d-un-formulaire-avec-jsf.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    La gestion d&#039;un formulaire avec JSF
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="l-envoi-de-fichiers-avec-jsf.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    L&#039;envoi de fichiers avec JSF
                                </span>

                                                            </a>
                                            
                
                    <span class="timeline__splitChapter"></span>

                                            
                                                        
                            <a
                                                                    href="debugger-un-projet.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Débugger un projet
                                </span>

                                                            </a>
                                                                    
                                                        
                            <a
                                                                    href="empaquetage-et-deploiement-d-un-projet.html" class="timeline__step"
                                                            >
                                <span class="timeline__stepName">
                                    Empaquetage et déploiement d&#039;un projet
                                </span>

                                                            </a>
                                            
                
                <span class="timeline__splitChapter"></span>

            </div>

        <span class="timeline__iconContainer">
                            <span title="Ce cours n&#039;est pas encore certifiant." class="roundIcon roundIcon--disabled">
                    <i class="icon-trophy roundIcon__icon"></i>
                </span>
                    </span>

        </div>
    </nav>
        </div>
    </div>
    </div>

        
        <div class="centered">
            <div class="contentWithSidebar  spacer  js-contentWithSidebar" >
                <main class="contentWithSidebar__content" >
                        

        <div class="relative js-sidebar-container">
        <div class="static">
    <h2 itemprop="name" data-part-title="TP Fil rouge - Étape 6" class="part-title">TP Fil rouge - Étape 6</h2>

    <section class="row space-bottom js-desktop-sticky-container">
        <div class="col9 col11-s col__small-padding--right">

                <div class="tooltipMessage tooltipMessage--noArrow">
        <i class="tooltipMessage__icon  icon-lock"></i>
        <a href="https://openclassrooms.com/login" class="js-popin-activator" data-popin-selector="#popin-log-in" >Connectez-vous</a> ou <a href="https://openclassrooms.com/register" class="js-popin-activator" data-popin-selector="#popin-sign-in" >inscrivez-vous</a> pour bénéficier de toutes les fonctionnalités de ce cours !
    </div>

            <div
                itemprop="articleBody"
                data-page-indentifier="/courses/creez-votre-application-web-avec-java-ee/tp-fil-rouge-etape-6"
                class="js-isRestrictablePage course-content js-course-container js-smilize "

                                    data-video-blocked-wrapper="<a href='https://openclassrooms.com/login#popin-log-in' class='js-popin-activator'>"
                            >

                <p id="r-2137037" data-claire-element-id="2354088">Sixième étape du fil rouge, le temps est enfin venu pour vous d'intégrer une base de données à votre application ! Création de la base, des tables, des DAO associés et intégration dans l'application existante vous attendent.</p><h3 id="r-2137050" data-claire-element-id="2354101">Objectifs</h3><h4 id="r-2137049" data-claire-element-id="2354100">Fonctionnalités</h4><p id="r-2137038" data-claire-element-id="2354089">Vous allez mettre en place une base de données dans votre application. Ce changement va impliquer que :</p><ul id="r-2137047" data-claire-element-id="2354098"><li id="r-2137040" data-claire-element-id="2354091"><p id="r-2137039" data-claire-element-id="2354090">lors de la création d'un client ou d'une commande par l'utilisateur, les données ne seront maintenant plus seulement mises en session, mais également enregistrées dans la base ;</p></li><li id="r-2137042" data-claire-element-id="2354093"><p id="r-2137041" data-claire-element-id="2354092">vous allez rendre possible la création de clients portant le même nom, et de commandes passées à la même date ;</p></li><li id="r-2137044" data-claire-element-id="2354095"><p id="r-2137043" data-claire-element-id="2354094">les pages listant les clients et commandes existants continueront à se baser uniquement sur les données présentes en session ;</p></li><li id="r-2137046" data-claire-element-id="2354097"><p id="r-2137045" data-claire-element-id="2354096">la suppression d'un client ou d'une commande ne supprimera pas seulement les données de la session, mais également de la base.</p></li></ul><p id="r-2137048" data-claire-element-id="2354099">C'est « tout » ce que je vous demande... :-°</p><h3 id="r-2137158" data-claire-element-id="2838222">Conseils</h3><aside id="r-2137052" data-claire-element-id="2354103" data-claire-semantic="warning"><p id="r-2137051" data-claire-element-id="2354102">Ne vous fiez pas à la faible longueur du sujet : énormément de travail et de réflexion vous attendent !</p></aside><h4 id="r-2137075" data-claire-element-id="2838214">Création de la base de données</h4><p id="r-2137053" data-claire-element-id="2354104">La première étape consiste à créer la base et les tables représentant les données de votre application. Ceci ne faisant pas directement l'objet de ce cours, je vais vous accompagner en vous détaillant chaque instruction. Suivez le guide !</p><h5 id="r-2137055" data-claire-element-id="2354106">Connexion au serveur MySQL</h5><p id="r-2137054" data-claire-element-id="2354105">Connectez-vous à votre serveur via la commande <code>mysql -h localhost -u root -p</code>, puis entrez votre mot de passe le cas échéant.</p><h5 id="r-2137058" data-claire-element-id="2838208">Création d'une base</h5><p id="r-2137056" data-claire-element-id="2354107">Mettez en place une nouvelle base de données nommée <strong>tp_sdzee</strong> à l'aide de l'instruction suivante :</p><pre id="r-2137057" data-claire-element-id="2838207"><code data-claire-semantic="sql">CREATE DATABASE tp_sdzee DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;</code></pre><h5 id="r-2137062" data-claire-element-id="2838210">Mise en place des droits</h5><p id="r-2137059" data-claire-element-id="2354110">Vous savez qu'utiliser le compte <strong>root</strong> est une mauvaise pratique, vous devez donc accorder des droits sur la nouvelle table à l'utilisateur <strong>java</strong> créé dans le cadre du cours, via l'instruction suivante :</p><pre id="r-2137060" data-claire-element-id="2838209"><code data-claire-semantic="sql">GRANT ALL ON tp_sdzee.* TO 'java'@'localhost' IDENTIFIED BY 'SdZ_eE';</code></pre><p id="r-2137061" data-claire-element-id="2354112">Vous devez ensuite vous déconnecter de l'utilisateur <strong>root</strong> via la commande <code>exit</code>, puis vous reconnecter avec votre compte <strong>java</strong> via la commande <code>mysql -h localhost -u java -p</code>, entrer le mot de passe et enfin entrer la commande <code>use tp_sdzee</code> pour définir la base sur laquelle vous allez travailler.</p><h5 id="r-2137074" data-claire-element-id="2838213">Création des tables</h5><p id="r-2137063" data-claire-element-id="2354114">Vous devez alors créer une table <strong>Client</strong> contenant les champs <strong>id</strong>, <strong>nom</strong>, <strong>prenom</strong>, <strong>adresse</strong>, <strong>telephone</strong>, <strong>email</strong> et <strong>image</strong>. Voici un exemple d'instruction que vous pouvez utiliser pour cela :</p><pre id="r-2137064" data-claire-element-id="2838211"><code data-claire-semantic="sql">CREATE TABLE tp_sdzee.Client (
 id INT( 11 ) NOT NULL AUTO_INCREMENT ,
 nom VARCHAR( 20 ) NOT NULL ,
 prenom VARCHAR( 20 ) ,
 adresse VARCHAR( 200 ) NOT NULL ,
 telephone VARCHAR( 10 ) NOT NULL,
 email VARCHAR( 60 ) ,
 image VARCHAR( 200 ) ,
 PRIMARY KEY ( id )
) ENGINE = INNODB;</code></pre><p id="r-2137065" data-claire-element-id="2354116">Rien de particulier ici, remarquez simplement la mise en place d'un champ <strong>id</strong> pour identifier chaque client.</p><p id="r-2137066" data-claire-element-id="2354117">De même, vous devez créer une table <strong>Commande</strong> contenant les champs <strong>id</strong>, <strong>id_client</strong>, <strong>date</strong>, <strong>montant</strong>, <strong>modePaiement</strong>, <strong>statutPaiement</strong>, <strong>modeLivraison</strong> et <strong>statutLivraison</strong> :</p><pre id="r-2137067" data-claire-element-id="2838212"><code data-claire-semantic="sql">CREATE TABLE tp_sdzee.Commande (
 id INT( 11 ) NOT NULL AUTO_INCREMENT ,
 id_client INT( 11 ) ,
 date DATETIME NOT NULL ,
 montant DEC( 11 ) NOT NULL ,
 mode_paiement VARCHAR( 20 ) NOT NULL ,
 statut_paiement VARCHAR( 20 ) ,
 mode_livraison VARCHAR( 20 ) NOT NULL ,
 statut_livraison VARCHAR( 20 ) ,
 PRIMARY KEY ( id ) ,
 CONSTRAINT fk_id_client      -- On donne un nom à notre clé
    FOREIGN KEY (id_client)   -- Colonne sur laquelle on crée la clé
    REFERENCES Client(id)     -- Colonne de référence (celle de la table Client)
    ON DELETE SET NULL        -- Action à effectuer lors de la suppression d'une référence
) ENGINE = INNODB;</code></pre><p id="r-2137068" data-claire-element-id="2354119">Première chose, vous remarquez ici que vous n'allez pas enregistrer les données des clients directement dans la table <strong>Commande</strong>, mais uniquement leur <strong>id</strong> dans le champ <strong>id_client</strong>. Les clients existant déjà dans la table <strong>Client</strong>, il serait idiot de dupliquer les données !</p><p id="r-2137069" data-claire-element-id="2354120">Deuxième chose, observez en fin d'instruction la mise en place d'une <a href="http://www.siteduzero.com/tutoriel-3-482330-cles-primaires-et-etrangeres.html#ss_part_2">contrainte de clé étrangère</a> sur le champ <strong>id_client</strong>. Grâce à cette clé, le SGBD sait que le contenu du champ <strong>id_client </strong>correspond à un <strong>id</strong> existant dans la table <strong>Client</strong>.</p><p id="r-2137070" data-claire-element-id="2354121">Enfin, ne manquez pas <a href="http://www.siteduzero.com/tutoriel-3-512004-options-des-cles-etrangeres.html">l'option de la clé étrangère</a> ! Puisqu'une relation est définie par le SGBD entre une commande et son client, il devient impossible par défaut de supprimer un client s'il a déjà passé une commande. Dans le cadre de ce TP, ce n'est pas très ergonomique : vous allez donc devoir changer ce comportement, en précisant que lors de la suppression d'un client, les champs <strong>id_client</strong> de la table <strong>Commande</strong> qui y font référence devront passer automatiquement à <code>NULL</code>. C'est le rôle de la ligne <code>ON DELETE SET NULL</code>.</p><aside id="r-2137072" data-claire-element-id="2354123" data-claire-semantic="information"><p id="r-2137071" data-claire-element-id="2354122">Si vous le souhaitez, vous pouvez changer le comportement adopté ici. Vous pouvez par exemple faire en sorte qu'il soit impossible de supprimer un client s'il a déjà passé une commande, ou bien encore faire en sorte que lors de la suppression d'un client, toutes les commandes qu'il a passées soient supprimées. Tout cela est simplement paramétrable via l'option appliquée sur la clé étrangère mise en place !</p></aside><p id="r-2137073" data-claire-element-id="2354124">En construisant ainsi vos tables, vous allez pouvoir vous assurer que les données écrites dans votre base sont cohérentes.</p><h4 id="r-2137077" data-claire-element-id="2354128">Mise en place de JDBC</h4><p id="r-2137076" data-claire-element-id="2354127">Si ce n'est pas déjà fait, vous allez devoir placer le jar du driver JDBC pour MySQL dans le dossier <strong>/lib</strong> de Tomcat, afin que votre application puisse communiquer avec votre base de données.</p><h4 id="r-2137095" data-claire-element-id="2354146">Réutilisation de la structure DAO développée dans le cadre du cours</h4><p id="r-2137078" data-claire-element-id="2354129">Votre base de données est en place. Vous pouvez maintenant attaquer le développement de votre application. Pour commencer, une bonne nouvelle : vous allez pouvoir réutiliser certaines classes du package <code>com.sdzee.dao</code> que vous avez développées dans le cadre du cours ! Les voici :</p><ul id="r-2137085" data-claire-element-id="2354136"><li id="r-2137080" data-claire-element-id="2354131"><p id="r-2137079" data-claire-element-id="2354130"><strong>DAOConfigurationException.java</strong></p></li><li id="r-2137082" data-claire-element-id="2354133"><p id="r-2137081" data-claire-element-id="2354132"><strong>DAOException.java</strong></p></li><li id="r-2137084" data-claire-element-id="2354135"><p id="r-2137083" data-claire-element-id="2354134"><strong>DAOUtilitaire.java</strong></p></li></ul><p id="r-2137086" data-claire-element-id="2354137">En effet, inutile de réinventer la roue pour toutes celles-là : elles fonctionnent, vous avez passé du temps à les mettre en place, autant s'en resservir ! Vous pouvez donc créer un package <code>com.sdzee.tp.dao</code> dans votre projet et y copier chacune d'elles.</p><p id="r-2137087" data-claire-element-id="2354138">De même, vous allez pouvoir réutiliser la classe <strong>InitialisationDaoFactory.java</strong> et la placer dans un nouveau package <code>com.sdzee.tp.config</code>.</p><p id="r-2137088" data-claire-element-id="2354139">Enfin, il reste deux fichiers que vous allez pouvoir réutiliser, moyennant quelques petits ajustements :</p><ul id="r-2137093" data-claire-element-id="2354144"><li id="r-2137090" data-claire-element-id="2354141"><p id="r-2137089" data-claire-element-id="2354140">vous pouvez reprendre le fichier <strong>dao.properties</strong>, mais il faudra bien penser à changer le contenu de son entrée <strong>url</strong>, pour cibler la nouvelle base <strong>tp_sdzee</strong> que vous avez créée, et non plus <strong>bdd_sdzee</strong> comme c'était le cas dans le cadre du cours ;</p></li><li id="r-2137092" data-claire-element-id="2354143"><p id="r-2137091" data-claire-element-id="2354142">vous pouvez de même reprendre la classe <strong>DAOFactory.java</strong>, mais vous allez devoir y changer le chemin vers le fichier <strong>dao.properties</strong> défini dans la constante <strong>FICHIER_PROPERTIES</strong>.</p></li></ul><p id="r-2137094" data-claire-element-id="2354145">Prenez bien le temps de mettre cette structure en place, n'allez pas trop vite et vérifiez que tout est bien au bon endroit avant de poursuivre ! ;)</p><h4 id="r-2137110" data-claire-element-id="2838218">Création des interfaces et implémentations du DAO</h4><p id="r-2137096" data-claire-element-id="2354147">Maintenant que le cadre est en place, vous allez devoir mettre la main à la pâte et coder les classes du DAO spécifiques à votre projet :</p><ul id="r-2137101" data-claire-element-id="2354152"><li id="r-2137098" data-claire-element-id="2354149"><p id="r-2137097" data-claire-element-id="2354148">l'interface <strong>ClientDao</strong> et son implémentation <strong>ClientDaoImpl</strong> ;</p></li><li id="r-2137100" data-claire-element-id="2354151"><p id="r-2137099" data-claire-element-id="2354150">l'interface <strong>CommandeDao</strong> et son implémentation <strong>CommandeDaoImpl</strong>.</p></li></ul><h5 id="r-2137103" data-claire-element-id="2354154">Les interfaces</h5><p id="r-2137102" data-claire-element-id="2354153">Dans le cadre de ce TP, vous n'avez pas développé de formulaires pour la modification des données existantes. Ainsi, vous n'avez pas besoin de définir toutes les méthodes <em>CRUD</em> dans vos DAO. Vous pouvez vous contenter des méthodes <code>creer()</code>, <code>trouver()</code>, <code>lister()</code> et <code>supprimer()</code>. Inspirez-vous de ce que vous avez mis en place dans le chapitre précédent si vous ne vous souvenez plus comment procéder.</p><h5 id="r-2137109" data-claire-element-id="2838217">Les implémentations</h5><p id="r-2137104" data-claire-element-id="2354155">Vous allez devoir définir les requêtes SQL à effectuer sur vos tables, créer et manipuler des requêtes préparées depuis vos différentes méthodes, tout cela bien entendu en réutilisant les méthodes développées dans la classe <strong>DAOUtilitaire</strong>. Vous pouvez, là encore, vous inspirer grandement de ce que vous avez développé dans le chapitre précédent, mais vous devrez prendre garde à modifier les méthodes <code>map()</code>, à créer une méthode <code>lister()</code> et à bien ajuster les méthodes <code>trouver()</code> et <code>creer()</code>, et enfin <code>supprimer()</code> !</p><p id="r-2137105" data-claire-element-id="2354156">Afin de vous permettre de partir du bon pied, je vous donne ici les requêtes à utiliser respectivement dans les classes <strong>ClientDaoImpl</strong> et <strong>CommandeDaoImpl</strong> :</p><pre id="r-2137106" data-claire-element-id="2838215"><code data-claire-semantic="java">private static final String SQL_SELECT        = &quot;SELECT id, nom, prenom, adresse, telephone, email, image FROM Client ORDER BY id&quot;;
private static final String SQL_SELECT_PAR_ID = &quot;SELECT id, nom, prenom, adresse, telephone, email, image FROM Client WHERE id = ?&quot;;
private static final String SQL_INSERT        = &quot;INSERT INTO Client (nom, prenom, adresse, telephone, email, image) VALUES (?, ?, ?, ?, ?, ?)&quot;;
private static final String SQL_DELETE_PAR_ID = &quot;DELETE FROM Client WHERE id = ?&quot;;</code></pre><pre id="r-2137107" data-claire-element-id="2838216"><code data-claire-semantic="java">private static final String SQL_SELECT        = &quot;SELECT id, id_client, date, montant, mode_paiement, statut_paiement, mode_livraison, statut_livraison FROM Commande ORDER BY id&quot;;
private static final String SQL_SELECT_PAR_ID = &quot;SELECT id, id_client, date, montant, mode_paiement, statut_paiement, mode_livraison, statut_livraison FROM Commande WHERE id = ?&quot;;
private static final String SQL_INSERT        = &quot;INSERT INTO Commande (id_client, date, montant, mode_paiement, statut_paiement, mode_livraison, statut_livraison) VALUES (?, ?, ?, ?, ?, ?, ?)&quot;;
private static final String SQL_DELETE_PAR_ID = &quot;DELETE FROM Commande WHERE id = ?&quot;;</code></pre><p id="r-2137108" data-claire-element-id="2354159">Avec ceci en poche, vous n'avez plus à vous soucier de l'aspect SQL du développement, et vous pouvez vous concentrer sur l'aspect... Java EE ! ;)</p><h4 id="r-2137157" data-claire-element-id="2838221">Intégration dans le code existant</h4><p id="r-2137111" data-claire-element-id="2354162">Afin d'intégrer correctement vos DAO dans l'application, vous allez devoir procéder à de nombreux changements dans le code existant...</p><h5 id="r-2137118" data-claire-element-id="2354169">Modification des beans</h5><p id="r-2137112" data-claire-element-id="2354163">Vous allez devoir apporter deux changements :</p><ul id="r-2137117" data-claire-element-id="2354168"><li id="r-2137114" data-claire-element-id="2354165"><p id="r-2137113" data-claire-element-id="2354164">ajouter un champ <strong>id</strong> de type <code>Long</code> aux deux beans, pour refléter l'<strong>id</strong> auto-généré existant dans vos tables ;</p></li><li id="r-2137116" data-claire-element-id="2354167"><p id="r-2137115" data-claire-element-id="2354166">modifier le type du champ <strong>date</strong> dans le bean <strong>Commande</strong>. Jusqu'à présent vous stockiez cette information sous forme d'une chaîne de caractères pour ne pas vous compliquer la tâche, mais cette fois vous allez devoir faire correspondre ce champ à celui créé dans la table <strong>Commande</strong>. Puisque nous utilisons la bibliothèque JodaTime, je vous conseille de changer le type du champ <strong>date</strong> de <code>String</code> vers <code>DateTime</code>.</p></li></ul><h5 id="r-2137133" data-claire-element-id="2354184">Modification des servlets</h5><p id="r-2137119" data-claire-element-id="2354170">Vous allez devoir adapter vos servlets <strong>CreationClient</strong> et <strong>CreationCommande</strong>, toujours sur le modèle de ce que vous avez développé dans le cours :</p><ul id="r-2137124" data-claire-element-id="2354175"><li id="r-2137121" data-claire-element-id="2354172"><p id="r-2137120" data-claire-element-id="2354171">récupérer la ou les implémentations de DAO depuis la <em>factory</em>, dans la méthode <code>init()</code> de chaque servlet ;</p></li><li id="r-2137123" data-claire-element-id="2354174"><p id="r-2137122" data-claire-element-id="2354173">passage du ou des DAO à l'objet métier lors de sa construction.</p></li></ul><p id="r-2137125" data-claire-element-id="2354176">En outre, vous allez devoir apporter un autre changement, qui va avoir un impact considérable sur le reste de l’application. Jusqu'à présent, vous manipuliez des <code>Map</code> indexées sur les noms et dates des clients et commandes, ce qui rendait impossible la création de deux clients portant le même nom et la création de deux commandes au même instant.</p><p id="r-2137126" data-claire-element-id="2354177">Maintenant que vos données sont identifiables par un <strong>id</strong> dans vos tables, vous allez pouvoir modifier vos <code>Map</code> pour qu'elles indexent les id des clients et commandes. Vos <code>Map</code> vont donc changer de <code>Map&lt;String, Client&gt;</code> et <code>Map&lt;String, Commande&gt;</code> vers <code>Map&lt;Long, Client&gt;</code> et <code>Map&lt;Long, Commande&gt;</code>. <strong>Vous allez donc devoir prendre garde, partout où ces maps sont manipulées, à ne plus travailler sur les noms et dates, mais bien sur les id. Ne prenez pas ce changement à la légère, il va impliquer pas mal de petites modifications ça et là... !</strong></p><p id="r-2137127" data-claire-element-id="2354178">Vous allez également devoir modifier vos servlets de suppression :</p><ul id="r-2137132" data-claire-element-id="2354183"><li id="r-2137129" data-claire-element-id="2354180"><p id="r-2137128" data-claire-element-id="2354179">pour qu'elles se basent sur l'<strong>id</strong> lors de la suppression d'une entrée dans une <code>Map</code>, suite à la modification apportée précédemment ;</p></li><li id="r-2137131" data-claire-element-id="2354182"><p id="r-2137130" data-claire-element-id="2354181">pour qu'elles suppriment également les données en base, ceci implique donc la récupération du DAO depuis la méthode <code>init()</code> et un appel à la méthode <code>supprimer()</code> du DAO.</p></li></ul><h5 id="r-2137141" data-claire-element-id="2354192">Modification des objets métier</h5><p id="r-2137134" data-claire-element-id="2354185">Vous allez devoir reprendre vos deux objets métier <strong>CreationClientForm</strong> et <strong>CreationCommandeForm</strong> pour qu'ils interagissent avec la BDD. Là encore, vous pouvez vous inspirer grandement de ce que vous avez développé dans le chapitre précédent. Dans les grandes lignes, il va vous falloir :</p><ul id="r-2137139" data-claire-element-id="2354190"><li id="r-2137136" data-claire-element-id="2354187"><p id="r-2137135" data-claire-element-id="2354186">récupérer la ou les instances de DAO nécessaires depuis le constructeur ;</p></li><li id="r-2137138" data-claire-element-id="2354189"><p id="r-2137137" data-claire-element-id="2354188">effectuer un appel à la méthode <code>creer()</code> du DAO une fois la validation des champs passée avec succès, et gérer les éventuelles erreurs ou exceptions retournées.</p></li></ul><p id="r-2137140" data-claire-element-id="2354191">Attention dans le code de <strong>CreationCommandeForm</strong> ! Vous devrez prendre garde à bien adapter la manipulation de la <code>Map</code> des clients, suite aux changements que vous avez apportés au maps définies dans vos servlets !</p><h5 id="r-2137147" data-claire-element-id="2838220">Modification des JSP</h5><p id="r-2137142" data-claire-element-id="2354193">Premièrement, il va falloir adapter vos JSP aux changements effectués sur vos maps de clients et commandes. Dans les pages <strong>listerClients.jsp</strong> et <strong>listerCommandes.jsp</strong>, vous allez donc devoir modifier les liens de suppression pour qu'ils ne transmettent plus le nom d'un client ou la date d'une commande, mais leur <strong>id</strong>.</p><p id="r-2137143" data-claire-element-id="2354194">Deuxièmement, vous allez devoir modifier la manière dont vous affichez le champ <strong>date</strong> du bean <strong>Commande</strong> ! Eh oui, maintenant que vous l'avez remplacé par un objet Joda <strong>DateTime</strong>, vous ne pouvez plus vous contenter de l'afficher bêtement via la balise <code>&lt;c:out&gt;</code>... Pas de panique, les développeurs de Joda ont pensé à ce cas de figure et ont créé <a href="http://joda-time.sourceforge.net/contrib/jsptags/userguide.html">une bibliothèque de balises</a> destinées à manipuler les objets Joda !</p><p id="r-2137144" data-claire-element-id="2354195">Vous devez donc télécharger son jar en cliquant sur <a href="http://course.oc-static.com/ftp-tutos/cours/java-ee/joda-time-jsptags-1.1.1.jar">ce lien</a>, puis le placer dans le répertoire <strong>/WEB-INF/lib</strong> de votre projet. Ensuite, vous allez pouvoir utiliser les balises comme vous utilisez celles de la JSTL. Voici un exemple d'utilisation, qui se charge de formater un objet <strong>DateTime</strong> pour affichage à l'utilisateur selon un <em>pattern</em> défini :</p><pre id="r-2137145" data-claire-element-id="2838219"><code data-claire-semantic="jsp">&lt;%@ taglib prefix=&quot;joda&quot; uri=&quot;http://www.joda.org/joda/time/tags&quot; %&gt;

...

&lt;joda:format value=&quot;${ commande.date }&quot; pattern=&quot;dd/MM/yyyy HH:mm:ss&quot;/&gt;</code></pre><p id="r-2137146" data-claire-element-id="2354197">Je vous invite bien entendu à parcourir la documentation du projet plus en profondeur pour découvrir les différentes balises et attributs disponibles.</p><h5 id="r-2137156" data-claire-element-id="2354207">Création d'un filtre</h5><p id="r-2137148" data-claire-element-id="2354199">Enfin, il reste un aspect important à changer dans le mode de fonctionnement de votre application. Je vous ai demandé de faire en sorte que vos pages listant les commandes et clients existants continuent à se baser sur les infos présentes en session. Il va donc falloir réfléchir un petit peu à la manière de procéder ici. En effet, au tout premier lancement de l'application, aucun problème : aucune donnée n'existe, et donc rien n'existe en session.</p><p id="r-2137149" data-claire-element-id="2354200">Imaginez maintenant que l'utilisateur crée tout un tas de clients et commandes, puis quitte l'application et ne revient pas pendant une semaine. À son retour, la session n'existera plus depuis belle lurette sur le serveur, qui aura tôt fait de la supprimer. Ainsi, les pages listant les clients et commandes n'afficheront rien, alors qu'en réalité il existe des données, non pas dans la session, mais dans la base de données !</p><p id="r-2137150" data-claire-element-id="2354201">Ce qu'il vous faut gérer, c'est donc le préchargement des données existant en base dans la session de l'utilisateur lors de son arrivée, et uniquement lors de son arrivée, sur n'importe quelle page de l'application.</p><div id="r-2137152" data-claire-element-id="2354203" data-claire-semantic="question"><p id="r-2137151" data-claire-element-id="2354202">Comment réaliser une telle opération ?</p></div><p id="r-2137153" data-claire-element-id="2354204">En principe, vous avez déjà la réponse à cette question ! Réfléchissez bien. Quel composant est idéal pour ce type de fonctionnalité ? Eh oui, c'est le filtre ! Vous allez donc créer un filtre appliqué à toutes les pages de votre application, qui se chargera de vérifier si une session utilisateur existe, et qui la remplira avec les données présentes en base si elle n'existe pas. En somme, vous allez y récupérer une implémentation de DAO comme vous l'avez déjà fait pour les servlets, effectuer un appel à sa méthode <code>lister()</code>, et peupler les maps de clients et de commandes avec les données contenues dans les listes récupérées !</p><p id="r-2137154" data-claire-element-id="2354205">N'oubliez pas de bien déclarer le filtre dans le fichier <strong>web.xml</strong> !</p><p id="r-2137155" data-claire-element-id="2354206">Voilà tout ce dont vous avez besoin. Comme vous le voyez, le sujet était très court, mais en réalité le travail est conséquent !</p><h3 id="r-2137221" data-claire-element-id="2838251">Correction</h3><p id="r-2137159" data-claire-element-id="2354210">Faites attention à bien reprendre les fichiers du cours qui restent inchangés, à corriger les quelques classes qui nécessitent des ajustements, et surtout ne baissez pas les bras devant la charge de travail impliquée par l'introduction d'une base de données dans votre programme ! Cet exercice est l'occasion parfaite pour vous familiariser avec ces concepts si importants. Ne la gâchez pas en abandonnant dès le moindre petit obstacle ! ;)</p><p id="r-2137160" data-claire-element-id="2354211">Comme toujours, ce n'est pas la seule manière de faire, le principal est que votre solution respecte les consignes que je vous ai données !</p><aside id="r-2137162" data-claire-element-id="2354213" data-claire-semantic="warning"><p id="r-2137161" data-claire-element-id="2354212">Prenez le temps de réfléchir, de chercher et de coder par vous-mêmes. Si besoin, n'hésitez pas à relire le sujet ou à retourner lire les chapitres précédents. La pratique est très importante, ne vous ruez pas sur la solution !</p></aside><h4 id="r-2137177" data-claire-element-id="2838225">Code de la structure DAO</h4><p id="r-2137163" data-claire-element-id="2354214">Voici les liens directs vers les fichiers que vous devez reprendre tels quels depuis le chapitre précédent :</p><ul id="r-2137172" data-claire-element-id="2354223"><li id="r-2137165" data-claire-element-id="2354216"><p id="r-2137164" data-claire-element-id="2354215"><a href="http://course.oc-static.com/ftp-tutos/cours/java-ee/InitialisationDaoFactory.java">InitialisationDaoFactory</a> (inchangé)</p></li><li id="r-2137167" data-claire-element-id="2354218"><p id="r-2137166" data-claire-element-id="2354217"><a href="http://course.oc-static.com/ftp-tutos/cours/java-ee/DAOConfigurationException.java">DAOConfigurationException</a> (inchangé)</p></li><li id="r-2137169" data-claire-element-id="2354220"><p id="r-2137168" data-claire-element-id="2354219"><a href="http://course.oc-static.com/ftp-tutos/cours/java-ee/DAOException.java">DAOException</a> (inchangé)</p></li><li id="r-2137171" data-claire-element-id="2354222"><p id="r-2137170" data-claire-element-id="2354221"><a href="http://course.oc-static.com/ftp-tutos/cours/java-ee/DAOUtilitaire.java">DAOUtilitaire</a> (inchangé)</p></li></ul><p id="r-2137173" data-claire-element-id="2354224">Voilà le contenu du nouveau fichier <strong>dao.properties</strong>, à placer dans <code>com.sdzee.tp.dao</code> :</p><pre id="r-2137174" data-claire-element-id="2838223"><code data-claire-semantic="java">url = jdbc:mysql://localhost:3306/tp_sdzee
driver = com.mysql.jdbc.Driver
nomutilisateur = java
motdepasse = SdZ_eE</code></pre><p id="r-2137175" data-claire-element-id="2354226">Et voilà le code de la classe <strong>DAOFactory</strong> adapté à ce nouveau fichier <em>Properties</em> et au nouveau projet :</p><pre id="r-2137176" data-claire-element-id="2838224"><code data-claire-semantic="java">package com.sdzee.tp.dao;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.util.Properties;

public class DAOFactory {

    private static final String FICHIER_PROPERTIES       = &quot;/com/sdzee/tp/dao/dao.properties&quot;;
    private static final String PROPERTY_URL             = &quot;url&quot;;
    private static final String PROPERTY_DRIVER          = &quot;driver&quot;;
    private static final String PROPERTY_NOM_UTILISATEUR = &quot;nomutilisateur&quot;;
    private static final String PROPERTY_MOT_DE_PASSE    = &quot;motdepasse&quot;;

    private String              url;
    private String              username;
    private String              password;

    /* package */DAOFactory( String url, String username, String password ) {
        this.url = url;
        this.username = username;
        this.password = password;
    }

    /*
     * Méthode chargée de récupérer les informations de connexion à la base de
     * données, charger le driver JDBC et retourner une instance de la Factory
     */
    public static DAOFactory getInstance() throws DAOConfigurationException {
        Properties properties = new Properties();
        String url;
        String driver;
        String nomUtilisateur;
        String motDePasse;

        ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
        InputStream fichierProperties = classLoader.getResourceAsStream( FICHIER_PROPERTIES );

        if ( fichierProperties == null ) {
            throw new DAOConfigurationException( &quot;Le fichier properties &quot; + FICHIER_PROPERTIES + &quot; est introuvable.&quot; );
        }

        try {
            properties.load( fichierProperties );
            url = properties.getProperty( PROPERTY_URL );
            driver = properties.getProperty( PROPERTY_DRIVER );
            nomUtilisateur = properties.getProperty( PROPERTY_NOM_UTILISATEUR );
            motDePasse = properties.getProperty( PROPERTY_MOT_DE_PASSE );
        } catch ( FileNotFoundException e ) {
            throw new DAOConfigurationException( &quot;Le fichier properties &quot; + FICHIER_PROPERTIES + &quot; est introuvable.&quot;, e );
        } catch ( IOException e ) {
            throw new DAOConfigurationException( &quot;Impossible de charger le fichier properties &quot; + FICHIER_PROPERTIES, e );
        }

        try {
            Class.forName( driver );
        } catch ( ClassNotFoundException e ) {
            throw new DAOConfigurationException( &quot;Le driver est introuvable dans le classpath.&quot;, e );
        }

        DAOFactory instance = new DAOFactory( url, nomUtilisateur, motDePasse );
        return instance;
    }

    /* Méthode chargée de fournir une connexion à la base de données */
    /* package */Connection getConnection() throws SQLException {
        return DriverManager.getConnection( url, username, password );
    }

    /*
     * Méthodes de récupération de l'implémentation des différents DAO
     * (uniquement deux dans le cadre de ce TP)
     */
    public ClientDao getClientDao() {
        return new ClientDaoImpl( this );
    }

    public CommandeDao getCommandeDao() {
        return new CommandeDaoImpl( this );
    }
}</code></pre><h4 id="r-2137182" data-claire-element-id="2838228">Code des interfaces DAO</h4><p id="r-2137178" data-claire-element-id="2354229">L'interface <strong>ClientDao</strong> :</p><pre id="r-2137179" data-claire-element-id="2838226"><code data-claire-semantic="java">package com.sdzee.tp.dao;

import java.util.List;

import com.sdzee.tp.beans.Client;

public interface ClientDao {
    void creer( Client client ) throws DAOException;

    Client trouver( long id ) throws DAOException;

    List&lt;Client&gt; lister() throws DAOException;

    void supprimer( Client client ) throws DAOException;
}</code></pre><p id="r-2137180" data-claire-element-id="2354231">L'interface <strong>CommandeDao</strong> :</p><pre id="r-2137181" data-claire-element-id="2838227"><code data-claire-semantic="java">package com.sdzee.tp.dao;

import java.util.List;

import com.sdzee.tp.beans.Commande;

public interface CommandeDao {
    void creer( Commande commande ) throws DAOException;

    Commande trouver( long id ) throws DAOException;

    List&lt;Commande&gt; lister() throws DAOException;

    void supprimer( Commande commande ) throws DAOException;
}</code></pre><h4 id="r-2137187" data-claire-element-id="2838231">Code des implémentations DAO</h4><p id="r-2137183" data-claire-element-id="2354234">Code de ClientDaoImpl :</p><pre id="r-2137184" data-claire-element-id="2838229"><code data-claire-semantic="java">package com.sdzee.tp.dao;

import static com.sdzee.tp.dao.DAOUtilitaire.fermeturesSilencieuses;
import static com.sdzee.tp.dao.DAOUtilitaire.initialisationRequetePreparee;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import com.sdzee.tp.beans.Client;

public class ClientDaoImpl implements ClientDao {

    private static final String SQL_SELECT        = &quot;SELECT id, nom, prenom, adresse, telephone, email, image FROM Client ORDER BY id&quot;;
    private static final String SQL_SELECT_PAR_ID = &quot;SELECT id, nom, prenom, adresse, telephone, email, image FROM Client WHERE id = ?&quot;;
    private static final String SQL_INSERT        = &quot;INSERT INTO Client (nom, prenom, adresse, telephone, email, image) VALUES (?, ?, ?, ?, ?, ?)&quot;;
    private static final String SQL_DELETE_PAR_ID = &quot;DELETE FROM Client WHERE id = ?&quot;;

    private DAOFactory          daoFactory;

    ClientDaoImpl( DAOFactory daoFactory ) {
        this.daoFactory = daoFactory;
    }

    /* Implémentation de la méthode définie dans l'interface ClientDao */
    @Override
    public Client trouver( long id ) throws DAOException {
        return trouver( SQL_SELECT_PAR_ID, id );
    }

    /* Implémentation de la méthode définie dans l'interface ClientDao */
    @Override
    public void creer( Client client ) throws DAOException {
        Connection connexion = null;
        PreparedStatement preparedStatement = null;
        ResultSet valeursAutoGenerees = null;

        try {
            connexion = daoFactory.getConnection();
            preparedStatement = initialisationRequetePreparee( connexion, SQL_INSERT, true,
                    client.getNom(), client.getPrenom(),
                    client.getAdresse(), client.getTelephone(),
                    client.getEmail(), client.getImage() );
            int statut = preparedStatement.executeUpdate();
            if ( statut == 0 ) {
                throw new DAOException( &quot;Échec de la création du client, aucune ligne ajoutée dans la table.&quot; );
            }
            valeursAutoGenerees = preparedStatement.getGeneratedKeys();
            if ( valeursAutoGenerees.next() ) {
                client.setId( valeursAutoGenerees.getLong( 1 ) );
            } else {
                throw new DAOException( &quot;Échec de la création du client en base, aucun ID auto-généré retourné.&quot; );
            }
        } catch ( SQLException e ) {
            throw new DAOException( e );
        } finally {
            fermeturesSilencieuses( valeursAutoGenerees, preparedStatement, connexion );
        }
    }

    /* Implémentation de la méthode définie dans l'interface ClientDao */
    @Override
    public List&lt;Client&gt; lister() throws DAOException {
        Connection connection = null;
        PreparedStatement preparedStatement = null;
        ResultSet resultSet = null;
        List&lt;Client&gt; clients = new ArrayList&lt;Client&gt;();

        try {
            connection = daoFactory.getConnection();
            preparedStatement = connection.prepareStatement( SQL_SELECT );
            resultSet = preparedStatement.executeQuery();
            while ( resultSet.next() ) {
                clients.add( map( resultSet ) );
            }
        } catch ( SQLException e ) {
            throw new DAOException( e );
        } finally {
            fermeturesSilencieuses( resultSet, preparedStatement, connection );
        }

        return clients;
    }

    /* Implémentation de la méthode définie dans l'interface ClientDao */
    @Override
    public void supprimer( Client client ) throws DAOException {
        Connection connexion = null;
        PreparedStatement preparedStatement = null;

        try {
            connexion = daoFactory.getConnection();
            preparedStatement = initialisationRequetePreparee( connexion, SQL_DELETE_PAR_ID, true, client.getId() );
            int statut = preparedStatement.executeUpdate();
            if ( statut == 0 ) {
                throw new DAOException( &quot;Échec de la suppression du client, aucune ligne supprimée de la table.&quot; );
            } else {
                client.setId( null );
            }
        } catch ( SQLException e ) {
            throw new DAOException( e );
        } finally {
            fermeturesSilencieuses( preparedStatement, connexion );
        }
    }

    /*
     * Méthode générique utilisée pour retourner un client depuis la base de
     * données, correspondant à la requête SQL donnée prenant en paramètres les
     * objets passés en argument.
     */
    private Client trouver( String sql, Object... objets ) throws DAOException {
        Connection connexion = null;
        PreparedStatement preparedStatement = null;
        ResultSet resultSet = null;
        Client client = null;

        try {
            /* Récupération d'une connexion depuis la Factory */
            connexion = daoFactory.getConnection();
            /*
             * Préparation de la requête avec les objets passés en arguments
             * (ici, uniquement un id) et exécution.
             */
            preparedStatement = initialisationRequetePreparee( connexion, sql, false, objets );
            resultSet = preparedStatement.executeQuery();
            /* Parcours de la ligne de données retournée dans le ResultSet */
            if ( resultSet.next() ) {
                client = map( resultSet );
            }
        } catch ( SQLException e ) {
            throw new DAOException( e );
        } finally {
            fermeturesSilencieuses( resultSet, preparedStatement, connexion );
        }

        return client;
    }

    /*
     * Simple méthode utilitaire permettant de faire la correspondance (le
     * mapping) entre une ligne issue de la table des clients (un ResultSet) et
     * un bean Client.
     */
    private static Client map( ResultSet resultSet ) throws SQLException {
        Client client = new Client();
        client.setId( resultSet.getLong( &quot;id&quot; ) );
        client.setNom( resultSet.getString( &quot;nom&quot; ) );
        client.setPrenom( resultSet.getString( &quot;prenom&quot; ) );
        client.setAdresse( resultSet.getString( &quot;adresse&quot; ) );
        client.setTelephone( resultSet.getString( &quot;telephone&quot; ) );
        client.setEmail( resultSet.getString( &quot;email&quot; ) );
        client.setImage( resultSet.getString( &quot;image&quot; ) );
        return client;
    }

}</code></pre><p id="r-2137185" data-claire-element-id="2354236">Code de CommandeDaoImpl :</p><pre id="r-2137186" data-claire-element-id="2838230"><code data-claire-semantic="java">package com.sdzee.tp.dao;

import static com.sdzee.tp.dao.DAOUtilitaire.fermeturesSilencieuses;
import static com.sdzee.tp.dao.DAOUtilitaire.initialisationRequetePreparee;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Timestamp;
import java.util.ArrayList;
import java.util.List;

import org.joda.time.DateTime;

import com.sdzee.tp.beans.Commande;

public class CommandeDaoImpl implements CommandeDao {

    private static final String SQL_SELECT        = &quot;SELECT id, id_client, date, montant, mode_paiement, statut_paiement, mode_livraison, statut_livraison FROM Commande ORDER BY id&quot;;
    private static final String SQL_SELECT_PAR_ID = &quot;SELECT id, id_client, date, montant, mode_paiement, statut_paiement, mode_livraison, statut_livraison FROM Commande WHERE id = ?&quot;;
    private static final String SQL_INSERT        = &quot;INSERT INTO Commande (id_client, date, montant, mode_paiement, statut_paiement, mode_livraison, statut_livraison) VALUES (?, ?, ?, ?, ?, ?, ?)&quot;;
    private static final String SQL_DELETE_PAR_ID = &quot;DELETE FROM Commande WHERE id = ?&quot;;

    private DAOFactory          daoFactory;

    CommandeDaoImpl( DAOFactory daoFactory ) {
        this.daoFactory = daoFactory;
    }

    /* Implémentation de la méthode définie dans l'interface CommandeDao */
    @Override
    public Commande trouver( long id ) throws DAOException {
        return trouver( SQL_SELECT_PAR_ID, id );
    }

    /* Implémentation de la méthode définie dans l'interface CommandeDao */
    @Override
    public void creer( Commande commande ) throws DAOException {
        Connection connexion = null;
        PreparedStatement preparedStatement = null;
        ResultSet valeursAutoGenerees = null;

        try {
            connexion = daoFactory.getConnection();
            preparedStatement = initialisationRequetePreparee( connexion, SQL_INSERT, true,
                    commande.getClient().getId(), new Timestamp( commande.getDate().getMillis() ),
                    commande.getMontant(),
                    commande.getModePaiement(), commande.getStatutPaiement(),
                    commande.getModeLivraison(), commande.getStatutLivraison() );
            int statut = preparedStatement.executeUpdate();
            if ( statut == 0 ) {
                throw new DAOException( &quot;Échec de la création de la commande, aucune ligne ajoutée dans la table.&quot; );
            }
            valeursAutoGenerees = preparedStatement.getGeneratedKeys();
            if ( valeursAutoGenerees.next() ) {
                commande.setId( valeursAutoGenerees.getLong( 1 ) );
            } else {
                throw new DAOException( &quot;Échec de la création de la commande en base, aucun ID auto-généré retourné.&quot; );
            }
        } catch ( SQLException e ) {
            throw new DAOException( e );
        } finally {
            fermeturesSilencieuses( valeursAutoGenerees, preparedStatement, connexion );
        }
    }

    /* Implémentation de la méthode définie dans l'interface ClientDao */
    @Override
    public List&lt;Commande&gt; lister() throws DAOException {
        Connection connection = null;
        PreparedStatement preparedStatement = null;
        ResultSet resultSet = null;
        List&lt;Commande&gt; commandes = new ArrayList&lt;Commande&gt;();

        try {
            connection = daoFactory.getConnection();
            preparedStatement = connection.prepareStatement( SQL_SELECT );
            resultSet = preparedStatement.executeQuery();
            while ( resultSet.next() ) {
                commandes.add( map( resultSet ) );
            }
        } catch ( SQLException e ) {
            throw new DAOException( e );
        } finally {
            fermeturesSilencieuses( resultSet, preparedStatement, connection );
        }

        return commandes;
    }

    /* Implémentation de la méthode définie dans l'interface CommandeDao */
    @Override
    public void supprimer( Commande commande ) throws DAOException {
        Connection connexion = null;
        PreparedStatement preparedStatement = null;

        try {
            connexion = daoFactory.getConnection();
            preparedStatement = initialisationRequetePreparee( connexion, SQL_DELETE_PAR_ID, true, commande.getId() );
            int statut = preparedStatement.executeUpdate();
            if ( statut == 0 ) {
                throw new DAOException( &quot;Échec de la suppression de la commande, aucune ligne supprimée de la table.&quot; );
            } else {
                commande.setId( null );
            }
        } catch ( SQLException e ) {
            throw new DAOException( e );
        } finally {
            fermeturesSilencieuses( preparedStatement, connexion );
        }
    }

    /*
     * Méthode générique utilisée pour retourner une commande depuis la base de
     * données, correspondant à la requête SQL donnée prenant en paramètres les
     * objets passés en argument.
     */
    private Commande trouver( String sql, Object... objets ) throws DAOException {
        Connection connexion = null;
        PreparedStatement preparedStatement = null;
        ResultSet resultSet = null;
        Commande commande = null;

        try {
            /* Récupération d'une connexion depuis la Factory */
            connexion = daoFactory.getConnection();
            /*
             * Préparation de la requête avec les objets passés en arguments
             * (ici, uniquement un id) et exécution.
             */
            preparedStatement = initialisationRequetePreparee( connexion, sql, false, objets );
            resultSet = preparedStatement.executeQuery();
            /* Parcours de la ligne de données retournée dans le ResultSet */
            if ( resultSet.next() ) {
                commande = map( resultSet );
            }
        } catch ( SQLException e ) {
            throw new DAOException( e );
        } finally {
            fermeturesSilencieuses( resultSet, preparedStatement, connexion );
        }

        return commande;
    }

    /*
     * Simple méthode utilitaire permettant de faire la correspondance (le
     * mapping) entre une ligne issue de la table des commandes (un ResultSet)
     * et un bean Commande.
     */
    private Commande map( ResultSet resultSet ) throws SQLException {
        Commande commande = new Commande();
        commande.setId( resultSet.getLong( &quot;id&quot; ) );

        /*
         * Petit changement ici : pour récupérer un client, il nous faut faire
         * appel à la méthode trouver() du DAO Client, afin de récupérer un bean
         * Client à partir de l'id présent dans la table Commande.
         */
        ClientDao clientDao = daoFactory.getClientDao();
        commande.setClient( clientDao.trouver( resultSet.getLong( &quot;id_client&quot; ) ) );

        commande.setDate( new DateTime( resultSet.getTimestamp( &quot;date&quot; ) ) );
        commande.setMontant( resultSet.getDouble( &quot;montant&quot; ) );
        commande.setModePaiement( resultSet.getString( &quot;mode_paiement&quot; ) );
        commande.setStatutPaiement( resultSet.getString( &quot;statut_paiement&quot; ) );
        commande.setModeLivraison( resultSet.getString( &quot;mode_livraison&quot; ) );
        commande.setStatutLivraison( resultSet.getString( &quot;statut_livraison&quot; ) );
        return commande;
    }

}</code></pre><h4 id="r-2137192" data-claire-element-id="2838234">Code des beans</h4><p id="r-2137188" data-claire-element-id="2354239">Client :</p><pre id="r-2137189" data-claire-element-id="2838232"><code data-claire-semantic="java">package com.sdzee.tp.beans;

import java.io.Serializable;

public class Client implements Serializable {

    private Long   id;
    private String nom;
    private String prenom;
    private String adresse;
    private String telephone;
    private String email;
    private String image;

    public void setId( Long id ) {
        this.id = id;
    }

    public Long getId() {
        return id;
    }

    public void setNom( String nom ) {
        this.nom = nom;
    }

    public String getNom() {
        return nom;
    }

    public void setPrenom( String prenom ) {
        this.prenom = prenom;
    }

    public String getPrenom() {
        return prenom;
    }

    public void setAdresse( String adresse ) {
        this.adresse = adresse;
    }

    public String getAdresse() {
        return adresse;
    }

    public void setTelephone( String telephone ) {
        this.telephone = telephone;
    }

    public String getTelephone() {
        return telephone;
    }

    public void setEmail( String email ) {
        this.email = email;
    }

    public String getEmail() {
        return email;
    }

    public void setImage( String image ) {
        this.image = image;
    }

    public String getImage() {
        return image;
    }
}</code></pre><p id="r-2137190" data-claire-element-id="2354241">Commande :</p><pre id="r-2137191" data-claire-element-id="2838233"><code data-claire-semantic="java">package com.sdzee.tp.beans;

import java.io.Serializable;

import org.joda.time.DateTime;

public class Commande implements Serializable {
    private Long     id;
    private Client   client;
    private DateTime date;
    private Double   montant;
    private String   modePaiement;
    private String   statutPaiement;
    private String   modeLivraison;
    private String   statutLivraison;

    public Long getId() {
        return id;
    }

    public void setId( Long id ) {
        this.id = id;
    }

    public Client getClient() {
        return client;
    }

    public void setClient( Client client ) {
        this.client = client;
    }

    public DateTime getDate() {
        return date;
    }

    public void setDate( DateTime date ) {
        this.date = date;
    }

    public Double getMontant() {
        return montant;
    }

    public void setMontant( Double montant ) {
        this.montant = montant;
    }

    public String getModePaiement() {
        return modePaiement;
    }

    public void setModePaiement( String modePaiement ) {
        this.modePaiement = modePaiement;
    }

    public String getStatutPaiement() {
        return statutPaiement;
    }

    public void setStatutPaiement( String statutPaiement ) {
        this.statutPaiement = statutPaiement;
    }

    public String getModeLivraison() {
        return modeLivraison;
    }

    public void setModeLivraison( String modeLivraison ) {
        this.modeLivraison = modeLivraison;
    }

    public String getStatutLivraison() {
        return statutLivraison;
    }

    public void setStatutLivraison( String statutLivraison ) {
        this.statutLivraison = statutLivraison;
    }
}</code></pre><h4 id="r-2137197" data-claire-element-id="2838237">Code des objets métier</h4><p id="r-2137193" data-claire-element-id="2354244">Code de CreationClientForm :</p><pre id="r-2137194" data-claire-element-id="2838235"><code data-claire-semantic="java">package com.sdzee.tp.forms;

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.Collection;
import java.util.HashMap;
import java.util.Map;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.Part;

import com.sdzee.tp.beans.Client;
import com.sdzee.tp.dao.ClientDao;
import com.sdzee.tp.dao.DAOException;

import eu.medsea.mimeutil.MimeUtil;

public final class CreationClientForm {
    private static final String CHAMP_NOM       = &quot;nomClient&quot;;
    private static final String CHAMP_PRENOM    = &quot;prenomClient&quot;;
    private static final String CHAMP_ADRESSE   = &quot;adresseClient&quot;;
    private static final String CHAMP_TELEPHONE = &quot;telephoneClient&quot;;
    private static final String CHAMP_EMAIL     = &quot;emailClient&quot;;
    private static final String CHAMP_IMAGE     = &quot;imageClient&quot;;

    private static final int    TAILLE_TAMPON   = 10240;                        // 10ko

    private String              resultat;
    private Map&lt;String, String&gt; erreurs         = new HashMap&lt;String, String&gt;();
    private ClientDao           clientDao;

    public CreationClientForm( ClientDao clientDao ) {
        this.clientDao = clientDao;
    }

    public Map&lt;String, String&gt; getErreurs() {
        return erreurs;
    }

    public String getResultat() {
        return resultat;
    }

    public Client creerClient( HttpServletRequest request, String chemin ) {
        String nom = getValeurChamp( request, CHAMP_NOM );
        String prenom = getValeurChamp( request, CHAMP_PRENOM );
        String adresse = getValeurChamp( request, CHAMP_ADRESSE );
        String telephone = getValeurChamp( request, CHAMP_TELEPHONE );
        String email = getValeurChamp( request, CHAMP_EMAIL );

        Client client = new Client();

        traiterNom( nom, client );
        traiterPrenom( prenom, client );
        traiterAdresse( adresse, client );
        traiterTelephone( telephone, client );
        traiterEmail( email, client );
        traiterImage( client, request, chemin );

        try {
            if ( erreurs.isEmpty() ) {
                clientDao.creer( client );
                resultat = &quot;Succès de la création du client.&quot;;
            } else {
                resultat = &quot;Échec de la création du client.&quot;;
            }
        } catch ( DAOException e ) {
            setErreur( &quot;imprévu&quot;, &quot;Erreur imprévue lors de la création.&quot; );
            resultat = &quot;Échec de la création du client : une erreur imprévue est survenue, merci de réessayer dans quelques instants.&quot;;
            e.printStackTrace();
        }

        return client;
    }

    private void traiterNom( String nom, Client client ) {
        try {
            validationNom( nom );
        } catch ( FormValidationException e ) {
            setErreur( CHAMP_NOM, e.getMessage() );
        }
        client.setNom( nom );
    }

    private void traiterPrenom( String prenom, Client client ) {
        try {
            validationPrenom( prenom );
        } catch ( FormValidationException e ) {
            setErreur( CHAMP_PRENOM, e.getMessage() );
        }
        client.setPrenom( prenom );
    }

    private void traiterAdresse( String adresse, Client client ) {
        try {
            validationAdresse( adresse );
        } catch ( FormValidationException e ) {
            setErreur( CHAMP_ADRESSE, e.getMessage() );
        }
        client.setAdresse( adresse );
    }

    private void traiterTelephone( String telephone, Client client ) {
        try {
            validationTelephone( telephone );
        } catch ( FormValidationException e ) {
            setErreur( CHAMP_TELEPHONE, e.getMessage() );
        }
        client.setTelephone( telephone );
    }

    private void traiterEmail( String email, Client client ) {
        try {
            validationEmail( email );
        } catch ( FormValidationException e ) {
            setErreur( CHAMP_EMAIL, e.getMessage() );
        }
        client.setEmail( email );
    }

    private void traiterImage( Client client, HttpServletRequest request, String chemin ) {
        String image = null;
        try {
            image = validationImage( request, chemin );
        } catch ( FormValidationException e ) {
            setErreur( CHAMP_IMAGE, e.getMessage() );
        }
        client.setImage( image );
    }

    private void validationNom( String nom ) throws FormValidationException {
        if ( nom != null ) {
            if ( nom.length() &lt; 2 ) {
                throw new FormValidationException( &quot;Le nom d'utilisateur doit contenir au moins 2 caractères.&quot; );
            }
        } else {
            throw new FormValidationException( &quot;Merci d'entrer un nom d'utilisateur.&quot; );
        }
    }

    private void validationPrenom( String prenom ) throws FormValidationException {
        if ( prenom != null &amp;&amp; prenom.length() &lt; 2 ) {
            throw new FormValidationException( &quot;Le prénom d'utilisateur doit contenir au moins 2 caractères.&quot; );
        }
    }

    private void validationAdresse( String adresse ) throws FormValidationException {
        if ( adresse != null ) {
            if ( adresse.length() &lt; 10 ) {
                throw new FormValidationException( &quot;L'adresse de livraison doit contenir au moins 10 caractères.&quot; );
            }
        } else {
            throw new FormValidationException( &quot;Merci d'entrer une adresse de livraison.&quot; );
        }
    }

    private void validationTelephone( String telephone ) throws FormValidationException {
        if ( telephone != null ) {
            if ( !telephone.matches( &quot;^\\d+$&quot; ) ) {
                throw new FormValidationException( &quot;Le numéro de téléphone doit uniquement contenir des chiffres.&quot; );
            } else if ( telephone.length() &lt; 4 ) {
                throw new FormValidationException( &quot;Le numéro de téléphone doit contenir au moins 4 chiffres.&quot; );
            }
        } else {
            throw new FormValidationException( &quot;Merci d'entrer un numéro de téléphone.&quot; );
        }
    }

    private void validationEmail( String email ) throws FormValidationException {
        if ( email != null &amp;&amp; !email.matches( &quot;([^.@]+)(\\.[^.@]+)*@([^.@]+\\.)+([^.@]+)&quot; ) ) {
            throw new FormValidationException( &quot;Merci de saisir une adresse mail valide.&quot; );
        }
    }

    private String validationImage( HttpServletRequest request, String chemin ) throws FormValidationException {
        /*
         * Récupération du contenu du champ image du formulaire. Il faut ici
         * utiliser la méthode getPart().
         */
        String nomFichier = null;
        InputStream contenuFichier = null;
        try {
            Part part = request.getPart( CHAMP_IMAGE );
            nomFichier = getNomFichier( part );

            /*
             * Si la méthode getNomFichier() a renvoyé quelque chose, il s'agit
             * donc d'un champ de type fichier (input type=&quot;file&quot;).
             */
            if ( nomFichier != null &amp;&amp; !nomFichier.isEmpty() ) {
                /*
                 * Antibug pour Internet Explorer, qui transmet pour une raison
                 * mystique le chemin du fichier local à la machine du client...
                 * 
                 * Ex : C:/dossier/sous-dossier/fichier.ext
                 * 
                 * On doit donc faire en sorte de ne sélectionner que le nom et
                 * l'extension du fichier, et de se débarrasser du superflu.
                 */
                nomFichier = nomFichier.substring( nomFichier.lastIndexOf( '/' ) + 1 )
                        .substring( nomFichier.lastIndexOf( '\\' ) + 1 );

                /* Récupération du contenu du fichier */
                contenuFichier = part.getInputStream();

                /* Extraction du type MIME du fichier depuis l'InputStream */
                MimeUtil.registerMimeDetector( &quot;eu.medsea.mimeutil.detector.MagicMimeMimeDetector&quot; );
                Collection&lt;?&gt; mimeTypes = MimeUtil.getMimeTypes( contenuFichier );

                /*
                 * Si le fichier est bien une image, alors son en-tête MIME
                 * commence par la chaîne &quot;image&quot;
                 */
                if ( mimeTypes.toString().startsWith( &quot;image&quot; ) ) {
                    /* Écriture du fichier sur le disque */
                    ecrireFichier( contenuFichier, nomFichier, chemin );
                } else {
                    throw new FormValidationException( &quot;Le fichier envoyé doit être une image.&quot; );
                }
            }
        } catch ( IllegalStateException e ) {
            /*
             * Exception retournée si la taille des données dépasse les limites
             * définies dans la section &lt;multipart-config&gt; de la déclaration de
             * notre servlet d'upload dans le fichier web.xml
             */
            e.printStackTrace();
            throw new FormValidationException( &quot;Le fichier envoyé ne doit pas dépasser 1Mo.&quot; );
        } catch ( IOException e ) {
            /*
             * Exception retournée si une erreur au niveau des répertoires de
             * stockage survient (répertoire inexistant, droits d'accès
             * insuffisants, etc.)
             */
            e.printStackTrace();
            throw new FormValidationException( &quot;Erreur de configuration du serveur.&quot; );
        } catch ( ServletException e ) {
            /*
             * Exception retournée si la requête n'est pas de type
             * multipart/form-data.
             */
            e.printStackTrace();
            throw new FormValidationException(
                    &quot;Ce type de requête n'est pas supporté, merci d'utiliser le formulaire prévu pour envoyer votre fichier.&quot; );
        }

        return nomFichier;
    }

    /*
     * Ajoute un message correspondant au champ spécifié à la map des erreurs.
     */
    private void setErreur( String champ, String message ) {
        erreurs.put( champ, message );
    }

    /*
     * Méthode utilitaire qui retourne null si un champ est vide, et son contenu
     * sinon.
     */
    private static String getValeurChamp( HttpServletRequest request, String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
        if ( valeur == null || valeur.trim().length() == 0 ) {
            return null;
        } else {
            return valeur;
        }
    }

    /*
     * Méthode utilitaire qui a pour unique but d'analyser l'en-tête
     * &quot;content-disposition&quot;, et de vérifier si le paramètre &quot;filename&quot; y est
     * présent. Si oui, alors le champ traité est de type File et la méthode
     * retourne son nom, sinon il s'agit d'un champ de formulaire classique et
     * la méthode retourne null.
     */
    private static String getNomFichier( Part part ) {
        /* Boucle sur chacun des paramètres de l'en-tête &quot;content-disposition&quot;. */
        for ( String contentDisposition : part.getHeader( &quot;content-disposition&quot; ).split( &quot;;&quot; ) ) {
            /* Recherche de l'éventuelle présence du paramètre &quot;filename&quot;. */
            if ( contentDisposition.trim().startsWith( &quot;filename&quot; ) ) {
                /*
                 * Si &quot;filename&quot; est présent, alors renvoi de sa valeur,
                 * c'est-à-dire du nom de fichier sans guillemets.
                 */
                return contentDisposition.substring( contentDisposition.indexOf( '=' ) + 1 ).trim().replace( &quot;\&quot;&quot;, &quot;&quot; );
            }
        }
        /* Et pour terminer, si rien n'a été trouvé... */
        return null;
    }

    /*
     * Méthode utilitaire qui a pour but d'écrire le fichier passé en paramètre
     * sur le disque, dans le répertoire donné et avec le nom donné.
     */
    private void ecrireFichier( InputStream contenuFichier, String nomFichier, String chemin )
            throws FormValidationException {
        /* Prépare les flux. */
        BufferedInputStream entree = null;
        BufferedOutputStream sortie = null;
        try {
            /* Ouvre les flux. */
            entree = new BufferedInputStream( contenuFichier, TAILLE_TAMPON );
            sortie = new BufferedOutputStream( new FileOutputStream( new File( chemin + nomFichier ) ),
                    TAILLE_TAMPON );

            /*
             * Lit le fichier reçu et écrit son contenu dans un fichier sur le
             * disque.
             */
            byte[] tampon = new byte[TAILLE_TAMPON];
            int longueur = 0;
            while ( ( longueur = entree.read( tampon ) ) &gt; 0 ) {
                sortie.write( tampon, 0, longueur );
            }
        } catch ( Exception e ) {
            throw new FormValidationException( &quot;Erreur lors de l'écriture du fichier sur le disque.&quot; );
        } finally {
            try {
                sortie.close();
            } catch ( IOException ignore ) {
            }
            try {
                entree.close();
            } catch ( IOException ignore ) {
            }
        }
    }
}</code></pre><p id="r-2137195" data-claire-element-id="2354246">Code de CreationCommandeForm :</p><pre id="r-2137196" data-claire-element-id="2838236"><code data-claire-semantic="java">package com.sdzee.tp.forms;

import java.util.HashMap;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;

import org.joda.time.DateTime;

import com.sdzee.tp.beans.Client;
import com.sdzee.tp.beans.Commande;
import com.sdzee.tp.dao.ClientDao;
import com.sdzee.tp.dao.CommandeDao;
import com.sdzee.tp.dao.DAOException;

public final class CreationCommandeForm {
    private static final String CHAMP_CHOIX_CLIENT     = &quot;choixNouveauClient&quot;;
    private static final String CHAMP_LISTE_CLIENTS    = &quot;listeClients&quot;;
    private static final String CHAMP_DATE             = &quot;dateCommande&quot;;
    private static final String CHAMP_MONTANT          = &quot;montantCommande&quot;;
    private static final String CHAMP_MODE_PAIEMENT    = &quot;modePaiementCommande&quot;;
    private static final String CHAMP_STATUT_PAIEMENT  = &quot;statutPaiementCommande&quot;;
    private static final String CHAMP_MODE_LIVRAISON   = &quot;modeLivraisonCommande&quot;;
    private static final String CHAMP_STATUT_LIVRAISON = &quot;statutLivraisonCommande&quot;;

    private static final String ANCIEN_CLIENT          = &quot;ancienClient&quot;;
    private static final String SESSION_CLIENTS        = &quot;clients&quot;;
    private static final String FORMAT_DATE            = &quot;dd/MM/yyyy HH:mm:ss&quot;;

    private String              resultat;
    private Map&lt;String, String&gt; erreurs                = new HashMap&lt;String, String&gt;();
    private ClientDao           clientDao;
    private CommandeDao         commandeDao;

    public CreationCommandeForm( ClientDao clientDao, CommandeDao commandeDao ) {
        this.clientDao = clientDao;
        this.commandeDao = commandeDao;
    }

    public Map&lt;String, String&gt; getErreurs() {
        return erreurs;
    }

    public String getResultat() {
        return resultat;
    }

    public Commande creerCommande( HttpServletRequest request, String chemin ) {
        Client client;
        /*
         * Si l'utilisateur choisit un client déjà existant, pas de validation à
         * effectuer
         */
        String choixNouveauClient = getValeurChamp( request, CHAMP_CHOIX_CLIENT );
        if ( ANCIEN_CLIENT.equals( choixNouveauClient ) ) {
            /* Récupération de l'id du client choisi */
            String idAncienClient = getValeurChamp( request, CHAMP_LISTE_CLIENTS );
            Long id = null;
            try {
                id = Long.parseLong( idAncienClient );
            } catch ( NumberFormatException e ) {
                setErreur( CHAMP_CHOIX_CLIENT, &quot;Client inconnu, merci d'utiliser le formulaire prévu à cet effet.&quot; );
                id = 0L;
            }
            /* Récupération de l'objet client correspondant dans la session */
            HttpSession session = request.getSession();
            client = ( (Map&lt;Long, Client&gt;) session.getAttribute( SESSION_CLIENTS ) ).get( id );
        } else {
            /*
             * Sinon on garde l'ancien mode, pour la validation des champs.
             * 
             * L'objet métier pour valider la création d'un client existe déjà,
             * il est donc déconseillé de dupliquer ici son contenu ! À la
             * place, il suffit de passer la requête courante à l'objet métier
             * existant et de récupérer l'objet Client créé.
             */
            CreationClientForm clientForm = new CreationClientForm( clientDao );
            client = clientForm.creerClient( request, chemin );

            /*
             * Et très important, il ne faut pas oublier de récupérer le contenu
             * de la map d'erreur créée par l'objet métier CreationClientForm
             * dans la map d'erreurs courante, actuellement vide.
             */
            erreurs = clientForm.getErreurs();
        }

        /*
         * Ensuite, il suffit de procéder normalement avec le reste des champs
         * spécifiques à une commande.
         */

        /* Récupération de la date dans un DateTime Joda. */
        DateTime dt = new DateTime();

        String montant = getValeurChamp( request, CHAMP_MONTANT );
        String modePaiement = getValeurChamp( request, CHAMP_MODE_PAIEMENT );
        String statutPaiement = getValeurChamp( request, CHAMP_STATUT_PAIEMENT );
        String modeLivraison = getValeurChamp( request, CHAMP_MODE_LIVRAISON );
        String statutLivraison = getValeurChamp( request, CHAMP_STATUT_LIVRAISON );

        Commande commande = new Commande();

        try {
            traiterClient( client, commande );

            commande.setDate( dt );

            traiterMontant( montant, commande );
            traiterModePaiement( modePaiement, commande );
            traiterStatutPaiement( statutPaiement, commande );
            traiterModeLivraison( modeLivraison, commande );
            traiterStatutLivraison( statutLivraison, commande );

            if ( erreurs.isEmpty() ) {
                commandeDao.creer( commande );
                resultat = &quot;Succès de la création de la commande.&quot;;
            } else {
                resultat = &quot;Échec de la création de la commande.&quot;;
            }
        } catch ( DAOException e ) {
            setErreur( &quot;imprévu&quot;, &quot;Erreur imprévue lors de la création.&quot; );
            resultat = &quot;Échec de la création de la commande : une erreur imprévue est survenue, merci de réessayer dans quelques instants.&quot;;
            e.printStackTrace();
        }

        return commande;
    }

    private void traiterClient( Client client, Commande commande ) {
        if ( client == null ) {
            setErreur( CHAMP_CHOIX_CLIENT, &quot;Client inconnu, merci d'utiliser le formulaire prévu à cet effet.&quot; );
        }
        commande.setClient( client );
    }

    private void traiterMontant( String montant, Commande commande ) {
        double valeurMontant = -1;
        try {
            valeurMontant = validationMontant( montant );
        } catch ( FormValidationException e ) {
            setErreur( CHAMP_MONTANT, e.getMessage() );
        }
        commande.setMontant( valeurMontant );
    }

    private void traiterModePaiement( String modePaiement, Commande commande ) {
        try {
            validationModePaiement( modePaiement );
        } catch ( FormValidationException e ) {
            setErreur( CHAMP_MODE_PAIEMENT, e.getMessage() );
        }
        commande.setModePaiement( modePaiement );
    }

    private void traiterStatutPaiement( String statutPaiement, Commande commande ) {
        try {
            validationStatutPaiement( statutPaiement );
        } catch ( FormValidationException e ) {
            setErreur( CHAMP_STATUT_PAIEMENT, e.getMessage() );
        }
        commande.setStatutPaiement( statutPaiement );
    }

    private void traiterModeLivraison( String modeLivraison, Commande commande ) {
        try {
            validationModeLivraison( modeLivraison );
        } catch ( FormValidationException e ) {
            setErreur( CHAMP_MODE_LIVRAISON, e.getMessage() );
        }
        commande.setModeLivraison( modeLivraison );
    }

    private void traiterStatutLivraison( String statutLivraison, Commande commande ) {
        try {
            validationStatutLivraison( statutLivraison );
        } catch ( FormValidationException e ) {
            setErreur( CHAMP_STATUT_LIVRAISON, e.getMessage() );
        }
        commande.setStatutLivraison( statutLivraison );
    }

    private double validationMontant( String montant ) throws FormValidationException {
        double temp;
        if ( montant != null ) {
            try {
                temp = Double.parseDouble( montant );
                if ( temp &lt; 0 ) {
                    throw new FormValidationException( &quot;Le montant doit être un nombre positif.&quot; );
                }
            } catch ( NumberFormatException e ) {
                temp = -1;
                throw new FormValidationException( &quot;Le montant doit être un nombre.&quot; );
            }
        } else {
            temp = -1;
            throw new FormValidationException( &quot;Merci d'entrer un montant.&quot; );
        }
        return temp;
    }

    private void validationModePaiement( String modePaiement ) throws FormValidationException {
        if ( modePaiement != null ) {
            if ( modePaiement.length() &lt; 2 ) {
                throw new FormValidationException( &quot;Le mode de paiement doit contenir au moins 2 caractères.&quot; );
            }
        } else {
            throw new FormValidationException( &quot;Merci d'entrer un mode de paiement.&quot; );
        }
    }

    private void validationStatutPaiement( String statutPaiement ) throws FormValidationException {
        if ( statutPaiement != null &amp;&amp; statutPaiement.length() &lt; 2 ) {
            throw new FormValidationException( &quot;Le statut de paiement doit contenir au moins 2 caractères.&quot; );
        }
    }

    private void validationModeLivraison( String modeLivraison ) throws FormValidationException {
        if ( modeLivraison != null ) {
            if ( modeLivraison.length() &lt; 2 ) {
                throw new FormValidationException( &quot;Le mode de livraison doit contenir au moins 2 caractères.&quot; );
            }
        } else {
            throw new FormValidationException( &quot;Merci d'entrer un mode de livraison.&quot; );
        }
    }

    private void validationStatutLivraison( String statutLivraison ) throws FormValidationException {
        if ( statutLivraison != null &amp;&amp; statutLivraison.length() &lt; 2 ) {
            throw new FormValidationException( &quot;Le statut de livraison doit contenir au moins 2 caractères.&quot; );
        }
    }

    /*
     * Ajoute un message correspondant au champ spécifié à la map des erreurs.
     */
    private void setErreur( String champ, String message ) {
        erreurs.put( champ, message );
    }

    /*
     * Méthode utilitaire qui retourne null si un champ est vide, et son contenu
     * sinon.
     */
    private static String getValeurChamp( HttpServletRequest request, String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
        if ( valeur == null || valeur.trim().length() == 0 ) {
            return null;
        } else {
            return valeur;
        }
    }
}</code></pre><h4 id="r-2137208" data-claire-element-id="2838243">Code des servlets</h4><p id="r-2137198" data-claire-element-id="2354249">Contenu du fichier web.xml :</p><pre id="r-2137199" data-claire-element-id="2838238"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app&gt;
    &lt;filter&gt;
        &lt;filter-name&gt;Set Character Encoding&lt;/filter-name&gt;
        &lt;filter-class&gt;org.apache.catalina.filters.SetCharacterEncodingFilter&lt;/filter-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;encoding&lt;/param-name&gt;
            &lt;param-value&gt;UTF-8&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;ignore&lt;/param-name&gt;
            &lt;param-value&gt;false&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;Set Character Encoding&lt;/filter-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
    
    &lt;filter&gt;
        &lt;filter-name&gt;PrechargementFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;com.sdzee.tp.filters.PrechargementFilter&lt;/filter-class&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;PrechargementFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
    
    &lt;listener&gt;
	&lt;listener-class&gt;com.sdzee.tp.config.InitialisationDaoFactory&lt;/listener-class&gt;
    &lt;/listener&gt;
    
	&lt;servlet&gt;
		&lt;servlet-name&gt;CreationClient&lt;/servlet-name&gt;
		&lt;servlet-class&gt;com.sdzee.tp.servlets.CreationClient&lt;/servlet-class&gt;
		&lt;init-param&gt;
			&lt;param-name&gt;chemin&lt;/param-name&gt; 
			&lt;param-value&gt;/fichiers/images/&lt;/param-value&gt; 
		&lt;/init-param&gt;
		&lt;multipart-config&gt;
			&lt;location&gt;c:/fichiers/images&lt;/location&gt;
			&lt;max-file-size&gt;2097152&lt;/max-file-size&gt; &lt;!-- 2 Mo --&gt;
			&lt;max-request-size&gt;10485760&lt;/max-request-size&gt; &lt;!-- 5 x 2Mo --&gt;
			&lt;file-size-threshold&gt;1048576&lt;/file-size-threshold&gt; &lt;!-- 1 Mo --&gt;
		&lt;/multipart-config&gt;
	&lt;/servlet&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;ListeClients&lt;/servlet-name&gt;
		&lt;servlet-class&gt;com.sdzee.tp.servlets.ListeClients&lt;/servlet-class&gt;
	&lt;/servlet&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;SuppressionClient&lt;/servlet-name&gt;
		&lt;servlet-class&gt;com.sdzee.tp.servlets.SuppressionClient&lt;/servlet-class&gt;
	&lt;/servlet&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;CreationCommande&lt;/servlet-name&gt;
		&lt;servlet-class&gt;com.sdzee.tp.servlets.CreationCommande&lt;/servlet-class&gt;
		&lt;init-param&gt;
			&lt;param-name&gt;chemin&lt;/param-name&gt; 
			&lt;param-value&gt;/fichiers/images/&lt;/param-value&gt; 
		&lt;/init-param&gt;
		&lt;multipart-config&gt;
			&lt;location&gt;c:/fichiers/images&lt;/location&gt;
			&lt;max-file-size&gt;2097152&lt;/max-file-size&gt; &lt;!-- 2 Mo --&gt;
			&lt;max-request-size&gt;10485760&lt;/max-request-size&gt; &lt;!-- 5 x 2Mo --&gt;
			&lt;file-size-threshold&gt;1048576&lt;/file-size-threshold&gt; &lt;!-- 1 Mo --&gt;
		&lt;/multipart-config&gt;
	&lt;/servlet&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;ListeCommandes&lt;/servlet-name&gt;
		&lt;servlet-class&gt;com.sdzee.tp.servlets.ListeCommandes&lt;/servlet-class&gt;
	&lt;/servlet&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;SuppressionCommande&lt;/servlet-name&gt;
		&lt;servlet-class&gt;com.sdzee.tp.servlets.SuppressionCommande&lt;/servlet-class&gt;
	&lt;/servlet&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;Image&lt;/servlet-name&gt;
		&lt;servlet-class&gt;com.sdzee.tp.servlets.Image&lt;/servlet-class&gt;
		&lt;init-param&gt;
			&lt;param-name&gt;chemin&lt;/param-name&gt; 
			&lt;param-value&gt;/fichiers/images/&lt;/param-value&gt; 
		&lt;/init-param&gt;
	&lt;/servlet&gt;

	
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;CreationClient&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/creationClient&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;ListeClients&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/listeClients&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;SuppressionClient&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/suppressionClient&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;CreationCommande&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/creationCommande&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;ListeCommandes&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/listeCommandes&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;SuppressionCommande&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/suppressionCommande&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;Image&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/images/*&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
&lt;/web-app&gt;</code></pre><p id="r-2137200" data-claire-element-id="2354251">Code de la servlet CreationClient :</p><pre id="r-2137201" data-claire-element-id="2838239"><code data-claire-semantic="java">package com.sdzee.tp.servlets;

import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.sdzee.tp.beans.Client;
import com.sdzee.tp.dao.ClientDao;
import com.sdzee.tp.dao.DAOFactory;
import com.sdzee.tp.forms.CreationClientForm;

public class CreationClient extends HttpServlet {
    public static final String CONF_DAO_FACTORY = &quot;daofactory&quot;;
    public static final String CHEMIN           = &quot;chemin&quot;;
    public static final String ATT_CLIENT       = &quot;client&quot;;
    public static final String ATT_FORM         = &quot;form&quot;;
    public static final String SESSION_CLIENTS  = &quot;clients&quot;;

    public static final String VUE_SUCCES       = &quot;/WEB-INF/afficherClient.jsp&quot;;
    public static final String VUE_FORM         = &quot;/WEB-INF/creerClient.jsp&quot;;

    private ClientDao          clientDao;

    public void init() throws ServletException {
        /* Récupération d'une instance de notre DAO Utilisateur */
        this.clientDao = ( (DAOFactory) getServletContext().getAttribute( CONF_DAO_FACTORY ) ).getClientDao();
    }

    public void doGet( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException {
        /* À la réception d'une requête GET, simple affichage du formulaire */
        this.getServletContext().getRequestDispatcher( VUE_FORM ).forward( request, response );
    }

    public void doPost( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException {
        /*
         * Lecture du paramètre 'chemin' passé à la servlet via la déclaration
         * dans le web.xml
         */
        String chemin = this.getServletConfig().getInitParameter( CHEMIN );

        /* Préparation de l'objet formulaire */
        CreationClientForm form = new CreationClientForm( clientDao );

        /* Traitement de la requête et récupération du bean en résultant */
        Client client = form.creerClient( request, chemin );

        /* Ajout du bean et de l'objet métier à l'objet requête */
        request.setAttribute( ATT_CLIENT, client );
        request.setAttribute( ATT_FORM, form );

        /* Si aucune erreur */
        if ( form.getErreurs().isEmpty() ) {
            /* Alors récupération de la map des clients dans la session */
            HttpSession session = request.getSession();
            Map&lt;Long, Client&gt; clients = (HashMap&lt;Long, Client&gt;) session.getAttribute( SESSION_CLIENTS );
            /* Si aucune map n'existe, alors initialisation d'une nouvelle map */
            if ( clients == null ) {
                clients = new HashMap&lt;Long, Client&gt;();
            }
            /* Puis ajout du client courant dans la map */
            clients.put( client.getId(), client );
            /* Et enfin (ré)enregistrement de la map en session */
            session.setAttribute( SESSION_CLIENTS, clients );

            /* Affichage de la fiche récapitulative */
            this.getServletContext().getRequestDispatcher( VUE_SUCCES ).forward( request, response );
        } else {
            /* Sinon, ré-affichage du formulaire de création avec les erreurs */
            this.getServletContext().getRequestDispatcher( VUE_FORM ).forward( request, response );
        }
    }
}</code></pre><p id="r-2137202" data-claire-element-id="2354253">Code de la servlet CreationCommande :</p><pre id="r-2137203" data-claire-element-id="2838240"><code data-claire-semantic="java">package com.sdzee.tp.servlets;

import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.sdzee.tp.beans.Client;
import com.sdzee.tp.beans.Commande;
import com.sdzee.tp.dao.ClientDao;
import com.sdzee.tp.dao.CommandeDao;
import com.sdzee.tp.dao.DAOFactory;
import com.sdzee.tp.forms.CreationCommandeForm;

public class CreationCommande extends HttpServlet {
    public static final String CONF_DAO_FACTORY      = &quot;daofactory&quot;;
    public static final String CHEMIN                = &quot;chemin&quot;;
    public static final String ATT_COMMANDE          = &quot;commande&quot;;
    public static final String ATT_FORM              = &quot;form&quot;;
    public static final String SESSION_CLIENTS       = &quot;clients&quot;;
    public static final String APPLICATION_CLIENTS   = &quot;initClients&quot;;
    public static final String SESSION_COMMANDES     = &quot;commandes&quot;;
    public static final String APPLICATION_COMMANDES = &quot;initCommandes&quot;;

    public static final String VUE_SUCCES            = &quot;/WEB-INF/afficherCommande.jsp&quot;;
    public static final String VUE_FORM              = &quot;/WEB-INF/creerCommande.jsp&quot;;

    private ClientDao          clientDao;
    private CommandeDao        commandeDao;

    public void init() throws ServletException {
        /* Récupération d'une instance de nos DAO Client et Commande */
        this.clientDao = ( (DAOFactory) getServletContext().getAttribute( CONF_DAO_FACTORY ) ).getClientDao();
        this.commandeDao = ( (DAOFactory) getServletContext().getAttribute( CONF_DAO_FACTORY ) ).getCommandeDao();
    }

    public void doGet( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException {
        /* À la réception d'une requête GET, simple affichage du formulaire */
        this.getServletContext().getRequestDispatcher( VUE_FORM ).forward( request, response );
    }

    public void doPost( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException {
        /*
         * Lecture du paramètre 'chemin' passé à la servlet via la déclaration
         * dans le web.xml
         */
        String chemin = this.getServletConfig().getInitParameter( CHEMIN );

        /* Préparation de l'objet formulaire */
        CreationCommandeForm form = new CreationCommandeForm( clientDao, commandeDao );

        /* Traitement de la requête et récupération du bean en résultant */
        Commande commande = form.creerCommande( request, chemin );

        /* Ajout du bean et de l'objet métier à l'objet requête */
        request.setAttribute( ATT_COMMANDE, commande );
        request.setAttribute( ATT_FORM, form );

        /* Si aucune erreur */
        if ( form.getErreurs().isEmpty() ) {
            /* Alors récupération de la map des clients dans la session */
            HttpSession session = request.getSession();
            Map&lt;Long, Client&gt; clients = (HashMap&lt;Long, Client&gt;) session.getAttribute( SESSION_CLIENTS );
            /* Si aucune map n'existe, alors initialisation d'une nouvelle map */
            if ( clients == null ) {
                clients = new HashMap&lt;Long, Client&gt;();
            }
            /* Puis ajout du client de la commande courante dans la map */
            clients.put( commande.getClient().getId(), commande.getClient() );
            /* Et enfin (ré)enregistrement de la map en session */
            session.setAttribute( SESSION_CLIENTS, clients );

            /* Ensuite récupération de la map des commandes dans la session */
            Map&lt;Long, Commande&gt; commandes = (HashMap&lt;Long, Commande&gt;) session.getAttribute( SESSION_COMMANDES );
            /* Si aucune map n'existe, alors initialisation d'une nouvelle map */
            if ( commandes == null ) {
                commandes = new HashMap&lt;Long, Commande&gt;();
            }
            /* Puis ajout de la commande courante dans la map */
            commandes.put( commande.getId(), commande );
            /* Et enfin (ré)enregistrement de la map en session */
            session.setAttribute( SESSION_COMMANDES, commandes );

            /* Affichage de la fiche récapitulative */
            this.getServletContext().getRequestDispatcher( VUE_SUCCES ).forward( request, response );
        } else {
            /* Sinon, ré-affichage du formulaire de création avec les erreurs */
            this.getServletContext().getRequestDispatcher( VUE_FORM ).forward( request, response );
        }
    }
}</code></pre><p id="r-2137204" data-claire-element-id="2354255">Code de la servlet SuppressionClient :</p><pre id="r-2137205" data-claire-element-id="2838241"><code data-claire-semantic="java">package com.sdzee.tp.servlets;

import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.sdzee.tp.beans.Client;
import com.sdzee.tp.dao.ClientDao;
import com.sdzee.tp.dao.DAOException;
import com.sdzee.tp.dao.DAOFactory;

public class SuppressionClient extends HttpServlet {
    public static final String CONF_DAO_FACTORY = &quot;daofactory&quot;;
    public static final String PARAM_ID_CLIENT  = &quot;idClient&quot;;
    public static final String SESSION_CLIENTS  = &quot;clients&quot;;

    public static final String VUE              = &quot;/listeClients&quot;;

    private ClientDao          clientDao;

    public void init() throws ServletException {
        /* Récupération d'une instance de notre DAO Utilisateur */
        this.clientDao = ( (DAOFactory) getServletContext().getAttribute( CONF_DAO_FACTORY ) ).getClientDao();
    }

    public void doGet( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException {
        /* Récupération du paramètre */
        String idClient = getValeurParametre( request, PARAM_ID_CLIENT );
        Long id = Long.parseLong( idClient );

        /* Récupération de la Map des clients enregistrés en session */
        HttpSession session = request.getSession();
        Map&lt;Long, Client&gt; clients = (HashMap&lt;Long, Client&gt;) session.getAttribute( SESSION_CLIENTS );

        /* Si l'id du client et la Map des clients ne sont pas vides */
        if ( id != null &amp;&amp; clients != null ) {
            try {
                /* Alors suppression du client de la BDD */
                clientDao.supprimer( clients.get( id ) );
                /* Puis suppression du client de la Map */
                clients.remove( id );
            } catch ( DAOException e ) {
                e.printStackTrace();
            }
            /* Et remplacement de l'ancienne Map en session par la nouvelle */
            session.setAttribute( SESSION_CLIENTS, clients );
        }

        /* Redirection vers la fiche récapitulative */
        response.sendRedirect( request.getContextPath() + VUE );
    }

    /*
     * Méthode utilitaire qui retourne null si un paramètre est vide, et son
     * contenu sinon.
     */
    private static String getValeurParametre( HttpServletRequest request, String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
        if ( valeur == null || valeur.trim().length() == 0 ) {
            return null;
        } else {
            return valeur;
        }
    }
}</code></pre><p id="r-2137206" data-claire-element-id="2354257">Code de la servlet SuppressionCommande :</p><pre id="r-2137207" data-claire-element-id="2838242"><code data-claire-semantic="java">package com.sdzee.tp.servlets;

import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.sdzee.tp.beans.Commande;
import com.sdzee.tp.dao.CommandeDao;
import com.sdzee.tp.dao.DAOException;
import com.sdzee.tp.dao.DAOFactory;

public class SuppressionCommande extends HttpServlet {
    public static final String CONF_DAO_FACTORY  = &quot;daofactory&quot;;
    public static final String PARAM_ID_COMMANDE = &quot;idCommande&quot;;
    public static final String SESSION_COMMANDES = &quot;commandes&quot;;

    public static final String VUE               = &quot;/listeCommandes&quot;;

    private CommandeDao        commandeDao;

    public void init() throws ServletException {
        /* Récupération d'une instance de notre DAO Utilisateur */
        this.commandeDao = ( (DAOFactory) getServletContext().getAttribute( CONF_DAO_FACTORY ) ).getCommandeDao();
    }

    public void doGet( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException {
        /* Récupération du paramètre */
        String idCommande = getValeurParametre( request, PARAM_ID_COMMANDE );
        Long id = Long.parseLong( idCommande );

        /* Récupération de la Map des commandes enregistrées en session */
        HttpSession session = request.getSession();
        Map&lt;Long, Commande&gt; commandes = (HashMap&lt;Long, Commande&gt;) session.getAttribute( SESSION_COMMANDES );

        /* Si l'id de la commande et la Map des commandes ne sont pas vides */
        if ( id != null &amp;&amp; commandes != null ) {
            try {
                /* Alors suppression de la commande de la BDD */
                commandeDao.supprimer( commandes.get( id ) );
                /* Puis suppression de la commande de la Map */
                commandes.remove( id );
            } catch ( DAOException e ) {
                e.printStackTrace();
            }
            /* Et remplacement de l'ancienne Map en session par la nouvelle */
            session.setAttribute( SESSION_COMMANDES, commandes );
        }

        /* Redirection vers la fiche récapitulative */
        response.sendRedirect( request.getContextPath() + VUE );
    }

    /*
     * Méthode utilitaire qui retourne null si un paramètre est vide, et son
     * contenu sinon.
     */
    private static String getValeurParametre( HttpServletRequest request, String nomChamp ) {
        String valeur = request.getParameter( nomChamp );
        if ( valeur == null || valeur.trim().length() == 0 ) {
            return null;
        } else {
            return valeur;
        }
    }
}</code></pre><h4 id="r-2137211" data-claire-element-id="2838245">Code du filtre</h4><p id="r-2137209" data-claire-element-id="2354260">Code du filtre de préchargement :</p><pre id="r-2137210" data-claire-element-id="2838244"><code data-claire-semantic="java">package com.sdzee.tp.filters;

import java.io.IOException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;

import com.sdzee.tp.beans.Client;
import com.sdzee.tp.beans.Commande;
import com.sdzee.tp.dao.ClientDao;
import com.sdzee.tp.dao.CommandeDao;
import com.sdzee.tp.dao.DAOFactory;

public class PrechargementFilter implements Filter {
    public static final String CONF_DAO_FACTORY      = &quot;daofactory&quot;;
    public static final String ATT_SESSION_CLIENTS   = &quot;clients&quot;;
    public static final String ATT_SESSION_COMMANDES = &quot;commandes&quot;;

    private ClientDao          clientDao;
    private CommandeDao        commandeDao;

    public void init( FilterConfig config ) throws ServletException {
        /* Récupération d'une instance de nos DAO Client et Commande */
        this.clientDao = ( (DAOFactory) config.getServletContext().getAttribute( CONF_DAO_FACTORY ) ).getClientDao();
        this.commandeDao = ( (DAOFactory) config.getServletContext().getAttribute( CONF_DAO_FACTORY ) )
                .getCommandeDao();
    }

    public void doFilter( ServletRequest req, ServletResponse res, FilterChain chain ) throws IOException,
            ServletException {
        /* Cast de l'objet request */
        HttpServletRequest request = (HttpServletRequest) req;

        /* Récupération de la session depuis la requête */
        HttpSession session = request.getSession();

        /*
         * Si la map des clients n'existe pas en session, alors l'utilisateur se
         * connecte pour la première fois et nous devons précharger en session
         * les infos contenues dans la BDD.
         */
        if ( session.getAttribute( ATT_SESSION_CLIENTS ) == null ) {
            /*
             * Récupération de la liste des clients existants, et enregistrement
             * en session
             */
            List&lt;Client&gt; listeClients = clientDao.lister();
            Map&lt;Long, Client&gt; mapClients = new HashMap&lt;Long, Client&gt;();
            for ( Client client : listeClients ) {
                mapClients.put( client.getId(), client );
            }
            session.setAttribute( ATT_SESSION_CLIENTS, mapClients );
        }

        /*
         * De même pour la map des commandes
         */
        if ( session.getAttribute( ATT_SESSION_COMMANDES ) == null ) {
            /*
             * Récupération de la liste des commandes existantes, et
             * enregistrement en session
             */
            List&lt;Commande&gt; listeCommandes = commandeDao.lister();
            Map&lt;Long, Commande&gt; mapCommandes = new HashMap&lt;Long, Commande&gt;();
            for ( Commande commande : listeCommandes ) {
                mapCommandes.put( commande.getId(), commande );
            }
            session.setAttribute( ATT_SESSION_COMMANDES, mapCommandes );
        }

        /* Pour terminer, poursuite de la requête en cours */
        chain.doFilter( request, res );
    }

    public void destroy() {
    }
}</code></pre><h4 id="r-2137220" data-claire-element-id="2838250">Code des JSP</h4><p id="r-2137212" data-claire-element-id="2354263">Code de listerClients.jsp :</p><pre id="r-2137213" data-claire-element-id="2838246"><code data-claire-semantic="jsp">&lt;%@ page pageEncoding=&quot;UTF-8&quot; %&gt;
&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
        &lt;title&gt;Liste des clients existants&lt;/title&gt;
        &lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;&lt;c:url value=&quot;/inc/style.css&quot;/&gt;&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;c:import url=&quot;/inc/menu.jsp&quot; /&gt;
        &lt;div id=&quot;corps&quot;&gt;
        &lt;c:choose&gt;
            &lt;%-- Si aucun client n'existe en session, affichage d'un message par défaut. --%&gt;
            &lt;c:when test=&quot;${ empty sessionScope.clients }&quot;&gt;
                &lt;p class=&quot;erreur&quot;&gt;Aucun client enregistré.&lt;/p&gt;
            &lt;/c:when&gt;
            &lt;%-- Sinon, affichage du tableau. --%&gt;
            &lt;c:otherwise&gt;
            &lt;table&gt;
                &lt;tr&gt;
                    &lt;th&gt;Nom&lt;/th&gt;
                    &lt;th&gt;Prénom&lt;/th&gt;
                    &lt;th&gt;Adresse&lt;/th&gt;
                    &lt;th&gt;Téléphone&lt;/th&gt;
                    &lt;th&gt;Email&lt;/th&gt;
                    &lt;th&gt;Image&lt;/th&gt;
                    &lt;th class=&quot;action&quot;&gt;Action&lt;/th&gt;                    
                &lt;/tr&gt;
                &lt;%-- Parcours de la Map des clients en session, et utilisation de l'objet varStatus. --%&gt;
                &lt;c:forEach items=&quot;${ sessionScope.clients }&quot; var=&quot;mapClients&quot; varStatus=&quot;boucle&quot;&gt;
                &lt;%-- Simple test de parité sur l'index de parcours, pour alterner la couleur de fond de chaque ligne du tableau. --%&gt;
                &lt;tr class=&quot;${boucle.index % 2 == 0 ? 'pair' : 'impair'}&quot;&gt;
                    &lt;%-- Affichage des propriétés du bean Client, qui est stocké en tant que valeur de l'entrée courante de la map --%&gt;
                    &lt;td&gt;&lt;c:out value=&quot;${ mapClients.value.nom }&quot;/&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value=&quot;${ mapClients.value.prenom }&quot;/&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value=&quot;${ mapClients.value.adresse }&quot;/&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value=&quot;${ mapClients.value.telephone }&quot;/&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value=&quot;${ mapClients.value.email }&quot;/&gt;&lt;/td&gt;
                    &lt;td&gt;
                        &lt;%-- On ne construit et affiche un lien vers l'image que si elle existe. --%&gt;
                        &lt;c:if test=&quot;${ !empty mapClients.value.image }&quot;&gt;
                            &lt;c:set var=&quot;image&quot;&gt;&lt;c:out value=&quot;${ mapClients.value.image }&quot;/&gt;&lt;/c:set&gt;
                            &lt;a href=&quot;&lt;c:url value=&quot;/images/${ image }&quot;/&gt;&quot;&gt;Voir&lt;/a&gt;
                        &lt;/c:if&gt;
                    &lt;/td&gt;
                    &lt;%-- Lien vers la servlet de suppression, avec passage du nom du client - c'est-à-dire la clé de la Map - en paramètre grâce à la balise &lt;c:param/&gt;. --%&gt;
                    &lt;td class=&quot;action&quot;&gt;
                        &lt;a href=&quot;&lt;c:url value=&quot;/suppressionClient&quot;&gt;&lt;c:param name=&quot;idClient&quot; value=&quot;${ mapClients.key }&quot; /&gt;&lt;/c:url&gt;&quot;&gt;
                            &lt;img src=&quot;&lt;c:url value=&quot;/inc/supprimer.png&quot;/&gt;&quot; alt=&quot;Supprimer&quot; /&gt;
                        &lt;/a&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
                &lt;/c:forEach&gt;
            &lt;/table&gt;
            &lt;/c:otherwise&gt;
        &lt;/c:choose&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-2137214" data-claire-element-id="2354265">Code de listerCommandes.jsp :</p><pre id="r-2137215" data-claire-element-id="2838247"><code data-claire-semantic="jsp">&lt;%@ page pageEncoding=&quot;UTF-8&quot; %&gt;
&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;
&lt;%@ taglib prefix=&quot;joda&quot; uri=&quot;http://www.joda.org/joda/time/tags&quot; %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
        &lt;title&gt;Liste des commandes existantes&lt;/title&gt;
        &lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;&lt;c:url value=&quot;/inc/style.css&quot;/&gt;&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;c:import url=&quot;/inc/menu.jsp&quot; /&gt;
        &lt;div id=&quot;corps&quot;&gt;
        &lt;c:choose&gt;
            &lt;%-- Si aucune commande n'existe en session, affichage d'un message par défaut. --%&gt;
            &lt;c:when test=&quot;${ empty sessionScope.commandes }&quot;&gt;
                &lt;p class=&quot;erreur&quot;&gt;Aucune commande enregistrée.&lt;/p&gt;
            &lt;/c:when&gt;
            &lt;%-- Sinon, affichage du tableau. --%&gt;
            &lt;c:otherwise&gt;
            &lt;table&gt;
                &lt;tr&gt;
                    &lt;th&gt;Client&lt;/th&gt;
                    &lt;th&gt;Date&lt;/th&gt;
                    &lt;th&gt;Montant&lt;/th&gt;
                    &lt;th&gt;Mode de paiement&lt;/th&gt;
                    &lt;th&gt;Statut de paiement&lt;/th&gt;
                    &lt;th&gt;Mode de livraison&lt;/th&gt;
                    &lt;th&gt;Statut de livraison&lt;/th&gt;
                    &lt;th class=&quot;action&quot;&gt;Action&lt;/th&gt;                    
                &lt;/tr&gt;
                &lt;%-- Parcours de la Map des commandes en session, et utilisation de l'objet varStatus. --%&gt;
                &lt;c:forEach items=&quot;${ sessionScope.commandes }&quot; var=&quot;mapCommandes&quot; varStatus=&quot;boucle&quot;&gt;
                &lt;%-- Simple test de parité sur l'index de parcours, pour alterner la couleur de fond de chaque ligne du tableau. --%&gt;
                &lt;tr class=&quot;${boucle.index % 2 == 0 ? 'pair' : 'impair'}&quot;&gt;
                    &lt;%-- Affichage des propriétés du bean Commande, qui est stocké en tant que valeur de l'entrée courante de la map --%&gt;
                    &lt;td&gt;&lt;c:out value=&quot;${ mapCommandes.value.client.prenom } ${ mapCommandes.value.client.nom }&quot;/&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;joda:format value=&quot;${ mapCommandes.value.date }&quot; pattern=&quot;dd/MM/yyyy HH:mm:ss&quot;/&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value=&quot;${ mapCommandes.value.montant }&quot;/&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value=&quot;${ mapCommandes.value.modePaiement }&quot;/&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value=&quot;${ mapCommandes.value.statutPaiement }&quot;/&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value=&quot;${ mapCommandes.value.modeLivraison }&quot;/&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value=&quot;${ mapCommandes.value.statutLivraison }&quot;/&gt;&lt;/td&gt;
                    &lt;%-- Lien vers la servlet de suppression, avec passage de la date de la commande - c'est-à-dire la clé de la Map - en paramètre grâce à la balise &lt;c:param/&gt;. --%&gt;
                    &lt;td class=&quot;action&quot;&gt;
                        &lt;a href=&quot;&lt;c:url value=&quot;/suppressionCommande&quot;&gt;&lt;c:param name=&quot;idCommande&quot; value=&quot;${ mapCommandes.key }&quot; /&gt;&lt;/c:url&gt;&quot;&gt;
                            &lt;img src=&quot;&lt;c:url value=&quot;/inc/supprimer.png&quot;/&gt;&quot; alt=&quot;Supprimer&quot; /&gt;
                        &lt;/a&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
                &lt;/c:forEach&gt;
            &lt;/table&gt;
            &lt;/c:otherwise&gt;
        &lt;/c:choose&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-2137216" data-claire-element-id="2354267">Code de creerCommande.jsp :</p><pre id="r-2137217" data-claire-element-id="2838248"><code data-claire-semantic="jsp">&lt;%@ page pageEncoding=&quot;UTF-8&quot; %&gt;
&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;
&lt;%@ taglib prefix=&quot;joda&quot; uri=&quot;http://www.joda.org/joda/time/tags&quot; %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
        &lt;title&gt;Création d'une commande&lt;/title&gt;
        &lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;&lt;c:url value=&quot;/inc/style.css&quot;/&gt;&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;c:import url=&quot;/inc/menu.jsp&quot; /&gt;
        &lt;div&gt;
            &lt;form method=&quot;post&quot; action=&quot;&lt;c:url value=&quot;/creationCommande&quot;/&gt;&quot; enctype=&quot;multipart/form-data&quot;&gt;
                &lt;fieldset&gt;
                    &lt;legend&gt;Informations client&lt;/legend&gt;
                    &lt;%-- Si et seulement si la Map des clients en session n'est pas vide, alors on propose un choix à l'utilisateur --%&gt;
                    &lt;c:if test=&quot;${ !empty sessionScope.clients }&quot;&gt;
                        &lt;label for=&quot;choixNouveauClient&quot;&gt;Nouveau client ? &lt;span class=&quot;requis&quot;&gt;*&lt;/span&gt;&lt;/label&gt;
                        &lt;input type=&quot;radio&quot; id=&quot;choixNouveauClient&quot; name=&quot;choixNouveauClient&quot; value=&quot;nouveauClient&quot; checked /&gt; Oui
                        &lt;input type=&quot;radio&quot; id=&quot;choixNouveauClient&quot; name=&quot;choixNouveauClient&quot; value=&quot;ancienClient&quot; /&gt; Non
                        &lt;br/&gt;&lt;br /&gt;
                    &lt;/c:if&gt;
                    
                    &lt;c:set var=&quot;client&quot; value=&quot;${ commande.client }&quot; scope=&quot;request&quot; /&gt;
                    &lt;div id=&quot;nouveauClient&quot;&gt;
                        &lt;c:import url=&quot;/inc/inc_client_form.jsp&quot; /&gt;
                    &lt;/div&gt;
                    
                    &lt;%-- Si et seulement si la Map des clients en session n'est pas vide, alors on crée la liste déroulante --%&gt;
                    &lt;c:if test=&quot;${ !empty sessionScope.clients }&quot;&gt;
                    &lt;div id=&quot;ancienClient&quot;&gt;
                        &lt;select name=&quot;listeClients&quot; id=&quot;listeClients&quot;&gt;
                            &lt;option value=&quot;&quot;&gt;Choisissez un client...&lt;/option&gt;
                            &lt;%-- Boucle sur la map des clients --%&gt;
                            &lt;c:forEach items=&quot;${ sessionScope.clients }&quot; var=&quot;mapClients&quot;&gt;
                            &lt;%--  L'expression EL ${mapClients.value} permet de cibler l'objet Client stocké en tant que valeur dans la Map, 
                                  et on cible ensuite simplement ses propriétés nom et prenom comme on le ferait avec n'importe quel bean. --%&gt;
                            &lt;option value=&quot;${ mapClients.key }&quot;&gt;${ mapClients.value.prenom } ${ mapClients.value.nom }&lt;/option&gt;
                            &lt;/c:forEach&gt;
                        &lt;/select&gt;
                    &lt;/div&gt;
                    &lt;/c:if&gt;
                &lt;/fieldset&gt;
                &lt;fieldset&gt;
                    &lt;legend&gt;Informations commande&lt;/legend&gt;
                    
                    &lt;label for=&quot;dateCommande&quot;&gt;Date &lt;span class=&quot;requis&quot;&gt;*&lt;/span&gt;&lt;/label&gt;
                    &lt;input type=&quot;text&quot; id=&quot;v&quot; name=&quot;dateCommande&quot; value=&quot;&lt;joda:format value=&quot;${ commande.date }&quot; pattern=&quot;dd/MM/yyyy HH:mm:ss&quot;/&gt;&quot; size=&quot;30&quot; maxlength=&quot;30&quot; disabled /&gt;
                    &lt;span class=&quot;erreur&quot;&gt;${form.erreurs['dateCommande']}&lt;/span&gt;
                    &lt;br /&gt;
                    
                    &lt;label for=&quot;montantCommande&quot;&gt;Montant &lt;span class=&quot;requis&quot;&gt;*&lt;/span&gt;&lt;/label&gt;
                    &lt;input type=&quot;text&quot; id=&quot;montantCommande&quot; name=&quot;montantCommande&quot; value=&quot;&lt;c:out value=&quot;${commande.montant}&quot;/&gt;&quot; size=&quot;30&quot; maxlength=&quot;30&quot; /&gt;
                    &lt;span class=&quot;erreur&quot;&gt;${form.erreurs['montantCommande']}&lt;/span&gt;
                    &lt;br /&gt;
                    
                    &lt;label for=&quot;modePaiementCommande&quot;&gt;Mode de paiement &lt;span class=&quot;requis&quot;&gt;*&lt;/span&gt;&lt;/label&gt;
                    &lt;input type=&quot;text&quot; id=&quot;modePaiementCommande&quot; name=&quot;modePaiementCommande&quot; value=&quot;&lt;c:out value=&quot;${commande.modePaiement}&quot;/&gt;&quot; size=&quot;30&quot; maxlength=&quot;30&quot; /&gt;
                    &lt;span class=&quot;erreur&quot;&gt;${form.erreurs['modePaiementCommande']}&lt;/span&gt;
                    &lt;br /&gt;
                    
                    &lt;label for=&quot;statutPaiementCommande&quot;&gt;Statut du paiement&lt;/label&gt;
                    &lt;input type=&quot;text&quot; id=&quot;statutPaiementCommande&quot; name=&quot;statutPaiementCommande&quot; value=&quot;&lt;c:out value=&quot;${commande.statutPaiement}&quot;/&gt;&quot; size=&quot;30&quot; maxlength=&quot;30&quot; /&gt;
                    &lt;span class=&quot;erreur&quot;&gt;${form.erreurs['statutPaiementCommande']}&lt;/span&gt;
                    &lt;br /&gt;
                    
                    &lt;label for=&quot;modeLivraisonCommande&quot;&gt;Mode de livraison &lt;span class=&quot;requis&quot;&gt;*&lt;/span&gt;&lt;/label&gt;
                    &lt;input type=&quot;text&quot; id=&quot;modeLivraisonCommande&quot; name=&quot;modeLivraisonCommande&quot; value=&quot;&lt;c:out value=&quot;${commande.modeLivraison}&quot;/&gt;&quot; size=&quot;30&quot; maxlength=&quot;30&quot; /&gt;
                    &lt;span class=&quot;erreur&quot;&gt;${form.erreurs['modeLivraisonCommande']}&lt;/span&gt;
                    &lt;br /&gt;
                    
                    &lt;label for=&quot;statutLivraisonCommande&quot;&gt;Statut de la livraison&lt;/label&gt;
                    &lt;input type=&quot;text&quot; id=&quot;statutLivraisonCommande&quot; name=&quot;statutLivraisonCommande&quot; value=&quot;&lt;c:out value=&quot;${commande.statutLivraison}&quot;/&gt;&quot; size=&quot;30&quot; maxlength=&quot;30&quot; /&gt;
                    &lt;span class=&quot;erreur&quot;&gt;${form.erreurs['statutLivraisonCommande']}&lt;/span&gt;
                    &lt;br /&gt;
                    
                    &lt;p class=&quot;info&quot;&gt;${ form.resultat }&lt;/p&gt;
                &lt;/fieldset&gt;
                &lt;input type=&quot;submit&quot; value=&quot;Valider&quot;  /&gt;
                &lt;input type=&quot;reset&quot; value=&quot;Remettre à zéro&quot; /&gt; &lt;br /&gt;
            &lt;/form&gt;
        &lt;/div&gt;
        
        &lt;%-- Inclusion de la bibliothèque jQuery. Vous trouverez des cours sur JavaScript et jQuery aux adresses suivantes :
               - http://www.siteduzero.com/tutoriel-3-309961-dynamisez-vos-sites-web-avec-javascript.html 
               - http://www.siteduzero.com/tutoriel-3-659477-un-site-web-dynamique-avec-jquery.html 
               
             Si vous ne souhaitez pas télécharger et ajouter jQuery à votre projet, vous pouvez utiliser la version fournie directement en ligne par Google :
             &lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js&quot;&gt;&lt;/script&gt; 
        --%&gt;
        &lt;script src=&quot;&lt;c:url value=&quot;/inc/jquery.js&quot;/&gt;&quot;&gt;&lt;/script&gt;
        
        &lt;%-- Petite fonction jQuery permettant le remplacement de la première partie du formulaire par la liste déroulante, au clic sur le bouton radio. --%&gt;
        &lt;script&gt;
        	jQuery(document).ready(function(){
        		/* 1 - Au lancement de la page, on cache le bloc d'éléments du formulaire correspondant aux clients existants */
        		$(&quot;div#ancienClient&quot;).hide();
        		/* 2 - Au clic sur un des deux boutons radio &quot;choixNouveauClient&quot;, on affiche le bloc d'éléments correspondant (nouveau ou ancien client) */
                jQuery('input[name=choixNouveauClient]:radio').click(function(){
                	$(&quot;div#nouveauClient&quot;).hide();
                	$(&quot;div#ancienClient&quot;).hide();
                    var divId = jQuery(this).val();
                    $(&quot;div#&quot;+divId).show();
                });
            });
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-2137218" data-claire-element-id="2354269">Code de afficherCommande.jsp :</p><pre id="r-2137219" data-claire-element-id="2838249"><code data-claire-semantic="jsp">&lt;%@ page pageEncoding=&quot;UTF-8&quot; %&gt;
&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;
&lt;%@ taglib prefix=&quot;joda&quot; uri=&quot;http://www.joda.org/joda/time/tags&quot; %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
        &lt;title&gt;Affichage d'une commande&lt;/title&gt;
        &lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;&lt;c:url value=&quot;/inc/style.css&quot;/&gt;&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;c:import url=&quot;/inc/menu.jsp&quot; /&gt;
        &lt;div id=&quot;corps&quot;&gt;
            &lt;p class=&quot;info&quot;&gt;${ form.resultat }&lt;/p&gt;
            &lt;p&gt;Client&lt;/p&gt;
            &lt;p&gt;Nom : &lt;c:out value=&quot;${ commande.client.nom }&quot;/&gt;&lt;/p&gt;
            &lt;p&gt;Prénom : &lt;c:out value=&quot;${ commande.client.prenom }&quot;/&gt;&lt;/p&gt;
            &lt;p&gt;Adresse : &lt;c:out value=&quot;${ commande.client.adresse }&quot;/&gt;&lt;/p&gt;
            &lt;p&gt;Numéro de téléphone : &lt;c:out value=&quot;${ commande.client.telephone }&quot;/&gt;&lt;/p&gt;
            &lt;p&gt;Email : &lt;c:out value=&quot;${ commande.client.email }&quot;/&gt;&lt;/p&gt;
            &lt;p&gt;Image : &lt;c:out value=&quot;${ commande.client.image }&quot;/&gt;&lt;/p&gt;
            &lt;p&gt;Commande&lt;/p&gt;
            &lt;p&gt;Date  : &lt;joda:format value=&quot;${ commande.date }&quot; pattern=&quot;dd/MM/yyyy HH:mm:ss&quot;/&gt;&lt;/p&gt; 
            &lt;p&gt;Montant  : &lt;c:out value=&quot;${ commande.montant }&quot;/&gt;&lt;/p&gt; 
            &lt;p&gt;Mode de paiement  : &lt;c:out value=&quot;${ commande.modePaiement }&quot;/&gt;&lt;/p&gt; 
            &lt;p&gt;Statut du paiement  : &lt;c:out value=&quot;${ commande.statutPaiement }&quot;/&gt;&lt;/p&gt; 
            &lt;p&gt;Mode de livraison  : &lt;c:out value=&quot;${ commande.modeLivraison }&quot;/&gt;&lt;/p&gt; 
            &lt;p&gt;Statut de la livraison  : &lt;c:out value=&quot;${ commande.statutLivraison }&quot;/&gt;&lt;/p&gt; 
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>

                <div class="js-courseSelementActions sideActions">
    <ul class="sideActions__container">
        <li>
            <a class="sideActions__item  js-courseElementActions-copyUrl  js-tooltip"
               href="#" data-tooltip="Copier le lien"
               data-tooltip-done="Lien copié !">
            #
            </a>
        </li>
    </ul>
</div>
            </div>

            
            <nav class="course-pagination    clearfix">

            <a href="le-modele-dao.html" class="oc-btn dark-btn course-pagination__btn course-pagination__btn--previous">
            <i class="icon-previous"></i>
            <span>Le modèle DAO</span>
        </a>
    
    <span class="course-pagination__separator"></span>

            <a href="gerer-un-pool-de-connexions-avec-bonecp.html" class="oc-btn dark-btn course-pagination__btn course-pagination__btn--next">
            <span>Gérer un pool de connexions avec BoneCP</span>
            <i class="icon-next"></i>
        </a>
    
</nav>

            
<aside  tabindex="-1"
        role="dialog"
                    aria-labelledby="popin-view-restriction_popin_title"
                class="popin popin--illustrated  js-popin"
        id="popin-view-restriction"
>
    <i class="popin__close-button icon-close js-close-button"></i>

    <div class="popin__inner">
                    <div class="popin__illustrationWrapper">
                <div class="popin__illustration illustration--balloon"></div>
            </div>
        
        <div class="popin__mainContainer">
                            <h3 id="popin-view-restriction_popin_title" class="popin__title  js-popin-title">Waouh !</h3>
            
            
            
            <div class="popin__content  js-popin-content">
                <div class="popin__contentWrapper">
                                                <p>
            Très heureux de voir que nos cours vous plaisent, déjà 3 pages lues aujourd&#039;hui ! Vous pouvez continuer la lecture de nos cours en devenant un Roomie, un membre de la communauté d&#039;OpenClassrooms. C&#039;est gratuit !
        </p>
        <p>
            Vous pourrez aussi suivre votre avancement dans le cours, faire les exercices et discuter avec les autres Roomies.
        </p>
                    </div>
            </div>

                            <div class="popin__actions  js-popin-actions">
                                                                        <a class="oc-btn orange-alt-btn "  href="https://openclassrooms.com/register">S'inscrire</a>
                                                    <a class="oc-btn dark-btn "  href="https://openclassrooms.com/login">Se connecter</a>
                                                            </div>
            
                        
                    </div>
    </div>
</aside>

        </div>


    </section>
</div>
    </div>

    
    <div id="popin-not-certifying-yet"
     class="popin"
     data-popin-title="Vous ne pouvez pas encore obtenir de certificat de réussite à l&#039;issue de ce cours.
                            <a href='https://openclassrooms.com/premium'><i class='icon-star'></i> Devenez Premium</a>
                    ">
    <img alt="Exemple de certificat de réussite" src="../../../static.oc-static.com/prod/images/courses/certif.jpg"/>
</div>


                </main>

                <aside class="contentWithSidebar__sidebar  js-contentWithSidebar-slidingElement" >
                        <nav class="col-nav">
    <div id="tab-courseMenu" class="col-nav__inner js-sidebar-inner">
        <div class="col-nav__block  col-nav__block--summary">

            <div class="side-paginate">
                                    <a href="le-modele-dao.html" class="side-paginate__previous">
                        <i class="icon-previous"></i>
                    </a>

                    <span class="side-paginate__separator"></span>
                
                <h6 class="side-paginate__title">
                    Les bases de données avec Java EE
                </h6>

                                    <span class="side-paginate__separator"></span>

                    <a href="gerer-un-pool-de-connexions-avec-bonecp.html" class="side-paginate__next">
                        <i class="icon-next"></i>
                    </a>
                            </div>

                            <div class="col-nav__block--summary-list">
                    <ol class="col-nav__chapters">
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="introduction-a-mysql-et-jdbc.html">Introduction à MySQL et JDBC</a>
                                                            </li>
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="communiquez-avec-votre-bdd.html">Communiquez avec votre BDD</a>
                                                            </li>
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="le-modele-dao.html">Le modèle DAO</a>
                                                            </li>
                                                    <li class="selected">
                                                                                                    <span class="col-nav__chapterTitle">TP Fil rouge - Étape 6</span>
                                                            </li>
                                                    <li class="">
                                                                                                    <a class="col-nav__chapterTitle" href="gerer-un-pool-de-connexions-avec-bonecp.html">Gérer un pool de connexions avec BoneCP</a>
                                                            </li>
                                            </ol>

                                    </div>
                    </div>

        
        
            <div class="col-nav__block  col-nav__block--subscribe">
            <a href="https://openclassrooms.com/login" class="oc-btn orange-alt-btn js-popin-activator" data-popin-selector="#popin-log-in">
                <i class="icon-lock"></i>
                Suivre ce cours
            </a>

            <a href="https://openclassrooms.com/how-does-it-work">
                <small>Comment ça marche ?</small>
            </a>
        </div>
    


        
                    <div class="col-nav__block col-nav__block--institution">
    <h2>Créé par</h2>
            <a  href="https://openclassrooms.com/partners/openclassrooms" target="_blank">
            <img src="../../../sdz-upload.s3.amazonaws.com/prod/partners/img/logo_logo-oc.png" alt="logo OpenClassrooms" class="col-nav__institutionLogo"/>
            <p class="col-nav__block--institutionDescription">
                OpenClassrooms, 1ère plateforme  <span class='nowrap'>e-Education<span> en Europe
            </p>
        </a>
    </div>
        
        
        
    
                        
            
    <div class="socialNetwork col-nav__block">
        <ul class="socialButtons  js-socialButtons"
    data-options="
                title: 'Découvrez le cours &quot;TP Fil rouge - Étape 6&quot; sur @OpenClassrooms',
        mailTitle: 'Cours &quot;TP Fil rouge - Étape 6&quot; sur OpenClassrooms',
        mailContent: 'Découvrez le cours &quot;TP Fil rouge - Étape 6&quot; sur OpenClassrooms.'">

    <li>
        <a class="roundIcon  roundIcon--twitter addthis_button_twitter  js-socialButtons-btn" data-tooltip="Partagez sur Twitter" >
            <i class="roundIcon__icon  icon-twitter"></i>
        </a>
    </li>

    <li>
        <a class="roundIcon  roundIcon--facebook  addthis_button_facebook  js-socialButtons-btn" data-tooltip="Partagez sur Facebook">
            <i class="roundIcon__icon  icon-facebook"></i>
        </a>
    </li>

    <li>
        <a class="roundIcon  roundIcon--googlePlus  addthis_button_google_plusone_share  js-socialButtons-btn" data-tooltip="Partagez sur Google+" >
            <i class="roundIcon__icon  icon-google"></i>
        </a>
    </li>

    <li>
        <a class="roundIcon  addthis_button_email  js-socialButtons-btn  js-socialButtons-email" data-tooltip="Partagez par e-mail">
            <i class="roundIcon__icon  icon-letter"></i>
        </a>
    </li>

</ul>

    </div>
    </div>
</nav>
                </aside>
            </div>
        </div>

                    <footer class="alt-section">
    <div class="centered">

        <div class="row">
                            <div class="col4 course-bottom__category">
                    <h2 class="highlighted">
                        L&#039;auteur
                    </h2>
                    <div>
                                                    <a itemprop="author" itemscope itemtype="http://schema.org/Person" href="https://openclassrooms.com/membres/coyote-92394" class="no-underlined">
                                <div class="course-bottom__text-illustrated">
                                    <span data-author="Médéric Munier" style="background-image: url(../../../www.gravatar.com/avatar/15c349ac5313535fba91e5dbfa8803ec/indexd6dc.html?s=256&amp;r=g&amp;d=https%3A%2F%2Fopenclassrooms.com%2Fbundles%2Fcommon%2Fimages%2Favatar_defaut.png);"></span>
                                    <h4 itemprop="name">Médéric Munier</h4>
                                                                            <p itemprop="description">
                                            Auteur du livre sur le Java EE.
                                        </p>
                                                                    </div>
                            </a>
                                            </div>
                </div>
            
                            <div class="col8 course-bottom__category">
                    <h2 class="highlighted">Découvrez aussi ce cours en...</h2>

                    <ul class="course-bottom__format">
                                                    <li>
                                <a
                                                                                    href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee" class="text-decoration-none"
                                                                        >
                                    <div class="circle circle--x-small">
                                        <span class="circle__content"></span>
                                        <i class="icon-ebook"></i>
                                                                                    <div class="ribbon ribbon--orange">
                                                <div class="ribbon__content">
                                                    <span>Premium</span>
                                                </div>
                                            </div>
                                                                            </div>
                                    <div class="course-bottom__format-entitled">eBook</div>
                                </a>
                            </li>
                                                    <li>
                                <a
                                                                                    href="http://www.eyrolles.com/Informatique/Livre/creez-des-applications-web-avec-java-ee-9791090085244?societe=openclassrooms" target="_blank" class="text-decoration-none"
                                                                        >
                                    <div class="circle circle--x-small">
                                        <span class="circle__content"></span>
                                        <i class="icon-book"></i>
                                                                            </div>
                                    <div class="course-bottom__format-entitled">Livre papier</div>
                                </a>
                            </li>
                                                    <li>
                                <a
                                                                                    href="https://openclassrooms.com/ebooks/creez-votre-application-web-avec-java-ee" class="text-decoration-none"
                                                                        >
                                    <div class="circle circle--x-small">
                                        <span class="circle__content"></span>
                                        <i class="icon-ebook pdf"></i>
                                                                                    <div class="ribbon ribbon--orange">
                                                <div class="ribbon__content">
                                                    <span>Premium</span>
                                                </div>
                                            </div>
                                                                            </div>
                                    <div class="course-bottom__format-entitled">PDF</div>
                                </a>
                            </li>
                                            </ul>
                </div>
                    </div>

    </div>
</footer>


    </article>
            </div>
        </div>

                    <footer class="footer">
    <div class="centered">
        <div class="row">

            <div class="col3 col6-s  footer__item  linksList  foldable  js-foldable" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: 'closed'">
                <h2 class="linksList__title  foldable__button  js-foldable-button">
                    OpenClassrooms
                    <i class="icon-next  foldable__icon"></i>
                </h2>

                <ul class="linksList__content foldable__content">
                    <li>
                        <a href="https://openclassrooms.com/about-us" class="footer__link">Qui sommes-nous ?</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/how-does-it-work" class="footer__link">Fonctionnement de nos cours</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/jobs" class="footer__link">Recrutement</a>
                    </li>
                    <li>
                        <a href="#" class="js-zendesk-show footer__link">Nous contacter</a>
                    </li>
                </ul>
            </div>

            <div class="col3 col6-s  footer__item  linksList  foldable  js-foldable" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: 'closed'">
                <h2 class="linksList__title  foldable__button  js-foldable-button">
                    Professionnels
                    <i class="icon-next  foldable__icon"></i>
                </h2>

                <ul class="linksList__content foldable__content">
                    <li>
                        <a href="https://openclassrooms.com/affiliation" class="footer__link">
                            Affiliation
                        </a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/business" class="footer__link">Entreprises</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/universities" class="footer__link">Universités et écoles</a>
                    </li>
                </ul>
            </div>

            <div class="col3 col6-s  footer__item  linksList  foldable  js-foldable" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: 'closed'">
                <h2 class="linksList__title  foldable__button  js-foldable-button">
                    Participez
                    <i class="icon-next  foldable__icon"></i>
                </h2>

                <ul class="linksList__content foldable__content">
                    <li>
                        <a href="https://openclassrooms.com/new-teachers" class="footer__link">Créer un cours</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/courses/courselab" class="footer__link">CourseLab</a>
                    </li>
                    <li>
                        <a href="https://openclassrooms.com/terms-conditions/fr" class="footer__link">
                            <strong>Conditions Générales d&#039;Utilisation</strong>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="col3 col6-s  footer__item  linksList  foldable  js-foldable" data-options="mobileOnly: true, disableOnLargeScreen: true, initialState: 'closed'">
                <h2 class="linksList__title  foldable__button  js-foldable-button">
                    Suivez-nous
                    <i class="icon-next  foldable__icon"></i>
                </h2>
                                                                    <ul class="linksList__content foldable__content">
                    <li>
                        <a href="http://blog.openclassrooms.com/" class="footer__link">Le blog OpenClassrooms</a>
                    </li>
                    <li>
                        <ul class="footer__socialNetwork">
                            <li>
                                <a href="https://www.facebook.com/openclassrooms" target="_blank" class="roundIcon roundIcon--facebook footer__socialButtons">
                                    <i class="icon-facebook roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://twitter.com/openclassrooms" target="_blank" class="roundIcon roundIcon--twitter footer__socialButtons">
                                    <i class="icon-twitter roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://plus.google.com/+OpenClassrooms/posts" target="_blank" class="roundIcon roundIcon--youtube footer__socialButtons">
                                    <i class="icon-google roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="http://instagram.com/openclassrooms" target="_blank" class="roundIcon roundIcon--instagram footer__socialButtons">
                                    <i class="icon-instagram roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://www.youtube.com/user/TheOpenClassrooms" target="_blank" class="roundIcon roundIcon--googlePlus footer__socialButtons">
                                    <i class="icon-youtube roundIcon__icon"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://www.linkedin.com/company/openclassrooms" target="_blank" class="roundIcon roundIcon--linkedin footer__socialButtons">
                                    <i class="icon-linkedin roundIcon__icon"></i>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>

            </div>
        </div>
    </div>
</footer>
        
        <!-- loaded javascript block -->

            
            <script type="text/javascript" src="../../js/maind0b3.js?095b5b3"></script>

        

    <script type="text/javascript" src="../../js/oc/courseViewd0b3.js?095b5b3"></script>


        <!-- loaded javascript block -->

        <script type="text/javascript">
    window.analytics=window.analytics||[],window.analytics.methods=["identify","group","track","page","pageview","alias","ready","on","once","off","trackLink","trackForm","trackClick","trackSubmit"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var key=window.analytics.methods[i];window.analytics[key]=window.analytics.factory(key)}window.analytics.load=function(t){if(!document.getElementById("analytics-js")){var a=document.createElement("script");a.type="text/javascript",a.id="analytics-js",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.io/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)}},window.analytics.SNIPPET_VERSION="2.0.9",
    window.analytics.load('mou95e6tdn');
</script>

                            
        <!-- inlined javascript block -->

        <script type="text/javascript">
            
            if (App.modules) {
                App.modules.startAll();
            }
        </script>

                        
    <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"90dc06697a","applicationID":"20302107","transactionName":"NANaYkJXC0ICAhdYVw1Je0NDQgpcTA4AblsPB1FEVWkGXhYTEFRnEwdKQm9GBEMXPhVYXRQ=","queueTime":0,"applicationTime":411,"atts":"GERZFApNGEw=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>

<!-- Mirrored from openclassrooms.com/courses/creez-votre-application-web-avec-java-ee/tp-fil-rouge-etape-6 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Apr 2016 09:52:09 GMT -->
</html>
